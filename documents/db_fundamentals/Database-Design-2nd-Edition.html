<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
<meta http-equiv="Content-Language" content="en" />
<meta name="generator" content="Pressbooks 3.9.4.2" />
<meta name="pb-cover-image" content="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DatabaseDesign_cover_PBsize.jpg" />
<meta name="pb-title" content="Database Design - 2nd Edition" />
<meta name="pb-author" content="Adrienne Watt" />
<meta name="pb-author-file-as" content="Watt, Adrienne" />
<meta name="pb-contributing-authors" content="Nelson Eng" />
<meta name="pb-language" content="en" />
<meta name="pb-copyright-year" content="2014" />
<meta name="pb-copyright-holder" content="Adrienne Watt and Nelson Eng" />
<meta name="pb-book-license" content="cc-by" />
<meta name="pb-custom-copyright" content="Unless otherwise noted within this book, this book is released under a  Creative Commons Attribution 4.0 International License  also known as a CC-BY license. This means you are free to copy, redistribute, modify or adapt this book. Under this license, anyone who redistributes or modifies this textbook, in whole or in part, can do so for free providing they properly attribute the book.Additionally, if you redistribute this textbook, in whole or in part, in either a print or digital format, then you must retain on every physical and/or electronic page the following attribution:Download this book for free at http://open.bccampus.caCover image: Spiral Stairs In Milano old building downtown by Michele Ursino used under a CC-BY-SA 2.0 license  ." />
<meta name="pb-about-50" content="Database Design - 2nd Edition covers database systems and database design concepts. New to this edition are SQL info, additional examples, key terms and review exercises at the end of each chapter." />
<meta name="pb-about-unlimited" content="This second edition of Database Design book covers the concepts used in database systems and the database design process. Topics include:The history of databasesCharacteristics and benefits of databasesData modelsData modellingClassification of database management systemsIntegrity rules and constraintsFunctional dependenciesNormalizationDatabase development processNew to this edition are more examples, highlighted and defined key terms, both throughout and at the end of each chapter, and end-of-chapter review exercises. Two new chapters have been added on SQL, along with appendices that include a data model example, sample ERD exercises and SQL lab with solutions." />
<meta name="pb-keywords-tags" content="database, design, introduction" />
<meta name="pb-bisac-subject" content="computers, general, databases" />
<title>Database Design - 2nd Edition </title>
</head>
<body lang='en'>
<div id="half-title-page"><h1 class="title">Database Design - 2nd Edition </h1></div>
<div id="title-page"><h1 class="title">Database Design - 2nd Edition </h1><h2 class="subtitle"></h2><h3 class="author">Adrienne Watt</h3><h4 class="contributing-authors">Nelson Eng</h4><h4 class="publisher"></h4><h5 class="publisher-city"></h5></div>
<div id="copyright-page"><div class="ugc"><div><div><p>Unless otherwise noted within this book, this book is released under a  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>  also known as a CC-BY license. This means you are free to copy, redistribute, modify or adapt this book. Under this license, anyone who redistributes or modifies this textbook, in whole or in part, can do so for free providing they properly attribute the book.</p><p>Additionally, if you redistribute this textbook, in whole or in part, in either a print or digital format, then you must retain on every physical and/or electronic page the following attribution:</p><p><strong>Download this book for free at http://open.bccampus.ca</strong></p><p>Cover image: <a href="(http://www.flickr.com/photos/micurs/3498339723/in/photostream/">Spiral Stairs In Milano old building downtown</a> by <a href="http://www.flickr.com/photos/micurs/">Michele Ursino</a> used under a <a href="http://creativecommons.org/licenses/by-sa/2.0/deed.en_CA">CC-BY-SA 2.0 license  </a>.</p></div></div><div class="license-attribution" xmlns:cc="http://creativecommons.org/ns#"><p xmlns:dct="http://purl.org/dc/terms/"><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"/></a><br/><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Database Design - 2nd Edition </span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://opentextbc.ca/dbdesign01" property="cc:attributionName" rel="cc:attributionURL">Adrienne Watt and Nelson Eng</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, except where otherwise noted.</p></div></div></div>
<div id="toc"><h1>Contents</h1><ul><li class="front-matter preface"><a href="#preface"><span class="toc-chapter-title">Preface</span></a></li><li class="front-matter miscellaneous"><a href="#about-the-book"><span class="toc-chapter-title">About the Book</span></a></li><li class="front-matter acknowledgements"><a href="#acknowledgements"><span class="toc-chapter-title">Acknowledgements</span></a></li><li class="part display-none"><a href="#main-body">Main Body</a></li><li class="chapter standard"><a href="#chapter-1-before-the-advent-of-database-systems"><span class="toc-chapter-title">Chapter 1 Before the Advent of Database Systems</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-2-fundamental-concepts"><span class="toc-chapter-title">Chapter 2 Fundamental Concepts</span> <span class="chapter-author">Adrienne Watt &#038; Nelson Eng</span></a></li><li class="chapter standard"><a href="#chapter-3-characteristics-and-benefits-of-a-database"><span class="toc-chapter-title">Chapter 3 Characteristics and Benefits of a Database</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-4-types-of-database-models"><span class="toc-chapter-title">Chapter 4 Types of Data Models</span> <span class="chapter-author">Adrienne Watt &#038; Nelson Eng</span></a></li><li class="chapter standard"><a href="#chapter-5-data-modelling"><span class="toc-chapter-title">Chapter 5 Data Modelling</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-6-classification-of-database-systems"><span class="toc-chapter-title">Chapter 6 Classification of Database Management Systems</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-7-the-relational-data-model"><span class="toc-chapter-title">Chapter 7 The Relational Data Model</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-8-entity-relationship-model"><span class="toc-chapter-title">Chapter 8 The Entity Relationship Data Model</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-9-integrity-rules-and-constraints"><span class="toc-chapter-title">Chapter 9 Integrity Rules and Constraints</span> <span class="chapter-author">Adrienne Watt &#038; Nelson Eng</span></a></li><li class="chapter standard"><a href="#chapter-10-er-modelling"><span class="toc-chapter-title">Chapter 10 ER Modelling</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-11-functional-dependencies"><span class="toc-chapter-title">Chapter 11 Functional Dependencies</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-12-normalization"><span class="toc-chapter-title">Chapter 12 Normalization</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-13-database-development-process"><span class="toc-chapter-title">Chapter 13 Database Development Process</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#chapter-14-database-users"><span class="toc-chapter-title">Chapter 14 Database Users</span> <span class="chapter-author">Adrienne Watt</span></a></li><li class="chapter standard"><a href="#sql-structured-query-language"><span class="toc-chapter-title">Chapter 15 SQL Structured Query Language</span> <span class="chapter-author">Adrienne Watt &#038; Nelson Eng</span></a></li><li class="chapter standard"><a href="#chapter-sql-dml"><span class="toc-chapter-title">Chapter 16 SQL Data Manipulation Language</span> <span class="chapter-author">Adrienne Watt &#038; Nelson Eng</span></a></li><li class="back-matter appendix"><a href="#appendix-a-university-registration-data-model-example"><span class="toc-chapter-title">Appendix A University Registration Data Model Example</span></a></li><li class="back-matter appendix"><a href="#appendix-b-erd-exercises"><span class="toc-chapter-title">Appendix B Sample ERD Exercises</span></a></li><li class="back-matter appendix"><a href="#appendix-d-sql-lab-with-solution"><span class="toc-chapter-title">Appendix C SQL Lab with Solution</span></a></li><li class="back-matter about-the-author"><a href="#about-the-author"><span class="toc-chapter-title">About the Authors</span></a></li></ul></div>
<div class="front-matter preface" id="preface"><div class="front-matter-title-wrap"><h3 class="front-matter-number">1</h3><h1 class="front-matter-title">Preface</h1></div><div class="ugc front-matter-ugc"><p>The primary purpose of this text is to provide an open source textbook that covers most introductory database courses. The material in the textbook was obtained from a variety of sources. All the sources are found in at the end of each chapter. I expect, with time, the book will grow with more information and more examples.</p> <p>I welcome any feedback that would improve the book. If you would like to add a section to the book, please let me know.</p> <p>Adrienne Watt</p> <h2></h2> </div></div>
<div class="front-matter miscellaneous" id="about-the-book"><div class="front-matter-title-wrap"><h3 class="front-matter-number">2</h3><h1 class="front-matter-title">About the Book</h1></div><div class="ugc front-matter-ugc"><p><em>Database Design &#8211; 2nd Edition</em> is a remix and adaptation, based on Adrienne Watt&#8217;s book, <i>Database Design</i>. Works that are part of the remix for this book are listed at the end of each chapter. For information about what was changed in this adaptation, refer to the Copyright statement at the bottom of the home page.</p> <p>This adaptation is a part of the <a href="http://open.bccampus.ca/" class="external-link" rel="nofollow">B.C. Open Textbook project</a>.</p> <p>In October 2012, the B.C. Ministry of Advanced Education <a href="http://www2.news.gov.bc.ca/news_releases_2009-2013/2012aeit0010-001581.htm" class="external-link" rel="nofollow">announced</a> its support for the creation of open textbooks for the 40 highest-enrolled first and second year subject areas in the province&#8217;s public post-secondary system.</p> <p>Open textbooks are open educational resources (OER); they are instructional resources created and shared in ways so that more people have access to them. This is a different model than traditionally copyrighted materials. OER are defined as âteaching, learning, and research resources that reside in the public domain or have been released under an intellectual property license that permits their free use and re-purposing by others (<a href="http://www.hewlett.org/programs/education/open-educational-resources" class="external-link" rel="nofollow">Hewlett Foundation</a>).</p> <p>Our open textbooks are openly licensed using a <a href="https://creativecommons.org/licenses/" class="external-link" rel="nofollow">Creative Commons license</a>, and are offered in various e-book formats free of charge, or as printed books that are available at cost.</p> <p>For more information about this project, please contact <a href="mailto:opentext@bccampus.ca" class="external-link" rel="nofollow">opentext@bccampus.ca</a>.</p> <p>If you are an instructor who is using this book for a course, <a href="http://open.bccampus.ca/find-open-textbooks/stay-informed/" class="external-link" rel="nofollow">please let us know</a>.</p> </div></div>
<div class="front-matter acknowledgements" id="acknowledgements"><div class="front-matter-title-wrap"><h3 class="front-matter-number">3</h3><h1 class="front-matter-title">Acknowledgements</h1></div><div class="ugc front-matter-ugc"><h2>Adrienne Watt</h2> <p>This book has been a wonderful experience in the world of open textbooks. It&#8217;s amazing to see how much information is available to be shared. I would like to thank Nguyen Kim Anh of OpenStax College, for her contribution of database models and the relational design sections. I would also like to thank Dr. Gordon Russell for the section on normalization. His database resources were wonderful. Open Learning University in the UK provided me with a great ERD example. In addition, Tom Jewet provided some invaluable UML contributions.</p> <p>I would also like to thank my many students over the years and a special instructor, Mitra Ramkay (BCIT). He is fondly remembered for the mentoring he provided when I first started teaching relational databases 25 years ago. Another person instrumental in getting me started in creating an open textbook is Terrie MacAloney. She was encouraging and taught me think outside the box.</p> <p>A special thanks goes to my family for the constant love and support I received throughout this project.</p> <h2>Nelson Eng</h2> <p>I would like to thank the many people who helped in this edition including my students at Douglas College and my colleague Ms. Adrienne Watt.</p> <p>We would like to particularly thank Lauri Aesoph at BCcampus for her perseverance and hard work while editing the book. She did an amazing job.</p> </div></div>
<div class="chapter introduction standard" id="chapter-1-before-the-advent-of-database-systems"><div class="chapter-title-wrap"><h3 class="chapter-number">1</h3><h2 class="chapter-title">Chapter 1 Before the Advent of Database Systems</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>The way in which computers manage data has come a long way over the last few decades. Today&#8217;s users take for granted the many benefits found in a database system. However, it wasn&#8217;t that long ago that computers relied on a much less elegant and costly approach to data management called the file-based system.</p> <h2>File-based System</h2> <p>One way to keep information on a computer is to store it in permanent files. A company system has a number of application programs; each of them is designed to manipulate data files. These application programs have been written at the request of the users in the organization. New applications are added to the system as the need arises. The system just described is called the <em>file-based system</em>.</p> <p>Consider a traditional banking system that uses the file-based system to manage the organization’s data shown in Figure 1.1. As we can see, there are different departments in the bank. Each has its own applications that manage and manipulate different data files. For banking systems, the programs may be used to debit or credit an account, find the balance of an account, add a new mortgage loan and generate monthly statements.</p> <div id="attachment_159" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x1701.jpg"><img class="wp-image-159 size-full" alt="Diagram with three coloured drawings: one of a woman and two men sitting and talking; the second shows a man shaking hands with a woman, both are standing and holding briefcases; the third is of a woman sitting. There are also drawings of labelled files, such as Employees, Checking Accounts and Mortgage Loans." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x1701.jpg" height="170" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x1701.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x1701-65x36.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x1701-225x127.jpg 225w" /></a> <p class="wp-caption-text">Figure 1.1. Example of a file-based system used by banks to manage data.</p> </div> <h3>Disadvantages of the file-based approach</h3> <p>Using the file-based system to keep organizational information has a number of disadvantages. Listed below are five examples.</p> <h4>Data redundancy</h4> <p>Often, within an organization, files and applications are created by different programmers from various departments over long periods of time. This can lead to <em>data redundancy, </em>a situation that occurs in a database when a field needs to be updated in more than one table. This practice can lead to several problems such as:</p> <ul><li>Inconsistency in data format</li> <li>The same information being kept in several different places (files)</li> <li><em>Data inconsistency</em>, a situation where various copies of the same data are conflicting, wastes storage space and duplicates effort</li> </ul> <h4>Data isolation</h4> <p><em>Data isolation</em>  is a property <span style="color: #000000">that determines when and how changes made by one operation become visible to other concurrent </span>users and systems. This issue occurs in a concurrency situation. This is a problem because:</p> <ul><li>It is difficult for new applications to retrieve the appropriate data, which might be stored in various files.</li> </ul> <h4>Integrity problems</h4> <p>Problems with <em>data integrity</em><span style="color: #ff0000"> </span>is another disadvantage of using a file-based system. It refers to the maintenance and assurance that the data in a database are correct and consistent. Factors to consider when addressing this issue are:</p> <ul><li>Data values must satisfy certain consistency constraints that are specified in the application programs.</li> <li>It is difficult to make changes to the application programs in order to enforce new constraints.</li> </ul> <h4>Security problems</h4> <p><span>Security can be a problem with a file-based approach because: </span></p> <ul><li>There are constraints regarding accessing privileges.</li> <li>Application requirements are added to the system in an ad-hoc manner so it is difficult to enforce constraints.</li> </ul> <h4>Concurrency access</h4> <p><em>Concurrency</em> is the ability of the database to allow multiple users access to the same record without adversely affecting transaction processing. A file-based system must manage, or prevent, concurrency by the application programs. Typically, in a file-based system, when an application opens a file, that file is locked. This means that no one else has access to the file at the same time.</p> <p>In database systems, concurrency is managed thus allowing multiple users access to the same record. This is an important difference between database and file-based systems.</p> <h2>Database Approach</h2> <p>The difficulties that arise from using the file-based system have prompted the development of a new approach in managing large amounts of organizational information called the <em>database approach</em>.</p> <p>Databases and database technology play an important role in most areas where computers are used, including business, education and medicine. To understand the fundamentals of database systems, we will start by introducing some basic concepts in this area.</p> <h3>Role of databases in business</h3> <p>Everybody uses a database in some way, even if it is just to store information about their friends and family. That data might be written down or stored in a computer by using a word-processing program or it could be saved in a spreadsheet. However, the best way to store data is by using <em>database management software</em>. This is a powerful software tool that allows you to store, manipulate and retrieve data in a variety of different ways.</p> <p>Most companies keep track of customer information by storing it in a database. This data may include customers, employees, products, orders or anything else that assists the business with its operations.</p> <h3>The meaning of data</h3> <p>Data are factual information such as measurements or statistics about objects and concepts. We use data for discussions or as part of a calculation. Data can be a person, a place, an event, an action or any one of a number of things. A single fact is an element of data, or a <em>data element</em>.</p> <p>If data are information and information is what we are in the business of working with, you can start to see where you might be storing it. Data can be stored in:</p> <ul><li>Filing cabinets</li> <li>Spreadsheets</li> <li>Folders</li> <li>Ledgers</li> <li>Lists</li> <li>Piles of papers on your desk</li> </ul> <p>All of these items store information, and so too does a database. Because of the mechanical nature of databases, they have terrific power to manage and process the information they hold. This can make the information they house much more useful for your work.</p> <p>With this understanding of data, we can start to see how a tool with the capacity to store a collection of data and organize it, conduct a rapid search, retrieve and process, might make a difference to how we can use data. This book and the chapters that follow are all about managing information.</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>concurrency</strong>: the ability of the database to allow multiple users access to the same record without adversely affecting transaction processing</p> <p><strong>data element</strong>: a single fact or piece of information</p> <p><strong>data inconsistency</strong>: a situation where various copies of the same data are conflicting</p> <p><strong>data isolation</strong>: a property <span style="color: #000000">that determines when and how changes made by one operation become visible to other concurrent </span>users and systems</p> <p><strong>data integrity</strong>: refers to the maintenance and assurance that the data in a database are correct and consistent</p> <p><strong>data redundancy</strong>: a situation that occurs in a database when a field needs to be updated in more than one table</p> <p><strong>database approach</strong>: allows the management of large amounts of organizational information</p> <p><strong>database management software</strong>: a powerful software tool that allows you to store, manipulate and retrieve data in a variety of ways</p> <p><strong>file-based system</strong>: an application program designed to manipulate data files</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Discuss each of the following terms: <ol><li>data</li> <li>field</li> <li>record</li> <li>file</li> </ol> </li> <li>What is data redundancy?</li> <li>Discuss the disadvantages of file-based systems.</li> <li>Explain the difference between data and information.</li> <li>Use Figure 1.2 (below) to answer the following questions. <ol><li>In the table, how many records does the file contain?</li> <li>How many fields are there per record?</li> <li>What problem would you encounter if you wanted to produce a listing by city?</li> <li>How would you solve this problem by altering the file structure?</li> </ol> </li> </ol> <div id="attachment_242" style="width: 610px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851.jpg"><img class="wp-image-242" alt="A table listing project codes, names of project managers, phone numbers, addresses and bid prices." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851.jpg" height="124" width="600" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851.jpg 1161w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851-300x62.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851-1024x211.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851-65x13.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851-225x46.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch1-Exercises-Figure1-1-e1409149351851-350x72.jpg 350w" /></a> <p class="wp-caption-text">Figure 1.2. Table for exercise #5, by A. Watt.</p> </div> </div> <h2>Attribution</h2> <p><span style="color: #1f1f1d">This chapter of </span><em>Database Design </em>(including its images, unless otherwise noted) <span style="color: #1f1f1d">is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a></span><span style="color: #1f1f1d"> by</span> Nguyen Kim Anh<span style="color: #1f1f1d"> licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></span></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Introduction</li> <li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-2-fundamental-concepts"><div class="chapter-title-wrap"><h3 class="chapter-number">2</h3><h2 class="chapter-title">Chapter 2 Fundamental Concepts</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt &#038; Nelson Eng</h2><h2>What Is a Database?</h2> <p>A <em>database</em> is a shared collection of related data used to support the activities of a particular organization. A database can be viewed as a repository of data that is defined once and then accessed by various users as shown in Figure 2.1.</p> <div id="attachment_136" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091.jpg"><img width="300" height="209" class="wp-image-136 size-full" alt="A diagram showing a yellow cylinder with coloured rectangles within it, presumably representing data. Four rectangels are listed to the left of this each with the label &quot;Application Program&quot;." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091-65x45.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091-225x156.jpg 225w" /></a> <p class="wp-caption-text">Figure 2.1. A database is a repository of data.</p> </div> <h2>Database Properties</h2> <p>A database has the following properties:</p> <ul><li>It is a representation of some aspect of the real world or a collection of <span style="color: #000000"><em>data element</em>s</span> (facts) representing real-world information.</li> <li>A database is logical, coherent and internally consistent.</li> <li>A database is designed, built and populated with data for a specific purpose.</li> <li>Each data item is stored in a field.</li> <li>A combination of fields makes up a <span style="color: #000000"><em>table</em></span>. For example, each field in an employee table contains data about an individual employee.</li> </ul> <p><em> </em>A database can contain many tables. For example, a membership system may contain an address table and an individual member table as shown in Figure 2.2. Members of Science World are individuals, group homes, businesses and corporations who have an active membership to Science World. Memberships can be purchased for a one- or two-year period, and then renewed for another one- or two-year period.</p> <div id="attachment_740" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014.jpg"><img width="400" height="259" class="wp-image-740" alt="Snapshot of an online membership form. Underneath it is a spreadsheet with names, barcodes, date, and teim." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014.jpg 843w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014-300x193.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014-225x145.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/08/MemFormAug2014-350x226.jpg 350w" /></a> <p class="wp-caption-text">Figure 2.2. Membership system at Science World by N. Eng.</p> </div> <p>In Figure 2.2, Minnie Mouse renewed the family membership with Science World. Everyone with <span style="color: #000000">membership ID#100755</span>  <span style="color: #ff0000"></span>lives at 8932 Rodent Lane. The individual members are Mickey Mouse, Minnie Mouse, Mighty Mouse, Door Mouse, Tom Mouse, King Rat, Man Mouse and Moose Mouse.</p> <h2>Database Management System</h2> <p>A <em>database management system (DBMS)</em> is a collection of programs that enables users to create and maintain databases and control all access to them. The primary goal of a DBMS is to provide an environment that is both convenient and efficient for users to retrieve and store information.</p> <p style="text-align: left">With the database approach, we can have the traditional banking system as shown in Figure 2.3. In this bank example, a DBMS is used by the Personnel Department, the Account Department and the Loan Department to access the shared corporate database.</p> <div id="attachment_137" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x1951.jpg"><img width="300" height="195" class="wp-image-137 size-full" alt="There are three drawings on the left. The top one shows three people sitting and talking at a table; it is labelled as Personnel Dept. The drawing underneath this shows a man and woman in business attire and carrying briefcases shaking hands; it is labelled as Account Dept. The last drawing is of a woman; it is labelled Loan Dept. To the right of this is a rectangle with DBMS. to the right of this is a green cylinder that says Shared Database with employees, checking accounts, saving accounts, installment loans, mortgage loans, data files." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x1951.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x1951.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x1951-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x1951-225x146.jpg 225w" /></a> <p class="wp-caption-text">Figure 2.3. A bank database management system (DBMS).</p> </div> <h2></h2> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><span style="color: #000000"><strong>data elements</strong>:</span> facts that represent real-world information</p> <p><strong>database</strong>: a shared collection of related data used to support the activities of a particular organization</p> <p><strong>database management system (DBMS)</strong>:  a collection of programs that enables users to create and maintain databases and control all access to them</p> <p><strong>table</strong>: a combination of fields</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>What is a database management system (DBMS)?</li> <li>What are the properties of a DBMS?</li> <li>Provide three examples of a real-world database (e.g., the library contains a database of books).</li> </ol> </div> <h2> Attribution</h2> <p>This chapter of <em>Database Design</em> (including images, except as otherwise noted) is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a> by Nguyen Kim Anh licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Nelson Eng:</p> <ol><li>Example under <em>Database Properties</em></li> <li>Key Terms</li> </ol> <p>The following material was written by Adrienne Watt:</p> <ol><li>Exercises</li> </ol> <p>&nbsp;</p> </div></div>
<div class="chapter standard" id="chapter-3-characteristics-and-benefits-of-a-database"><div class="chapter-title-wrap"><h3 class="chapter-number">3</h3><h2 class="chapter-title">Chapter 3 Characteristics and Benefits of a Database</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>Managing information means taking care of it so that it works for us and is useful for the tasks we perform. By using a DBMS, the information we collect and add to its database is no longer subject to accidental disorganization. It becomes more accessible and integrated with the rest of our work. Managing information using a database allows us to become strategic users of the data we have.</p> <p>We often need to access and re-sort data for various uses. These may include:</p> <ul><li>Creating mailing lists</li> <li>Writing management reports</li> <li>Generating lists of selected news stories</li> <li>Identifying various client needs</li> </ul> <p>The processing power of a database allows it to manipulate the data it houses, so it can:</p> <ul><li>Sort</li> <li>Match</li> <li>Link</li> <li>Aggregate</li> <li>Skip fields</li> <li>Calculate</li> <li>Arrange</li> </ul> <p>Because of the versatility of databases, we find them powering all sorts of projects. A database can be linked to:</p> <ul><li>A website that is capturing registered users</li> <li>A client-tracking application for social service organizations</li> <li>A medical record system for a health care facility</li> <li>Your personal address book in your email client</li> <li>A collection of word-processed documents</li> <li>A system that issues airline reservations</li> </ul> <h2>Characteristics and Benefits of a Database</h2> <p>There are a number of characteristics that distinguish the database approach from the file-based system or approach. This chapter describes the benefits (and features) of the database system.</p> <h3>Self-describing nature of a database system</h3> <p>A database system is referred to as <em>self-describing</em> because it not only contains the database itself, but also <i>metadata </i>which defines and describes the data and relationships <span>between</span> tables in the database. This information is used by the DBMS software or database users if needed. This separation <span style="color: #000000">of data and information about the data</span> makes a database system totally different from the traditional file-based system in which the data definition is part of the application programs.</p> <h3>Insulation between program and data</h3> <p>In the file-based system, the structure of the data files is defined in the application programs so if a user wants to change the structure of a file, all the programs that access that file might need to be changed as well.</p> <p>On the other hand, in the database approach, the data structure is stored in the system catalogue and not in the programs. Therefore, one change is all that is needed <span style="color: #000000">to change the structure of a file</span>. This insulation <span style="color: #000000">between</span> the programs and data is also called program-data independence.</p> <h3>Support for multiple views of data</h3> <p>A database supports multiple views of data.  A <em>view</em> is a subset of the database, which is defined and dedicated for particular users of the system. Multiple users in the system might have different views of the system. Each view might contain only the data of interest to a user or group of users.</p> <h3>Sharing of data and multiuser system</h3> <p>Current database systems are designed for multiple users. That is, they allow many users to access the same database at the same time. This access is achieved through features called <em>concurrency control strategies</em>. These strategies ensure that the data accessed are always correct and that <span style="color: #000000">data integrity is maintained. </span></p> <p><span style="color: #000000">The design of modern multiuser database systems is a great improvement from those in the past which restricted usage to one person at a time. </span></p> <h3>Control of data redundancy</h3> <p>In the database approach, ideally, each data item is stored in only one place in the database. In some cases, data redundancy still exists to improve system performance, but such redundancy is controlled by application programming<span style="color: #ff0000"></span> and kept to minimum by introducing as little redudancy as possible when designing the database.</p> <h3>Data sharing</h3> <p><span style="color: #333333">The integration of all the data, for an organization, within a database system has many advantages. First, it allows for data sharing among employees and others who have access to the system. Second, it gives users the ability to generate more information from a given amount of data than would be possible without the integration.</span></p> <h3>Enforcement of integrity constraints</h3> <p>Database management systems must provide the ability to define and enforce certain constraints to ensure that users enter valid informatio<span style="color: #333333">n and maintain data integrity.</span> A <em>database constraint</em> is a restriction or rule that dictates what can be entered or edited in a table such as a postal code using a certain format or adding a valid city in the City field.</p> <p>There are many types of database constraints. <em>Data type</em>, for example, determines the sort of data permitted in a field, for example numbers only. <em>Data uniqueness </em>such as the primary key ensures that no duplicates are entered. Constraints can be simple (field based) or complex (programming).</p> <h3>Restriction of unauthorized access</h3> <p>Not all users of a database system will have the same accessing privileges. For example, one user might have <em>read-only access</em> (i.e., the ability to read a file but not make changes), while another might have <em>read and write privileges</em>, which is the ability to both read and modify a file. For this reason, a database management system should provide a security subsystem to create and control different types of user accounts and restrict unauthorized access.</p> <h3>Data independence</h3> <p><span style="color: #000000">Another advantage of a database management system is how it allows for data independence. In other words, the system data descriptions or data describing data (metadata) are separated from the application programs. This is possible because changes to the data structure are handled by the database management system and  are not embedded in the program itself.</span></p> <h3>Transaction processing</h3> <p><span style="color: #333333"> A database management system must include concurrency control subsystems. This feature ensures that data remains consistent and valid during transaction processing even if several users update the same information.</span></p> <h3>Provision for multiple views of data</h3> <p><span style="color: #333333">By its very nature, a DBMS permits many users to have access to its database either individually or simultaneously. It is not important for users to be aware of how and where the data they access is stored</span></p> <h3>Backup and recovery facilities</h3> <p><span style="color: #333333">Backup and recovery are methods that allow you to protect your data from loss.  The database system provides a separate process, from that of a network backup, for backing up and recovering data. If a hard drive fails and the database stored on the hard drive is not accessible, the only way to recover the database is from a backup.<br /> If a computer system fails in the middle of a complex update process, the recovery subsystem is responsible for making sure that the database is restored to its original state. These are two more benefits of a database management system.</span></p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>concurrency control strategies</strong>: features of a database that allow several users access to the same data item at the same time</p> <p><strong>data type</strong>: <span>determines the sort of data permitted in a field, for example numbers only</span></p> <p><strong>data uniqueness</strong>: <span>ensures that no duplicates are entered</span></p> <p><strong>database constraint</strong>: a restriction that determines what is allowed to be entered or edited in a table</p> <p><strong>metadata</strong>: defines and describes the data and relationships<span style="color: #ff0000"> <span style="color: #000000">between</span></span> tables in the database</p> <p><strong>read and write privileges:</strong><span> the ability to both read and modify a file</span></p> <p><strong>read-only</strong><span><strong>access:</strong> the ability to read a file but not make changes</span></p> <p><strong>self-describing</strong>: a<span> database system is referred to as </span>self-describing <span>because it not only contains the database itself, but also </span>metadata<i> </i><span>which defines and describes the data and relationships</span> <span>between</span> <span>tables in the database</span></p> <p><strong>view</strong>: a subset of the database</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>How is a DBMS distinguished from a file-based system?</li> <li>What is data independence and why is it important?</li> <li>What is the purpose of managing information?</li> <li>Discuss the uses of databases in a business environment.</li> <li>What is metadata?</li> </ol> </div> <h2>Attribution</h2> <p>This chapter of <em>Database Design</em> is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a> by Nguyen Kim Anh licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Introduction</li> <li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-4-types-of-database-models"><div class="chapter-title-wrap"><h3 class="chapter-number">4</h3><h2 class="chapter-title">Chapter 4 Types of Data Models</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt &#038; Nelson Eng</h2><h2>High-level Conceptual <span style="color: #000000">Data</span> Models</h2> <p>High-level conceptual data models provide concepts for presenting data in ways that are close to the way people perceive data. A typical example is the entity relationship model, which uses main concepts like entities, attributes and relationships. An entity represents a real-world object such as an employee or a project. The entity has attributes that represent properties such as an employee’s name, address and birthdate. A relationship represents an association among entities; for example, an employee works on many projects. A relationship exists between the employee and each project.</p> <h2>Record-based Logical <span style="color: #000000">Data</span> Models</h2> <p>Record-based logical data models provide concepts users can understand but are not too far from the way data is stored in the computer. Three well-known <span style="color: #000000">data</span> models of this type are relational <span style="color: #000000">data</span> models, network data models and hierarchical data models.</p> <ul><li><span style="color: #333333">The <em>relational model</em></span> represents data as<span><em>relations</em>, or</span> tables. For example, in the membership system at Science World, each membership has many members (see Figure 2.2 in Chapter 2). The membership identifier, expiry date and address information are fields in the membership. The members are individuals such as Mickey, Minnie, Mighty, Door, Tom, King, Man and Moose. Each record is said to be an <em>instance</em> of the membership table.</li> </ul> <ul><li><span style="color: #333333">The <em>network model</em> represents data as record types. This model also represents a limited type of one to many relationship called a <em>set type</em>, as shown in Figure 4.1.</span></li> </ul> <div id="attachment_53" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Unary-Relationships-300x168.jpg"><img class="wp-image-53" alt="Diagram displaying 8 rectangular boxes and arrows crossing between them. The boxes contain labels such as EMPS and SUPPLIERS. Labels are also outside of these rectangles." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Network-data-model-300x244.jpg" height="244" width="300" /></a> <p class="wp-caption-text">Figure 4.1. Network model diagram.</p> </div> <ul><li><span style="color: #333333">The <em>hierarchical model</em> represents data <span>as</span> a hierarchical tree structure. Each <span>branch of the</span> hierarchy represents a number of related records. Figure 4.2 shows this schema in hierarchical model notation.</span></li> </ul> <div id="attachment_48" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Multivalued-Attribute-300x131.jpg"><img class="wp-image-48" alt="Diagram with labels in capitals connected by lines." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Hierarchical-Data-Model-300x116.jpg" height="116" width="300" /></a> <p class="wp-caption-text">Figure 4.2. Hierarchical model diagram.</p> </div> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>hierarchical model</strong>: <span style="color: #333333">represents data as a hierarchical tree structure</span></p> <p><strong>instance</strong>: <span>a record within a table</span></p> <p><strong>network model</strong>: <span style="color: #333333">represents data as record types</span></p> <p><strong>relation</strong>: another term for table</p> <p><strong>relational model</strong>: represents data as relations or tables</p> <p><strong>set type</strong>: <span>a limited type of one to many relationship </span></p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>What is a data model?</li> <li>What is a high-level conceptual data model?</li> <li>What is an entity? An attribute? A relationship?</li> <li>List and briefly describe the common record-based logical data models.</li> </ol> </div> <h2>Attribution</h2> <p>This chapter of <em>Database Design</em> is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a> by Nguyen Kim Anh licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Key Terms</li> <li>Exercises</li> </ol> <p>&nbsp;</p> </div></div>
<div class="chapter standard" id="chapter-5-data-modelling"><div class="chapter-title-wrap"><h3 class="chapter-number">5</h3><h2 class="chapter-title">Chapter 5 Data Modelling</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p><em>Data modelling</em> is the first step in the process of database design. This step is sometimes considered to be a high-level and abstract design phase, <span>also referred to as conceptual design</span>. The aim of this phase is to describe:</p> <ul><li>The data contained in the database (e.g., entities: students, lecturers, courses, subjects)</li> <li>The relationships between data items (e.g., students are supervised by lecturers; lecturers teach courses)</li> <li>The constraints on data (e.g., student number has exactly eight digits; a subject has four or six units of credit only)</li> </ul> <p><span>In the second step</span>, the data items, the relationships and the constraints are all expressed using the concepts provided by the high-level data model. Because these concmepts do not include the implementation details, the result of the data modelling process is a (semi) formal representation of the database structure. This result is quite easy to understand so it is used as reference to make sure that all the user’s requirements are met.</p> <p><span>The third step is database design</span>. During this step, we might have two sub-steps: one called <em>database logical design</em>, which defines a database in a data model of a specific DBMS, and another called <em>database physical design</em>, which defines the internal database storage structure, file organization or indexing techniques. These two sub-steps are database implementation and operations/user interfaces building steps.</p> <p>In the database design phases, data are represented using a certain data model. The <em>data model</em> is a collection of concepts or notations for describing data, data relationships, data semantics and data constraints. Most data models also include a set of basic operations for manipulating data in the database.</p> <h2>Degrees of Data Abstraction</h2> <p>In this section we will look at the database design process in terms of specificity. Just as any design starts at a high level and proceeds to an ever-increasing level of detail, so does database design. For example, when building a home, you start with how many bedrooms and bathrooms the home will have, whether it will be on one level or multiple levels, etc. The next step is to get an architect to design the home from a more structured perspective. This level gets more detailed with respect to actual room sizes, how the home will be wired, where the plumbing fixtures will be placed, etc. The last step is to hire a contractor to build the home. That’s looking at the design from a high level of abstraction to an increasing level of detail.</p> <p>The database design is very much like that. It starts with users identifying the business rules; then the database designers and analysts create the database design; and then the database administrator implements the design using a DBMS.</p> <p>The following subsections summarize the models in order of decreasing level of abstraction.</p> <h3>External models</h3> <ul><li>Represent the user’s view of the database</li> <li>Contain multiple different external views</li> <li>Are closely related to the real world as perceived by each user</li> </ul> <h3>Conceptual models</h3> <ul><li>Provide flexible data-structuring capabilities</li> <li>Present a &#8220;community view&#8221;: the logical structure of the entire database</li> <li><span>Contain data stored in the database</span></li> <li>Show relationships among data including: <ul><li>Constraints</li> <li>Semantic information (e.g., business rules)</li> <li>Security and integrity information</li> </ul> </li> <li>Consider a database as a collection of entities (objects) of various kinds</li> <li>Are the basis for identification and high-level description of main data objects; they avoid details</li> <li>Are database independent regardless of the database you will be using</li> </ul> <h3>Internal models</h3> <p>The three best-known models of this kind are the relational data model, the network data model and the hierarchical data model. These internal models:</p> <ul><li>Consider a database as a collection of fixed-size records</li> <li>Are closer to the physical level or file structure</li> <li>Are a representation of the database as seen by the DBMS.</li> <li>Require the designer to match the conceptual model’s characteristics and constraints to those of the selected implementation model</li> <li>Involve mapping the entities in the conceptual model to the tables in the relational model</li> </ul> <h3>Physical models</h3> <ul><li>Are the physical representation of the database</li> <li>Have the lowest level of abstractions</li> <li>Are how the data is stored; they deal with <ul><li>Run-time performance</li> <li>Storage utilization and compression</li> <li>File organization and access methods</li> <li>Data encryption</li> </ul> </li> <li>Are the physical level – managed by <span>the <em>operating system</em></span><em> (OS)</em></li> <li>Provide concepts that describe the details of how data are stored in the computer’s memory</li> </ul> <h2>Data Abstraction Layer</h2> <p>In a pictorial view, you can see how the different models work together. Let’s look at this from the highest level, the external model.</p> <p>The external model is the end user&#8217;s view of the data. Typically a database is an enterprise system that serves the needs of multiple departments. However, one department is not interested in seeing other departments’ data (e.g., the human resources (HR) department does not care to view the sales department&#8217;s data). Therefore, one user view will differ from another.</p> <p>The external model requires that the designer subdivide a set of requirements and constraints into functional modules that can be examined within the framework of their external models (e.g., human resources versus sales).</p> <p>As a data designer, you need to understand all the data so that you can build an enterprise-wide database. Based on the needs of various departments, the conceptual model is the first model created.</p> <p>At this stage, the conceptual model is independent of both software and hardware. It does not depend on the DBMS software used to implement the model. It does not depend on the hardware used in the implementation of the model. Changes in either hardware or DBMS software have no effect on the database design at the conceptual level.</p> <p>Once a DBMS is selected, you can then implement it. This is the internal model. Here you create all the tables, constraints, keys, rules, etc.  This is often referred to as the <em>logical design</em>.</p> <p>The physical model is simply the way the data is stored on disk. Each database vendor has its own way of storing the data.</p> <div id="attachment_42" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-Description-300x146.jpg"><img class="wp-image-42" alt="Three stick figures and the words &quot;End Users&quot; at the top. Under that is a yellow rectangle labelled External Model. Inside the" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Data-Abstraction-300x226.jpg" height="226" width="300" /></a> <p class="wp-caption-text">Figure 5.1. Data abstraction layers.</p> </div> <h2>Schemas</h2> <p>A <em>schema</em> is an overall description of a database, and it is usually represented by the <em>entity relationship diagram (ERD)</em>. There are many subschemas that represent external models and thus display external views of the data. Below is a list of items to consider during the design process of a database.</p> <ul><li>External schemas: there are multiple</li> <li>Multiple subschemas: these display multiple external views of the data</li> <li>Conceptual schema: there is only one. This schema includes data items, relationships and constraints, all represented in an ERD.</li> <li>Physical schema: there is only one</li> </ul> <h2>Logical and Physical Data Independence</h2> <p><em>Data independence</em> refers to the immunity of user applications to changes made in the definition and organization of data. Data abstractions expose only those items that are important or pertinent to the user. Complexity is hidden from the database user.</p> <p>Data independence and operation independence together form the feature of data abstraction. There are two types of data independence: logical and physical.</p> <h3>Logical data independence</h3> <p>A <em>logical schema </em>is a conceptual design of the database done on paper or a whiteboard, much like architectural drawings for a house. The ability to change the logical schema, without changing the <span><em>external schema</em> or user view, </span> is called <em>logical data independence</em>. For example, the addition or removal of new entities, attributes or relationships to this <em>conceptual schema</em> should be possible without having to change existing external schemas or rewrite existing application programs. <em> </em></p> <p>In other words, changes to the logical schema (e.g., alterations to the structure of the database like adding a column or other tables) should not affect the function of the application (external views).</p> <h3>Physical data independence</h3> <p><em>Physical data independence</em> refers to the immunity of the internal model to changes in the physical model. The logical schema stays unchanged even though changes are made to file organization or storage structures, storage devices or indexing strategy.</p> <p>Physical data independence deals with hiding the details of the storage structure from user applications. The applications should not be involved with these issues, since there is no difference in the operation carried out against the data.</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>conceptual model</strong>: <span>the logical structure of the entire database</span></p> <p><strong>conceptual schema</strong>: another term for logical schema</p> <p><strong>data independence</strong>: the immunity of user applications to changes made in the definition and organization of data</p> <p><strong>data model</strong>:<strong> </strong>a collection of concepts or notations for describing data, data relationships, data semantics and data constraints</p> <p><strong>data modelling</strong>: the first step in the process of database design</p> <p><strong>database logical design</strong>:  defines a database in a data model of a specific database management system</p> <p><strong>database physical design<em>:</em></strong> defines the internal database storage structure, file organization or indexing techniques</p> <p><strong>entity relationship diagram (ERD)</strong>: a data model describing the database showing tables, attributes and relationships</p> <p><strong>external model</strong>:  represents the user’s view of the database</p> <p><strong>external schema</strong>: user view</p> <p><strong>internal model:</strong> <span>a representation of the database as seen by the DBMS</span></p> <p><strong>logical data independence</strong>: the ability to change the logical schema without changing the external schema</p> <p><strong>logical design</strong>: where you create all the tables, constraints, keys, rules, etc.</p> <p><strong>logical schema</strong>: a conceptual design of the database done on paper or a whiteboard, much like architectural drawings for a house</p> <p><strong>operating system (OS)</strong>: manages the physical level of the physical model</p> <p><strong>physical data independence</strong>: the immunity of the internal model to changes in the physical model</p> <p><strong>physical model</strong>: <span>the physical representation of the database</span></p> <p><strong>schema</strong>: an overall description of a database</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Describe the purpose of a conceptual design.</li> <li>How is a conceptual design different from a logical design?</li> <li>What is an external model?</li> <li>What is a conceptual model?</li> <li>What is an internal model?</li> <li>What is a physical model?</li> <li>Which model does the database administrator work with?</li> <li>Which model does the end user work with?</li> <li>What is logical data independence?</li> <li>What is physical data independence?</li> </ol> <p>Also see <em>Appendix A: University Registration Data Model Example</em></p> </div> <h2>Attribution</h2> <p>This chapter of <em>Database Design</em> is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a> by Nguyen Kim Anh licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ul><li>Some or all of the introduction, degrees of data abstraction, data abstraction layer</li> <li>Key Terms</li> <li>Exercises</li> </ul> </div></div>
<div class="chapter standard" id="chapter-6-classification-of-database-systems"><div class="chapter-title-wrap"><h3 class="chapter-number">6</h3><h2 class="chapter-title">Chapter 6 Classification of Database Management Systems</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>Database management systems can be classified based on several criteria, such as the data model, user numbers and database distribution, all described below.</p> <h2>Classification Based on D<span style="color: #333333">ata</span> Model</h2> <p>The most popular data model in use today is the relational data model. Well-known DBMSs like Oracle, MS SQL Server, DB2 and MySQL support this model. Other traditional models, such as hierarchical data models and network data models, are still used in industry mainly on mainframe platforms. However, they are not commonly used due to their complexity. These are all referred to as <em>traditional</em> <em>models</em> because they preceded the relational model.</p> <p>In recent years, the newer <em>object-oriented data models</em> were introduced. This model is a database management system in which information is represented in the form of objects as used in object-oriented programming. Object-oriented databases are different from relational databases, which are table-oriented. Object-oriented database management systems (OODBMS) combine database capabilities with object-oriented programming language capabilities.</p> <p>The object-oriented models have not caught on as expected so are not in widespread use. Some examples of object-oriented DBMSs are O2, ObjectStore and Jasmine.</p> <h2>Classification Based on User Numbers</h2> <p>A DBMS can be classification based on the number of users it supports. It can be a <em>single-user database system</em>, which supports one user at a time, or a <em>multiuser database system</em>, which supports multiple users concurrently.</p> <h2>Classification Based on Database Distribution</h2> <p><span style="color: #ff0000"><span style="color: #333333">There are four main distribution systems for database systems and these, in turn, can be used to classify the DBMS.</span> </span></p> <h3>Centralized systems</h3> <p>With a <em>centralized database system</em>, the DBMS and database are stored at a single site that is used by several other systems too. This is illustrated in Figure 6.1.</p> <div id="attachment_41" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177.jpg"><img width="300" height="174" class="wp-image-41" alt="Diagram showing one large computer monitor and four small ones labelled Workstations or Terminals, with arrows between them. There is also a computer tower labelled Central Computer." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Centralized-Systems-300x174.jpg" /></a> <p class="wp-caption-text">Figure 6.1. Example of a centralized database system.</p> </div> <p>In the early 1980s, many Canadian libraries used the GEAC 8000 to convert their manual card catalogues to machine-readable centralized catalogue systems. Each book catalogue had a barcode field similar to those on supermarket products.</p> <h3>Distributed database system</h3> <p><span style="color: #333333">In a <em>distributed database system</em>, the actual database and the DBMS software are distributed from various sites that are connected by a computer network, as shown in Figure 6.2.</span></p> <div id="attachment_45" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/EntitySet-300x86.jpg"><img width="300" height="217" class="wp-image-45" alt="Diagram showing three circles, separately labelled Site 1-3, and each containing several computer monitors and a computer tower. A line connects each of these to a central oval marked Computer Network." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Distributed-Systems-300x217.jpg" /></a> <p class="wp-caption-text">Figure 6.2. Example of a distributed database system.</p> </div> <h3>Homogeneous distributed database systems</h3> <p><em>Homogeneous distributed database systems</em> use the same DBMS software from multiple sites. Data exchange between these various sites can be handled easily. For example, library information systems by the same vendor, such as Geac Computer Corporation, use the same DBMS software which allows easy data exchange between the various Geac library sites.</p> <h3>Heterogeneous distributed database systems</h3> <p><span style="color: #333333">In a <em>heterogeneous distributed database system</em>, different sites might use different DBMS software, but there is additional common software to support data exchange between these sites. For example, the various library database systems use the same machine-readable cataloguing (MARC) format to support library record data exchange.</span></p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong><span style="color: #000000">centralized database system: </span></strong><span style="color: #333333">the DBMS and database are stored at a single site that is used by several other systems too</span></p> <p><strong>distributed database system</strong>: <span style="color: #333333">the actual database and the DBMS software are distributed from various sites that are connected by a computer network</span></p> <p><strong>heterogeneous distributed database system</strong>: <span style="color: #333333">different sites might use different DBMS software, but there is additional common software to support data exchange between these sites</span></p> <p><strong>homogeneous distributed database systems</strong>: use the same DBMS software at multiple sites</p> <p><strong>multiuser database system</strong>: a database management system which supports multiple users concurrently</p> <p><strong>object-oriented data model</strong>: a database management system in which information is represented in the form of objects as used in object-oriented programming</p> <p><strong>single-user database system</strong>: a database management system which supports one user at a time</p> <p><strong>traditional models</strong>: data models that preceded the relational model</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Provide three examples of the most popular relational databases used.</li> <li>What is the difference between centralized and distributed database systems?</li> <li>What is the difference between homogenous distributed database systems and heterogeneous distributed database systems?</li> </ol> </div> <h2>Attribution</h2> <p>This chapter of <em>Database Design</em> (including images, except as otherwise noted) is a derivative copy of <a href="http://cnx.org/contents/b57b8760-6898-469d-a0f7-06e0537f6817@1">Database System Concepts</a> by Nguyen Kim Anh licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-7-the-relational-data-model"><div class="chapter-title-wrap"><h3 class="chapter-number">7</h3><h2 class="chapter-title">Chapter 7 The Relational Data Model</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>The relational data model was introduced by C. F. Codd in 1970. Currently, it is the most widely used data model.</p> <p>The relational model has provided the basis for:</p> <ul><li>Research on the theory of data/relationship/constraint</li> <li>Numerous database design methodologies</li> <li>The standard database access language called s<em>tructured query language (SQL)</em></li> <li>Almost all modern commercial database management systems</li> </ul> <p>The relational data model describes the world as &#8220;a collection of inter-related relations (or tables).&#8221;</p> <h2>Fundamental Concepts in the Relational Data Model</h2> <h3>Relation</h3> <p>A <em>relation, </em>also known as a <em>table</em> or <em>file</em>, is a subset of the Cartesian product of a list of domains characterized by a name. And within a table, each row represents a group of related data values. A <em>row</em>, or record, is also known as a <em>tuple</em>. The columns in a table is a field and is also referred to as an attribute. You can also think of it this way: an attribute is used to define the record and a record contains a set of attributes.</p> <p>The steps below outline the logic between a relation and its domains.</p> <ol><li>Given<em> n</em> domains are denoted by D1, D2, … Dn</li> <li>And<em> r</em> is a relation defined on these domains</li> <li>Then  r ⊆ D1×D2×…×Dn</li> </ol> <h3>Table</h3> <p>A database is composed of multiple tables and each<em> </em>table holds the data. Figure 7.1 shows a database that contains three tables.</p> <div id="attachment_29" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Banking-Systems-RDBMS-300x195.jpg"><img width="300" height="221" class="wp-image-29" alt="Blue cylinder with three white rectangles each with a list of words." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/School-Database-Fig-1-300x221.jpg" /></a> <p class="wp-caption-text">Figure 7.1. Database with three tables.</p> </div> <h3>Column</h3> <p>A database stores pieces of information or facts in an organized way. Understanding how to use and get the most out of databases requires us to understand that method of organization.</p> <p>The principal storage units are called <em>columns</em> or <em>fields</em> or <em>attributes</em>. These house the basic components of data into which your content can be broken down. When deciding which fields to create, you need to think generically about your information, for example, drawing out the common components of the information that you will store in the database and avoiding the specifics that distinguish one item from another.</p> <p>Look at the example of an ID card in Figure 7.2 to see the relationship between fields and their data.</p> <div style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177.jpg"><img width="300" height="177" class="wp-image-41 size-full" alt="Record-300x177" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177-65x38.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Record-300x177-225x132.jpg 225w" /></a> <p class="wp-caption-text">Figure 7.2. Example of an ID card by A. Watt.</p> </div> <h3>Domain</h3> <p>A <em>domain</em> is the original sets of atomic values used to model data. By <em>atomic value</em>, we mean that each value in the domain is indivisible as far as the relational model is concerned. For example:</p> <ul><li>The domain of Marital Status has a set of possibilities: Married, Single, Divorced.</li> <li>The domain of Shift has the set of all possible days: {Mon, Tue, Wed…}.</li> <li>The domain of Salary is the set of all floating-point numbers greater than 0 and less than 200,000.</li> <li>The domain of First Name is the set of character strings that represents names of people.</li> </ul> <p>In summary, a domain is a set of acceptable values that a column is allowed to contain. This is based on various properties and the data type for the column. We will discuss data types in another chapter.</p> <h3>Records</h3> <p>Just as the content of any one document or item needs to be broken down into its constituent bits of data for storage in the fields, the link between them also needs to be available so that they can be reconstituted into their whole form. Records allow us to do this. <em>Records</em> contain fields that are related, such as a customer or an employee. As noted earlier, a tuple is another term used for record.</p> <p>Records and fields form the basis of all databases. A simple table  gives us the clearest picture of how records and fields work together in a database storage project.</p> <div style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/RDBMS-300x2091.jpg"><img width="300" height="146" class="wp-image-136" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-Description-300x146.jpg" alt="image" /></a> <p class="wp-caption-text">Figure 7.3. Example of a simple table by A. Watt.</p> </div> <p>The <span style="color: #333333">simple table</span> example in Figure 7.3 shows us how fields can hold a range of different sorts of data. This one has:</p> <ul><li><span>A Record ID field: this is an ordinal number; its data type is an integer. </span></li> <li><span>A PubDate field: this is displayed as day/month/year; its data type is date. </span></li> <li><span>An Author field: this is displayed as Initial. Surname; its data type is text. </span></li> <li><span>A Title field text: free text can be entered here.</span></li> </ul> <p><span>You can command the database to sift through its data and organize it in a particular way. For example, you can request that a selection of records be limited by date: 1. all before a given date, 2. all after a given date or 3. all between two given dates. Similarly, you can choose to have records sorted by date. Because the field, or record, containing the data is set up as a Date field, the database reads the information in the Date field not just as numbers separated by slashes, but rather, as dates that must be ordered according to a calendar system. </span></p> <h3>Degree</h3> <p>The <em>degree</em> is the number of attributes in a table. In our example in Figure 7.3, the degree is 4.</p> <h2>Properties of a Table</h2> <ul><li>A table has a name that is distinct from all other tables in the database.</li> <li>There are no duplicate rows; each row is distinct.</li> <li>Entries in columns are atomic. The table<span style="color: #333333"> does </span>not contain repeating groups or multivalued attributes.</li> <li>Entries from columns are from the same domain based on their data type <span>including</span>: <ul><li>number (numeric, integer, float, smallint,…)</li> <li>character (string)</li> <li>date</li> <li>logical (true or false)</li> </ul> </li> <li>Operations combining different data types are disallowed.</li> <li>Each attribute has a distinct name.</li> <li>The sequence of columns is insignificant.</li> <li>The sequence of rows is insignificant.</li> </ul> <p>&nbsp;</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>atomic value</strong>: each value in the domain is indivisible as far as the relational model is concerned</p> <p><strong>attribute</strong>: <span>principle storage unit in a database</span></p> <p><strong>column: </strong>see <em>attribute</em></p> <p><strong>degree</strong>: number of attributes in a table</p> <p><strong>domain</strong>: the original sets of atomic values used to model data; a set of acceptable values that a column is allowed to contain</p> <p><strong>field</strong>: see <em>attribute</em></p> <p><strong>file</strong>:<strong><em> </em></strong>see <em>relation</em></p> <p><strong>record</strong>: contains fields that are related; <em>see tuple</em></p> <p><strong>relation</strong>: a subset of the Cartesian product of a list of domains characterized by a name; the technical term for table or file</p> <p><strong>row</strong>: <em>see tuple</em></p> <p><strong>structured query language (SQL)</strong>: the standard database access language</p> <p><strong>table:</strong><span><em> </em>see <em>relation</em></span></p> <p><strong>tuple</strong>: a technical term for row or record</p> <h4>Terminology Key</h4> <p>Several of the terms used in this chapter are synonymous. In addition to the Key Terms above, please refer to Table 7.1 below. The terms in the Alternative 1 column are most commonly used.</p> <div id="attachment_43" style="width: 298px" class="wp-caption alignnone"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Terms.jpg"><img width="288" height="110" class="wp-image-43 size-full" alt="A database table with words." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Terms.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Terms.jpg 288w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Terms-65x24.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Terms-225x85.jpg 225w" /></a> <p class="wp-caption-text">Table 7.1. Terms and their synonyms by A. Watt.</p> </div> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <p><em>Use Table 7.2 to answer questions 1-4.</em></p> <ol><li>Using correct terminology, identify and describe all the components  in Table 7.2.</li> <li>What is the possible domain for field EmpJobCode?</li> <li>How many records are shown?</li> <li>How many attributes are shown?</li> <li>List the properties of a table.</li> </ol> <div id="attachment_249" style="width: 610px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554.jpg"><img width="600" height="112" class="wp-image-249" alt="Table with 5 columns and 5 rows." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554.jpg 1206w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554-300x56.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554-1024x191.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554-65x12.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554-225x42.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch7-Exercises-Fig7-1-e1409190387554-350x65.jpg 350w" /></a> <p class="wp-caption-text">Table 7.2. Table for exercise questions, by A. Watt.</p> </div> </div> <h2> Attribution</h2> <p><span style="color: #1f1f1d">This chapter of </span><em style="color: #1f1f1d">Database Design</em> <span style="color: #1f1f1d">(including images, except as otherwise noted) is a derivative copy of <a href="http://cnx.org/contents/e5ac0441-0e54-4895-9112-fb3a4ee9bce1@1">Relational Design Theory</a></span><span style="color: #1f1f1d"> by</span> Nguyen Kim Anh<span style="color: #1f1f1d"> licensed under </span><a style="color: #870d0d" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>All or part of the sections on relations, tables, columns and degree</li> <li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-8-entity-relationship-model"><div class="chapter-title-wrap"><h3 class="chapter-number">8</h3><h2 class="chapter-title">Chapter 8 The Entity Relationship Data Model</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>The <em>entity relationship (ER) data model</em> has existed for over 35 years. It is well suited to data modelling for use with databases because it is fairly abstract and is easy to discuss and explain. ER models are readily translated to relations. ER models, <span>also called an ER schema</span>, are represented by ER diagrams.</p> <p>ER modelling is based on two concepts:</p> <ul><li>Entities<em>,</em> defined as tables that hold specific information (data)</li> <li><em>Relationships,</em> defined as the associations or interactions between entities</li> </ul> <p><span>Here is an example of how these two concepts might be combined in an ER data model: </span><span style="color: #0000ff">Prof. Ba (entity)</span> <span style="color: #339966">teaches (relationship)</span> <span style="color: #0000ff">the Database Systems course (entity)</span>.</p> <p>For the rest of this chapter, we will use a sample database called the COMPANY database to illustrate the concepts of the ER model. This database contains information about employees, departments and projects. Important points to note include:</p> <ul><li>There are several departments in the company. Each department has a unique identification, a name, location of the office and a particular employee who manages the department.</li> <li>A department controls a number of projects, each of which has a unique name, a unique number and a budget.</li> <li>Each employee has a name, identification number, address, salary and birthdate. An employee is assigned to one department but can join in several projects. We need to record the start date of the employee in each project. We also need to know the direct supervisor of each employee.</li> <li>We want to keep track of the dependents for each employee. Each dependent has a name, birthdate and relationship with the employee.</li> </ul> <h2>Entity, Entity Set and Entity Type</h2> <p>An <em>entity</em> is an object in the real world with an independent existence that can be differentiated from other objects. An entity might be</p> <ul><li>An object with physical existence (e.g., a lecturer, a student, a car)</li> <li>An object with conceptual existence (e.g., a course, a job, a position)</li> </ul> <p>Entities can be classified based on their strength. An entity is considered weak if its tables are existence dependent.</p> <ul><li><span>That is, it cannot exist without a relationship with another entity</span></li> <li><span>Its primary key is derived from the primary key of the parent entity</span> <ul><li><span>The Spouse table, in the COMPANY database, is a weak entity because its primary key is dependent on the Employee table. Without a corresponding employee record, the spouse record would not exist.</span></li> </ul> </li> </ul> <p><span>An entity is considered strong if it can exist apart from all of its related entities.</span></p> <ul><li><span>Kernels are strong entities.</span></li> <li><span>A table without a foreign key or a table that contains a foreign key that can contain nulls is a strong entity</span></li> </ul> <p>Another term to know is <em>entity type</em> which defines a collection of similar entities.</p> <p>An <em>entity set</em> is a collection of entities of an entity type at a particular point of time. In an entity relationship diagram (ERD), an entity type is represented by a name in a box. For example, in Figure 8.1, the entity type is EMPLOYEE.</p> <div id="attachment_46" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Attributes-300x106.jpg"><img width="300" height="106" class="wp-image-46" alt="A yellow rectangle with e1, e2 and en inside. There is an arrow from the yellow box to a blue rectangle with the work EMPLOYEE in capitals. Over the arrow are the words Represent in ER diagram. To the far left it says Entity set." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/EntitySet-300x86.jpg" /></a> <p class="wp-caption-text">Figure 8.1. ERD with entity type EMPLOYEE.</p> </div> <h3>Existence dependency</h3> <p>An entity’s existence is dependent on the existence of the related entity. It is existence-dependent if it has a mandatory foreign key (i.e., a foreign key attribute that cannot be null). For example, in the COMPANY database, a Spouse entity is existence -dependent on the Employee entity.</p> <h2>Kinds of Entities</h2> <p>You should also be familiar with different kinds of entities including independent entities, dependent entities and characteristic entities. These are described below.</p> <h3>Independent entities</h3> <p><em>Independent entities</em>, also referred to as kernels, are the backbone of the database. They are what other tables are based on. <em>Kernels</em> have the following characteristics:</p> <ul><li>They are the building blocks of a database.</li> <li>The primary key may be simple or composite.</li> <li>The primary key is not a foreign key.</li> <li>They do not depend on another entity for their existence.</li> </ul> <p><span>If we refer back to our COMPANY database, examples of an independent entity include the Customer table, Employee table or Product table.</span></p> <h3>Dependent entities</h3> <p><em>Dependent entities</em>, also referred to as <em>derived entities</em>, depend on other tables for their meaning. These entities have the following characteristics:</p> <ul><li>Dependent entities are used to connect two kernels together.</li> <li>They are said to be existence dependent on two or more tables.</li> <li>Many to many relationships become associative tables with at least two foreign keys.</li> <li>They may contain other attributes.</li> <li>The foreign key identifies each associated table.</li> <li>There are three options for the primary key: <ol><li>Use a composite of foreign keys of associated tables if unique</li> <li>Use a composite of foreign keys and a qualifying column</li> <li>Create a new simple primary key</li> </ol> </li> </ul> <h3>Characteristic entities</h3> <p><em>Characteristic entities</em> provide more information about another table. These entities have the following characteristics:</p> <ul><li>They represent multivalued attributes.</li> <li>They describe other entities.</li> <li>They typically have a one to many relationship.</li> <li>The foreign key is used to further identify the characterized table.</li> <li>Options for primary key are as follows: <ol><li>Use a composite of foreign key plus a qualifying column</li> <li>Create a new simple primary key. <span>In the COMPANY database, these might include:</span> <ul><li>Employee (<span style="text-decoration: underline">EID,</span> Name, Address, Age, Salary) &#8211; EID is the simple primary key.</li> <li>EmployeePhone (<span style="text-decoration: underline">EID, Phone</span>) &#8211; EID is part of a composite primary key. Here, EID is also a foreign key.</li> </ul> </li> </ol> </li> </ul> <h2>Attributes</h2> <p>Each entity is described by a set of attributes (e.g., Employee = (Name, Address, <span>Birthdate (Age)</span>, Salary).</p> <p><span>Each attribute has a name, and is associated with an entity and a domain of legal values.</span> However, the information about attribute domain is not presented on the ERD.</p> <p>In the entity relationship diagram, shown in Figure 8.2, each attribute is represented by an oval with a name inside.</p> <div id="attachment_38" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Distributed-Systems-300x217.jpg"><img width="300" height="106" class="wp-image-38" alt="One blue rectangle with the word EMPLOYEE. This is connected with a line to four separate yellow ovals. Each has a different word inside it: Name, Address, Birthdate, Salary." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Attributes-300x106.jpg" /></a> <p class="wp-caption-text">Figure 8.2. How attributes are represented in an ERD.</p> </div> <h2>Types of Attributes</h2> <p>There are a few types of attributes you need to be familiar with. Some of these are to be left as is, but some need to be adjusted to facilitate representation in the relational model. This first section will discuss the types of attributes. Later on we will discuss fixing the attributes to fit correctly into the relational model.</p> <h3>Simple attributes</h3> <p><em>Simple attributes</em> are those drawn from the atomic value domains; they are also called <em>single-valued attributes</em>. In the COMPANY database, an example of this would be: Name = {John} ; Age = {23}</p> <h3>Composite attributes</h3> <p><em>Composite attributes</em> are those that consist of a hierarchy of attributes. <span style="color: #ff0000"><span style="color: #333333">Using our database example, and shown in Figure 8.3, Address may consist of Number, Street and Suburb. So this would be written as → Address = {59 + ‘Meek Street’ + ‘Kingsford’}</span></span></p> <div id="attachment_32" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Network-data-model-300x244.jpg"><img width="300" height="133" class="wp-image-32" alt="Blue rectangle with the word EMPLOYEE. Under this are four yellow ovals with the words Name, Address, Birthdate, Salary. There are lines between the rectangle and yellow ovals. Under the Address oval are three white ovals with the words Number, Street, Suburb." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Simple-and-Composite-Attributes-300x133.jpg" /></a> <p class="wp-caption-text">Figure 8.3. An example of composite attributes.</p> </div> <h3>Multivalued attributes</h3> <p><em>Multivalued attributes</em> are attributes that have a set of values for each entity. An example of a multivalued attribute from the COMPANY database, as seen in Figure 8.4, are the degrees of an employee: BSc, MIT, PhD.</p> <div id="attachment_52" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Many-to-Many-Relationships-300x167.jpg"><img width="300" height="131" class="wp-image-52" alt="Blue rectangle with the word EMPLOYEE. A line connects this to each of five yellow ovals with these words inside the ovals: Degrees, Name, Address, Birthdate, Salary" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Multivalued-Attribute-300x131.jpg" /></a> <p class="wp-caption-text">Figure 8.4. Example of a multivalued attribute.</p> </div> <h3>Derived attributes</h3> <p><em>Derived attributes</em> are attributes that contain values calculated from other attributes. An example of this can be seen in Figure 8.5.  Age can be derived from the attribute <span>Birthdate.</span> In this situation,<span> Birthdate is </span>called a <em>stored attribute, </em>which is physically saved to the database.</p> <div id="attachment_49" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Derived-Attribute-300x154.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Derived-Attribute-300x154.jpg" alt="Blue rectangle with the word EMPLOYEE, and connected by a line to five different yellow ovals with the words: Age, Name, Address, Birthdate, Salary." width="300" height="154" class="wp-image-49 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Derived-Attribute-300x154.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Derived-Attribute-300x154-65x33.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Derived-Attribute-300x154-225x115.jpg 225w" /></a> <p class="wp-caption-text">Figure 8.5. Example of a derived attribute.</p> </div> <h2>Keys</h2> <p>An important constraint on an entity is the key. The <em>key</em> is an attribute or a group of attributes whose values can be used to uniquely identify an individual entity in an entity set.</p> <h2>Types of Keys</h2> <p>There are several types of keys. These are described below.</p> <h3>Candidate key</h3> <p>A <em>candidate key</em> is a simple or composite key that is unique and minimal.  It is unique because no two rows in a table may have the same value at any time. It is minimal because every column is necessary in order to attain uniqueness.</p> <p>From our COMPANY database example, <span>if the entity is</span> <strong>Employee</strong>(EID, First Name, Last Name, <em>SIN</em>, Address, Phone, BirthDate, Salary, DepartmentID), possible candidate keys are:</p> <ul><li>EID, SIN</li> <li>First Name and Last Name – assuming there is no one else in the company with the same name</li> <li>Last Name and DepartmentID – assuming two people with the same last name don’t work in the same department</li> </ul> <h3>Composite key</h3> <p>A <em>composite key</em> is composed of two or more attributes, but it must be minimal.</p> <p>Using the example from the candidate key section, possible composite keys are:</p> <ul><li>First Name and Last Name – assuming there is no one else in the company with the same name</li> <li>Last Name and Department ID – assuming two people with the same last name don’t work in the same department</li> </ul> <h3>Primary key</h3> <p><span style="color: #333333">The primary key is a candidate key that is selected by the database designer to be used as an identifying mechanism for the whole entity set. It must uniquely identify tuples in a table and not be null. The primary key is indicated in the ER model by underlining the attribute.</span></p> <ul><li><span style="color: #333333">A candidate key is selected by the design</span>er to uniquely identify tuples in a table. It must not be null.</li> <li>A key is chosen by the database designer to be used as an identifying mechanism for the whole entity set.  This is referred to as the primary key. This key is indicated by underlining the attribute in the ER model.</li> </ul> <p>In the following example, EID is the primary key:</p> <p><strong>Employee</strong>(<span style="text-decoration: underline;color: #333333"><span style="text-decoration: underline">EID</span></span>, First Name, Last Name, SIN, Address, Phone, BirthDate, Salary, DepartmentID)</p> <h3>Secondary key</h3> <p>A <em>secondary key</em> is an attribute used strictly for retrieval purposes (can be composite), for example: Phone and Last Name.</p> <h3>Alternate key</h3> <p><em>Alternate keys</em> are all candidate keys not chosen as the primary key.</p> <h3>Foreign key</h3> <p>A <em>foreign key (FK)</em> is an attribute in a table that references the primary key in another table OR it can be null. Both foreign and primary keys must be of the same data type.</p> <p>In the COMPANY database example below, DepartmentID is the foreign key:</p> <p><strong>Employee</strong>(EID, First Name, Last Name, SIN, Address, Phone, BirthDate, Salary, DepartmentID)</p> <h2>Nulls</h2> <p>A <em>null</em> is a special symbol, independent of data type, which means either unknown or inapplicable. It does not mean zero or blank. Features of null include:</p> <ul><li>No data entry</li> <li>Not permitted in the primary key</li> <li>Should be avoided in other attributes</li> <li>Can represent <ul><li>An unknown attribute value</li> <li>A known, but missing, attribute value</li> <li>A “not applicable” condition</li> </ul> </li> <li>Can create problems when functions such as COUNT, AVERAGE and SUM are used</li> <li>Can create logical problems when relational tables are linked</li> </ul> <p>NOTE: The result of a comparison operation is null when either argument is null. The result of an arithmetic operation is null when either argument is null (except functions that ignore nulls).</p> <h3>Example of how null can be used</h3> <p>Use the Salary table (Salary_tbl) in Figure 8.6 to follow an example of how null can be used.</p> <div id="attachment_50" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SalaryTable-300x132.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SalaryTable-300x132.jpg" alt="SalaryTable-300x132" width="300" height="132" class="wp-image-50 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SalaryTable-300x132.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SalaryTable-300x132-65x28.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SalaryTable-300x132-225x99.jpg 225w" /></a> <p class="wp-caption-text">Figure 8.6. Salary table for null example, by A. Watt.</p> </div> <p>To begin, find all employees (emp#) in Sales (under the jobName column) whose salary plus commission are greater than 30,000.</p> <ul><li>SELECT emp# FROM Salary_tbl</li> <li>WHERE  jobName = Sales AND</li> <li>(commission + salary) &gt; 30,000  –&gt; E10 and E12</li> </ul> <p>This result does not include E13 because of the null value in  the commission column. To ensure that the row with the null value is included, we need to look at the individual fields. By adding commission and salary for employee E13, the result will be a null value. The solution is shown below.</p> <ul><li>SELECT emp# FROM Salary_tbl</li> <li>WHERE jobName = Sales AND</li> <li>(commission &gt; 30000 OR</li> <li>salary &gt; 30000 OR</li> <li>(commission + salary) &gt; 30,000  –&gt;E10 and E12 and E13</li> </ul> <h2>Relationships</h2> <p><em>Relationships</em> are the glue that holds the tables together. They are used to connect related information <span>between </span>tables.</p> <p><em>Relationship strength</em> is based on how the primary key of a related entity is defined. A weak, or non-identifying, relationship exists if the primary key of the related entity does not contain a primary key component of the parent entity. Company database examples include:</p> <ul><li><span>Customer(<strong><span style="text-decoration: underline">CustID</span></strong>, CustName)</span></li> <li><span>Order(<strong><span style="text-decoration: underline">OrderID</span></strong>, CustID, Date)</span></li> </ul> <p><span>A strong, or identifying, relationship exists when the primary key of the related entity contains the primary key component of the parent entity. Examples include:</span></p> <ul><li><span>Course(<strong><span style="text-decoration: underline">CrsCode</span></strong>, DeptCode, Description)</span></li> <li><span>Class(<strong><span style="text-decoration: underline">CrsCode, Section</span></strong>, ClassTime…)</span></li> </ul> <h2>Types of Relationships</h2> <p>Below are descriptions of the various types of relationships.</p> <h3><span>One to many </span>(1:M) relationship</h3> <p><span style="color: #ff0000"><span style="color: #333333">A one to many (1:M) relationship should be the norm in any relational database design and is found in all relational database environments. For example, one department has many employees. Figure 8.7 shows the relationship of one of these employees to the department.</span></span></p> <div id="attachment_26" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/FileBased-300x170.jpg"><img width="300" height="137" class="wp-image-26" alt="A light blue diamond in the middle connected on either side to a blue rectangle. The rectangle on the left says EMPLOYEE and is connected with a line to five yellow ovals with the words Birthdate, Name, Address, Salary, EID. The diamond is also connected to a blue rectangle on its right with the word DEPARTMENT and that is connected with lines to three yellow ovals with the words Name, Office, DeptID." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/One-to-Many-Relationships-300x137.jpg" /></a> <p class="wp-caption-text">Figure 8.7. Example of a one to many relationship.</p> </div> <h3><span>One to one</span> (1:1) relationship</h3> <p>A one to one (1:1) relationship is the relationship of one entity to only one other entity, and vice versa. It should be rare in any relational database design. In fact, it could indicate that two entities actually belong in the same table.</p> <p>An example from the COMPANY database is one employee is associated with one spouse, and one spouse is associated with one employee.</p> <h3><span>Many to many </span>(M:N) relationships</h3> <p><span>For a many to many relationship, consider the following points:</span></p> <ul><li>It cannot be implemented as such in the relational model.</li> <li>It can be changed into two 1:M relationships.</li> <li>It can be implemented by breaking up to produce a set of 1:M relationships.</li> <li><span>It involves the</span> implementation of a composite entity.</li> <li>Creates two or more 1:M relationships.</li> <li>The composite entity table must contain at least the primary keys of the original tables.</li> <li>The linking table contains multiple occurrences of the foreign key values.</li> <li>Additional attributes may be assigned as needed.</li> <li>It can avoid problems inherent in an M:N relationship by creating a composite entity or bridge entity. For example, an employee can work on many projects OR a project can have many employees working on it, depending on the business rules. Or, a student can have many classes and a class can hold many students.</li> </ul> <p>Figure 8.8 shows another another aspect of the M:N relationship where an employee has different start dates for different projects<span style="color: #000000">. Therefore, we need a JOIN table that contains the EID, Code and StartDate.</span></p> <div id="attachment_51" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/One-to-Many-Relationships-300x137.jpg"><img width="300" height="167" class="wp-image-51" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Many-to-Many-Relationships-300x167.jpg" alt="image" /></a> <p class="wp-caption-text">Figure 8.8. Example where employee has different start dates for different projects.</p> </div> <p><span style="color: #333333"><strong>Example of mapping an M:N binary relationship type</strong></span></p> <ul><li>For each M:N binary relationship, identify two relations.</li> <li>A and B represent two entity types participating in R.</li> <li>Create a new relation S to represent R.</li> <li><span style="color: #333333">S needs to contain the PKs of A and B. These together can be the PK in the S table OR these together with another simple attribute in the new table R can be the PK. </span></li> <li>The combination of the primary keys (A and B) will make the primary key of S.</li> </ul> <h3>Unary relationship (recursive)</h3> <p>A <em>unary relationship, </em>also called <em>recursive, </em> is one in which a relationship exists between occurrences of the same entity set. In this relationship, the primary and foreign keys are the same, but they represent two entities with different roles. See Figure 8.9 for an example.</p> <p><span style="color: #333333">For some entities in a unary relationship</span>, a separate column can be created that refers to the primary key of the same entity set.</p> <div id="attachment_35" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Data-Abstraction-300x226.jpg"><img width="300" height="168" class="wp-image-35" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Unary-Relationships-300x168.jpg" alt="image" /></a> <p class="wp-caption-text">Figure 8.9. Example of a unary relationship.</p> </div> <h3>Ternary Relationships</h3> <p><span style="color: #333333">A <em>ternary relationship</em> is a relationship type that involves many to many relationships between three tables. </span></p> <p>Refer to Figure 8.10 for an example of mapping a ternary relationship type. Note <em>n-ary</em> means multiple tables in a relationship. (Remember, N = many.)</p> <ul><li>For each n-ary (&gt; 2) relationship, create a new relation to represent the relationship.</li> <li>The primary key of the new relation is a combination of the primary keys of the participating entities that hold the N (many) side.</li> <li>In most cases of an n-ary relationship, all the participating entities hold a <strong>many</strong> side.</li> </ul> <div id="attachment_54" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ternary-Mapping-Relationships-300x197.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ternary-Mapping-Relationships-300x197.jpg" alt="Ternary-Mapping-Relationships-300x197" width="300" height="197" class="wp-image-54 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ternary-Mapping-Relationships-300x197.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ternary-Mapping-Relationships-300x197-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ternary-Mapping-Relationships-300x197-225x147.jpg 225w" /></a> <p class="wp-caption-text">Figure 8.10. Example of a ternary relationship.</p> </div> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>alternate key</strong>: all candidate keys not chosen as the primary key</p> <p><strong>candidate key</strong>: a simple or composite key that is unique (no two rows in a table may have the same value) and minimal (every column is necessary)</p> <p><strong>characteristic entities</strong>: entities that provide more information about another table</p> <p><strong>composite attributes</strong>: attributes that consist of a hierarchy of attributes</p> <p><strong>composite key</strong>: composed of two or more attributes, but it must be minimal</p> <p><strong>dependent entities</strong>: these entities depend on other tables for their meaning</p> <p><strong>derived attributes</strong>: attributes that contain values calculated from other attributes</p> <p><strong>derived entities</strong>: see <em>dependent entities</em></p> <p><strong>EID</strong>: <span style="color: #333333">employee identification (ID)</span></p> <p><strong>entity</strong>: a thing or object in the real world with an independent existence that can be differentiated from other objects</p> <p><strong>entity relationship (ER) data model</strong>: <span>also called an ER schema</span><span>, are represented by ER diagrams. These are well suited to data modelling for use with databases.</span></p> <p><strong>entity relationship schema</strong><span style="color: #000000">: see <em>entity relationship data model</em></span></p> <p><strong>entity set</strong>:<strong> </strong>a collection of entities of an entity type at a point of time</p> <p><strong>entity type</strong>: a collection of similar entities</p> <p><strong>foreign key (FK)</strong>: an attribute in a table that references the primary key in another table <span>OR it can be null</span></p> <p><strong>independent entity</strong>: as the building blocks of a database, these entities are what other tables are based on</p> <p><strong>kernel</strong>: see <em>independent entity</em></p> <p><strong>key</strong>: an attribute or group of attributes whose values can be used to uniquely identify an individual entity in an entity set</p> <p><strong>multivalued attributes</strong>: attributes that have a set of values for each entity</p> <p><strong>n-ary</strong>: multiple tables in a relationship</p> <p><strong>null</strong>: a special symbol, independent of data type, which means either unknown or inapplicable; it does not mean zero or blank</p> <p><strong>recursive relationship</strong>: see <em>unary relationship</em></p> <p><strong>relationships</strong>: the associations or interactions between entities; used to connect related information between tables</p> <p><strong>relationship strength</strong>:  based on how the primary key of a related entity is defined</p> <p><strong>secondary key</strong><span> an attribute used strictly for retrieval purposes </span></p> <p><strong>simple attributes</strong>: drawn from the atomic value domains</p> <p><strong>SIN</strong>: social insurance number</p> <p><strong>single-valued attributes</strong>: see <em>simple attributes</em></p> <p><strong>stored attribute</strong>: saved physically to the database</p> <p><strong>ternary relationship</strong>: a relationship type that involves many to many relationships between three tables.</p> <p><strong>unary relationship</strong>: one in which a relationship exists between occurrences of the same entity set.</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>What two concepts are ER modelling based on?</li> <li>The database in Figure 8.11 is composed of two tables. Use this figure to answer questions 2.1 to 2.5. <div id="attachment_251" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109.jpg"><img width="400" height="286" class="wp-image-251" alt="Ch8-Exercises -Fig8-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109.jpg 861w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109-300x214.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109-65x46.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109-225x160.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-1-e1409188616109-350x250.jpg 350w" /></a> <p class="wp-caption-text">Figure 8.11. Director and Play tables for question 2, by A. Watt.</p> </div> <ol><li>Identify the primary key for each table.</li> <li>Identify the foreign key in the PLAY table.</li> <li>Identify the candidate keys in both tables.</li> <li>Draw the ER model.</li> <li>Does the PLAY table exhibit referential integrity? Why or why not?</li> </ol> </li> <li>Define the following terms (you may need to use the Internet for some of these):<br /> schema<br /> host language<br /> data sublanguage<br /> data definition language<br /> unary relation<br /> foreign key<br /> virtual relation<br /> connectivity<br /> composite key<br /> linking table</li> <li>The RRE Trucking Company database includes the three tables  in Figure 8.12. Use Figure 8.12 to answer questions 4.1 to 4.5. <div id="attachment_252" style="width: 460px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961.jpg"><img width="450" height="230" class="wp-image-252" alt="Ch8-Exercises -Fig8-2" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961.jpg 1207w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961-300x153.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961-1024x524.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961-65x33.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961-225x115.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-2-e1409189722961-350x179.jpg 350w" /></a> <p class="wp-caption-text">Figure 8.12. Truck, Base and Type tables for question 4, by A. Watt.</p> </div> <ol><li>Identify the primary and foreign key(s) for each table.</li> <li>Does the TRUCK table exhibit entity and referential integrity? Why or why not? Explain your answer.</li> <li>What kind of relationship exists between the TRUCK and BASE tables?</li> <li>How many entities does the TRUCK table contain ?</li> <li>Identify the TRUCK table candidate key(s). <div id="attachment_253" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204.jpg"><img width="400" height="259" class="wp-image-253" alt="Ch8-Exercises -Fig8-3" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204.jpg 895w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204-300x194.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204-225x145.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-Fig8-3-e1409189789204-350x226.jpg 350w" /></a> <p class="wp-caption-text">Figure 8.13. Customer and BookOrders tables for question 5, by A. Watt.</p> </div> </li> </ol> </li> <li>Suppose you are using the database in Figure 8.13, composed of the two tables. Use Figure 8.13 to answer questions 5.1 to 5.6. <ol><li>Identify the primary key in each table.</li> <li>Identify the foreign key in the BookOrders table.</li> <li>Are there any candidate keys in either table?</li> <li>Draw the ER model.</li> <li>Does the BookOrders table exhibit referential integrity? Why or why not?</li> <li>Do the tables contain redundant data? If so which table(s) and what is the redundant data?</li> </ol> </li> <li>Looking at the student table in Figure 8.14, list all the possible candidate keys. Why did you select these? <div id="attachment_250" style="width: 160px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student.jpg"><img width="150" height="255" class="wp-image-250" alt="Ch8-Exercises - No6 Student" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student.jpg 337w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student-176x300.jpg 176w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student-65x110.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No6-Student-225x382.jpg 225w" /></a> <p class="wp-caption-text">Figure 8.14. Student table for question 6, by A. Watt.</p> </div> <div id="attachment_254" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database.jpg"><img width="400" height="250" class="wp-image-254" alt="Ch8-Exercises -No7 School Database" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-1024x640.jpg" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-1024x640.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-300x187.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-225x140.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database-350x219.jpg 350w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch8-Exercises-No7-School-Database.jpg 1294w" /></a> <p class="wp-caption-text">Figure 8.15. ERD of school database for questions 7-10, by A. Watt.</p> </div> <p>Use the ERD of a school database in Figure 8.15 to answer questions 7 to 10.</p></li> <li>Identity all the kernels and dependent and characteristic entities in the ERD.</li> <li>Which of the tables contribute to weak relationships? Strong relationships?</li> <li>Looking at each of the tables in the school database in Figure 8.15, which attribute could have a NULL value?  Why?</li> <li>Which of the tables were created as a result of many to many relationships?</li> </ol> <p style="color: #1f1f1d"><strong>Also see</strong> <em>Appendix B: Sample ERD Exercises</em></p> </div> <h2>Attribution</h2> <p><span style="color: #1f1f1d">This chapter of </span><em style="color: #1f1f1d">Database Design</em> <span style="color: #1f1f1d">(including images, except as otherwisse noted) is a derivative copy of <a href="http://cnx.org/contents/68cd9551-e453-420e-a906-d8e7e71260bb@1">Data Modeling Using Entity-Relationship Model</a></span><span style="color: #1f1f1d"> by</span><span style="color: #1f1f1d"> Nguyen Kim Anh</span><span style="color: #1f1f1d"> licensed under </span><a style="color: #870d0d" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Nulls section and example</li> <li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-9-integrity-rules-and-constraints"><div class="chapter-title-wrap"><h3 class="chapter-number">9</h3><h2 class="chapter-title">Chapter 9 Integrity Rules and Constraints</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt &#038; Nelson Eng</h2><p>Constraints are a very important feature in a relational model. In fact, the relational model supports the well-defined theory of constraints on attributes or tables. Constraints are useful because they allow a designer to specify the semantics of data in the database. <em>Constraints</em> are the rules that force DBMSs to check that data satisfies the semantics.</p> <h2>Domain Integrity</h2> <p>Domain restricts the values of attributes in the relation and is a constraint of the relational model. However, there are real-world semantics for data that cannot be specified if used only with domain constraints. We need more specific ways to state what data values are or are not allowed and which format is suitable for an attribute. For example, <span style="color: #333333">the Employee ID (EID) must</span> be unique or the employee Birthdate is in the range [Jan 1, 1950, Jan 1, 2000]. Such information is provided in logical statements called <em>integrity constraints</em>.</p> <p>There are several kinds of integrity constraints, described below.</p> <h3>Entity integrity</h3> <p>To ensure <em>entity integrity</em>, it is required that every table have a primary key. Neither the PK nor any part of it can contain null values. This is because null values for the primary key mean we cannot identify some rows. For example, in the EMPLOYEE table, Phone cannot be a primary key since some people may not have a telephone.</p> <h3>Referential integrity</h3> <p><em>Referential integrity</em> requires that a foreign key must have a matching primary key or it must be null. This constraint is specified between two tables (parent and child); it maintains the correspondence between rows in these tables.  It means the reference from a row in one table to another table must be valid.</p> <p>Examples of referential integrity constraint in the Customer/Order database of the Company<span style="color: #ff0000"></span>:</p> <ul><li>Customer(<strong><span style="text-decoration: underline">CustID</span></strong>, CustName)</li> <li>Order(<strong><span style="text-decoration: underline">OrderID</span></strong>, CustID, OrderDate)</li> </ul> <p>To ensure that there are no orphan records, we need to enforce referential integrity. An <em>orphan record</em> is one whose foreign key FK value is not found in the corresponding entity – the entity where the PK is located. Recall that a typical join is between a PK and FK.</p> <p>The referential integrity constraint states that the customer ID (CustID) in the Order table must match a valid CustID in the Customer table. Most relational databases have declarative referential integrity. In other words, when the tables are created the referential integrity constraints are set up.</p> <p>Here is another example from a Course/Class database:</p> <ul><li>Course(<strong><span style="text-decoration: underline">CrsCode</span></strong>, DeptCode, Description)</li> <li>Class(<strong><span style="text-decoration: underline">CrsCode, Section</span></strong>, ClassTime)</li> </ul> <p>The referential integrity constraint states that CrsCode in the Class table must match a valid CrsCode in the Course table. In this situation, it’s not enough that the CrsCode and Section in the Class table make up the <span style="color: #333333">PK</span>, we must also enforce referential integrity.</p> <p>When setting up referential integrity it is important that the <span style="color: #333333">PK and FK </span>have the same data types and come from the same domain, otherwise the<span style="color: #ff0000"> <span style="color: #333333">relational database management system (RDBMS)</span></span> will not allow the join. RDBMS is a popular database system that is based on the relational model introduced by E. F. Codd of IBM&#8217;s San Jose Research Laboratory. Relational database systems are easier to use and understand than other database systems.</p> <h3>Referential integrity in Microsoft Access</h3> <p>In Microsoft (MS) Access, referential integrity is set up by joi<span>ning the PK in the</span> Customer table to the CustID in the Order table. See Figure 9.1 for a view of how this is done on the Edit Relationships screen in MS Access.</p> <div id="attachment_56" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Access-Referential-Integrity-Window-300x212.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Access-Referential-Integrity-Window-300x212.jpg" alt="A screenshot of the Edit Relationships commend in MS Access." width="300" height="212" class="wp-image-56 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Access-Referential-Integrity-Window-300x212.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Access-Referential-Integrity-Window-300x212-65x45.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Access-Referential-Integrity-Window-300x212-225x159.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.1. Referential access in MS Access, by A. Watt.</p> </div> <h3>Referential integrity using Transact-SQL (MS SQL Server)</h3> <p>When using Transact-SQL, the referential integrity is set when creating the Order t<span style="color: #333333">able with the FK</span>. Listed below are the statements showing the FK in the Order table referencing the PK in the Customer table.</p> <div class="textbox">CREATE TABLE Customer<br /> ( CustID INTEGER PRIMARY KEY,<br /> CustName CHAR(35) )</div> <div class="textbox">CREATE TABLE Orders<br /> ( OrderID INTEGER PRIMARY KEY,<br /> CustID INTEGER REFERENCES Customer(CustID),<br /> OrderDate DATETIME )</div> <h3>Foreign key rules</h3> <p><span>Additional foreign key rules may be added when setting referential integrity, such as what to do with the child rows (in the Orders table) when the record with the PK, part of the parent (Customer), is deleted or changed (updated). For example, the Edit Relationships window in MS Access (see Figure 9.1) shows two additional options for FK rules: Cascade Update and Cascade Delete. If these are not selected, the system will prevent the deletion or update of PK values in the parent table (Customer table) if a child record exists. The child record is any record with a matching PK.</span></p> <p><span>In some databases, an additional option exists when selecting the Delete option called Set to Null. In this is chosen, the PK row is deleted, but the FK in the child table is set to NULL.</span> Though this creates an orphan row, it is acceptable.</p> <h2>Enterprise Constraints</h2> <p>Enterprise constraints – sometimes referred to as semantic constraints – are additional rules specified by users or database administrators <span>and can be based on multiple tables.</span></p> <p>Here are some examples.</p> <ul><li>A class can have a maximum of 30 students.</li> <li>A teacher can teach a maximum of four classes per semester.</li> <li>An employee cannot take part in more than five projects.</li> <li>The salary of an employee cannot exceed the salary of the employee’s manager.</li> </ul> <h2>Business Rules</h2> <p><em>Business rules</em> are obtained from users when gathering requirements. The requirements-gathering process is very important, and its results should be verified by the user before the database design is built. If the business rules are incorrect, the design will be incorrect, and ultimately the application built will not function as expected by the users.</p> <p>Some examples of business rules are:</p> <ul><li>A teacher can teach many students.</li> <li>A class can have a maximum of 35 students.</li> <li>A course can be taught many times, but by only one instructor.</li> <li>Not all teachers teach classes.</li> </ul> <h3>Cardinality and connectivity</h3> <p>Business rules are used to determine cardinality <span>and connectivity</span>.<em> Cardinality</em> <span>describes the relationship between two data tables</span> by expressing the minimum and maximum number of entity occurrences associated with one occurrence of a related entity. <span>In Figure 9.2, you can see that cardinality is represented by the innermost markings on the relationship symbol. In this figure, the cardinality is 0 (zero) on the right and 1 (one) on the left.</span></p> <div id="attachment_57" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Connectivity-and-Cardinality-300x202.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Connectivity-and-Cardinality-300x202.jpg" alt="Connectivity-and-Cardinality-300x202" width="300" height="202" class="wp-image-57 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Connectivity-and-Cardinality-300x202.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Connectivity-and-Cardinality-300x202-65x43.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Connectivity-and-Cardinality-300x202-225x151.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.2. Position of connectivity and cardinality on a relationship symbol, by A. Watt.</p> </div> <p>The outermost symbol <span>of the relationship symbol</span>, on the other hand, represents the connectivity <span style="color: #333333">between the two tables.</span><span><span><em> </em><span><em>Connectivity</em> is the relationship between two tables, e.g., one to one or one to many</span>. The only time it is zero is when the FK can be null. When it comes to participation, there are <span>three options</span> to the relationship <span>between these entities</span>: either 0 (zero), 1 (one) or many. </span>In Figure 9.2, for example, the connectivity is 1 (one) on the outer, left-hand side of this line and many on the outer, right-hand side.</span></p> <p><span>Figure 9.3. shows the symbol that represents a one to many relationship.</span></p> <div id="attachment_58" style="width: 181px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-1.jpg"><img class="wp-image-58 size-full" alt="Ch-9-oneToMany-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-1.jpg" height="34" width="171" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-1.jpg 171w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-1-65x12.jpg 65w" /></a> <p class="wp-caption-text">Figure 9.3.</p> </div> <p>In Figure 9.4, both inner (representing cardinality) and outer (representing connectivity) markers are shown. The left side of this symbol  is read as minimum 1 and maximum 1. On the right side, it is read as: minimum 1 and maximum many.</p> <div id="attachment_59" style="width: 179px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-2.jpg"><img class="wp-image-59 size-full" alt="Ch-9-oneToMany-2" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-2.jpg" height="37" width="169" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-2.jpg 169w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-2-65x14.jpg 65w" /></a> <p class="wp-caption-text">Figure 9.4.</p> </div> <h2>Relationship Types</h2> <p>The line that connects two tables, in an ERD, indicates the <em>relationship type </em>between the tables<em>:</em> either identifying or non-identifying. An <em>identifying relationship</em> will have a solid line (where the PK contains the FK). A <em>non-identifying relationshi<span style="color: #333333">p</span></em> <span style="color: #333333">is indicated by a broken line </span>and does not contain the FK in the PK. See the section in Chapter 8 that discusses weak and strong relationships for more explanation.</p> <div id="attachment_70" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298.jpg"><img class="wp-image-70 size-full" alt="Figure 9.5. Identifying and non-identifying relationship." src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298.jpg" height="298" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298-150x150.jpg 150w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298-65x64.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Identifying-and-Non-Identifying-relationship-300x298-225x223.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.5. Identifying and non-identifying relationship, by A. Watt.</p> </div> <h3><span>Optional relationships</span></h3> <p><span style="color: #ff0000"></span><span style="color: #333333">In an <em>optional relationship</em>, the FK can be null or the parent table does not need to have a corresponding child table </span>occurrence. <span style="color: #333333">The symbol, shown in Figure 9.6, illustrates one type with a <span style="background-color: #ffffff">zero and three prongs (indicating many) which is interpreted as zero OR many.</span></span><span style="background-color: #ffffff;color: #ff0000"><br /> </span></p> <div id="attachment_60" style="width: 77px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-1.jpg"><img class="wp-image-60" alt="Ch-9-Zero-or-Many-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-1.jpg" height="45" width="67" /></a> <p class="wp-caption-text">Figure 9.6.</p> </div> <p><span style="color: #ff0000"><span style="color: #333333">For example, if you look at the Order table on  the right-hand side of Figure 9.7, you&#8217;ll notice that a customer doesn&#8217;t need to place an order to be a customer. In other words, the <strong>many side</strong> is optional.</span><br /> </span></p> <div id="attachment_61" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-more-300x189.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-more-300x189.jpg" alt="Cardinality-Optional-0-or-more-300x189" width="300" height="189" class="wp-image-61 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-more-300x189.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-more-300x189-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-more-300x189-225x141.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.7. Example usage of a zero to many optional relationship symbol, by A. Watt.</p> </div> <p><span style="color: #333333">The relationship symbol in Figure 9.7 can also be read as follows:</span></p> <ul><li>Left side: The order entity must contain a minimum of one related entity in the Customer table and a maximum of one related entity.</li> <li>Right side: A customer can<span> place</span> a minimum of zero orders or a maximum of many orders.</li> </ul> <p><span style="color: #333333">Figure 9.8  shows another type of optional relationship symbol with a zero and one, meaning zero OR one. </span> The <strong>one side</strong> is optional.</p> <div id="attachment_62" style="width: 76px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Optional-Arrow-2.jpg"><img class="wp-image-62" alt="Ch-9-Optional-Arrow-2" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Optional-Arrow-2.jpg" height="47" width="66" /></a> <p class="wp-caption-text">Figure 9.8.</p> </div> <p><span>Figure 9.9 gives an example of how a zero to one symbol might be used.</span></p> <div id="attachment_63" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-1-300x188.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-1-300x188.jpg" alt="Cardinality-Optional-0-or-1-300x188" width="300" height="188" class="wp-image-63 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-1-300x188.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-1-300x188-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Cardinality-Optional-0-or-1-300x188-225x141.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.9. Example usage of a zero to one optional relationship symbol, by A. Watt.</p> </div> <p>&nbsp;</p> <h3>Mandatory <span>relationships</span></h3> <p><span>In a <em>mandatory relationship</em>, o</span>ne entity occurrence requires a corresponding entity occurrence. The symbol for this relationship shows <em>one and only one </em>as shown in Figure 9.10. The one side is mandatory.</p> <div id="attachment_64" style="width: 50px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToOne-1.jpg"><img class="wp-image-64" alt="Ch-9-oneToOne-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToOne-1.jpg" height="46" width="40" /></a> <p class="wp-caption-text">Figure 9.10</p> </div> <p><span>See Figure 9.11 for an example of how the one and only one mandatory symbol is used.</span></p> <div id="attachment_65" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-one-300x188.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-one-300x188.jpg" alt="Ch-9-Mandatory-Cardinality-one-to-one-300x188" width="300" height="188" class="wp-image-65 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-one-300x188.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-one-300x188-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-one-300x188-225x141.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.11. Example of a one and only one mandatory relationship symbol, by A. Watt.</p> </div> <p>Figure 9.12 illustrates what a one to many relationship symbol looks like where the <strong>many side</strong> is mandatory.</p> <div id="attachment_66" style="width: 50px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-3.jpg"><img class="wp-image-66" alt="Ch-9-oneToMany-3" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-oneToMany-3.jpg" height="45" width="40" /></a> <p class="wp-caption-text">Figure 9.12.</p> </div> <p><span>Refer to Figure 9.13 for an example of how the one to many symbol may be used.</span></p> <div id="attachment_67" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-Many-300x188.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-Many-300x188.jpg" alt="Ch-9-Mandatory-Cardinality-one-to-Many-300x188" width="300" height="188" class="wp-image-67 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-Many-300x188.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-Many-300x188-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Mandatory-Cardinality-one-to-Many-300x188-225x141.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.13. Example of a one to many mandatory relationship symbol, by A. Watt.</p> </div> <p>So far we have seen that the innermost side <span>of a relationship symbol</span> (on the left-side of the symbol in Figure 9.14) can have<a></a> a 0 (zero) cardinality and a connectivity of many (shown on the right-side of the symbol in Figure 9.14), o<span>r one (not shown).</span></p> <div style="width: 75px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-1.jpg"><img class="wp-image-60" alt="Ch-9-Zero-or-Many-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-1.jpg" height="44" width="65" /></a> <p class="wp-caption-text">Figure 9.14</p> </div> <p><span>However,  it cannot have a connectivity of 0 (zero), as displayed in Figure 9.15. The connectivity can only be 1.</span></p> <div id="attachment_68" style="width: 70px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-2.jpg"><img class="wp-image-68" alt="Ch-9-Zero-or-Many-2" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Zero-or-Many-2.jpg" height="43" width="60" /></a> <p class="wp-caption-text">Figure 9.15.</p> </div> <p>The connectivity symbols show maximums. So if you think about it logically, if the connectivity symbol on the left side shows 0 (zero), then there would be no connection between the tables.</p> <p>The way to read <span>a relationship symbol, such as the one in Figure 9.16,</span> is as follows.</p> <ul><li>The CustID in the Order table must <span>also</span> be found in the Customer table a minimum of 0 and a maximum of 1 times.</li> <li>The 0 means that the CustID in the Order table may be null.</li> <li>The left-most 1 (right before the 0 representing connectivity) says that if there is a CustID in the Order table, it can only be in the Customer table once.</li> <li>When you see the 0 symbol for cardinality, you can assume two things: T <ol><li>the FK in the Order table allows nulls, and</li> <li>the FK is not part of the PK since PKs must not contain null values.</li> </ol> </li> </ul> <div id="attachment_69" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Cust-to-Order-ERD-300x168.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Cust-to-Order-ERD-300x168.jpg" alt="Ch-9-Cust-to-Order-ERD-300x168" width="300" height="168" class="wp-image-69 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Cust-to-Order-ERD-300x168.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Cust-to-Order-ERD-300x168-65x36.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-9-Cust-to-Order-ERD-300x168-225x126.jpg 225w" /></a> <p class="wp-caption-text">Figure 9.16. The relationship between a Customer table and an Order table, by A. Watt.</p> </div> <h2><strong> </strong></h2> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>business rules</strong>: obtained from users when gathering requirements and are used to determine cardinality</p> <p><strong>cardinality</strong>: expresses the minimum and maximum number of entity occurrences associated with one occurrence of a related entity</p> <p><strong>connectivity</strong>: the relationship between two tables, e.g., one to one or one to many</p> <p><strong>constraints</strong>: the rules that force DBMSs to check that data satisfies the semantics</p> <p><strong>entity integrity</strong>: <span style="color: #000000">requires that every table have a primary key; n</span>either the primary key, nor any part of it, can contain null values</p> <p><strong>identifying relationship</strong>: where the primary key contains the foreign key; indicated in an ERD by a solid line</p> <p><strong>integrity constraints</strong>: logical statements that state what data values are or are not allowed and which format is suitable for an attribute</p> <p><strong><span style="color: #000000">mandatory relationship</span></strong><span style="color: #000000">:</span> <span style="color: #000000"></span>one entity occurrence requires a corresponding entity occurrence.</p> <p><strong>non-identifying relationship</strong>: does not contain the foreign key in the primary key; indicated in an ERD by a dotted line</p> <p><span style="color: #000000"><strong>optional relationship</strong>:</span> t<span>he FK can be null or the parent table does not need to have a corresponding child table </span>occurrence</p> <p><strong>orphan record</strong>: a record whose foreign key value is not found in the corresponding entity &#8211;  the entity where the primary key is located</p> <p><strong>referential integrity</strong>: requires that a foreign key must have a matching primary key or it must be null</p> <p><strong>relational database management system (RDBMS)</strong>: a popular database system based on the relational model introduced by E. F. Codd of IBM&#8217;s San Jose Research Laboratory</p> <p><strong>relationship type</strong>: the type of relationship between two<span> tables in an ERD (either identifying or non-identifying); this relationship is indicated by a line drawn between the two tables. </span></p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <p style="color: #1f1f1d"><em>Read the following description and then answer questions 1-5 at the end.</em></p> <p style="color: #1f1f1d">The swim club database in Figure 9.17 has been designed to hold information about students who are enrolled in swim classes. The following information is stored: students, enrollment, swim classes, pools where classes are held, instructors for the classes, and various levels of swim classes. Use Figure 9.17 to answer questions 1 to 5.</p> <div class="wp-nocaption alignnone size-full wp-image-284" style="color: #1f1f1d"><div id="attachment_284" style="width: 610px" class="wp-caption aligncenter"><a style="color: #870d0d" href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase.jpg"><img class="wp-image-284" alt="SwimClubDatabase" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase.jpg" height="295" width="600" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase.jpg 966w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase-300x147.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase-65x31.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase-225x110.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/SwimClubDatabase-350x172.jpg 350w" /></a> <p class="wp-caption-text">Figure 9.17. ERD for questions 1-5. (Diagram by A. Watt.)</p> </div> </div> <p style="color: #1f1f1d">The primary keys are identified below. The following data types are defined in the SQL Server.</p> <p style="color: #1f1f1d"><strong>tblLevels </strong><br /> Level – Identity PK<br /> ClassName – text 20 – nulls are not allowed</p> <p style="color: #1f1f1d"><strong>tblPool</strong><br /> Pool – Identity PK<br /> PoolName – text 20 – nulls are not allowed<br /> Location – text 30</p> <p style="color: #1f1f1d"><strong>tblStaff</strong><br /> StaffID – Identity PK<br /> FirstName – text 20<br /> MiddleInitial – text 3<br /> LastName – text 30<br /> Suffix – text 3<br /> Salaried – Bit<br /> PayAmount – money</p> <p><strong>tblClasses</strong><br /> LessonIndex – Identity PK<br /> Level – Integer FK<br /> SectionID &#8211; Integer<br /> Semester – TinyInt<br /> Days – text 20<br /> Time – datetime (formatted for time)<br /> Pool – Integer FK<br /> Instructor – Integer FK<br /> Limit – TinyInt<br /> Enrolled – TinyInt<br /> Price – money</p> <p style="color: #1f1f1d"><strong>tblEnrollment</strong><br /> LessonIndex – Integer FK<br /> SID – Integer FK (LessonIndex and SID) Primary Key<br /> Status – text 30<br /> Charged – bit<br /> AmountPaid – money<br /> DateEnrolled – datetime</p> <p style="color: #1f1f1d"><strong>tblStudents</strong><br /> SID – Identity PK<br /> FirstName – text 20<br /> MiddleInitial – text 3<br /> LastName – text 30<br /> Suffix – text 3<br /> Birthday – datetime<br /> LocalStreet – text 30<br /> LocalCity – text 20<br /> LocalPostalCode – text 6<br /> LocalPhone – text 10</p> <p style="color: #1f1f1d">Implement this schema in SQL Server or access (you will need to pick comparable data types). Submit a screenshot of your ERD in the database.</p> <ol><li>Explain the relationship rules for each relationship (e.g., tblEnrollment and tblStudents: A student can enroll in many classes).</li> <li>Identify cardinality for each relationship, assuming the following rules: <ul><li>A pool may or may not ever have a class.</li> <li>The levels table must always be associated with at least one class.</li> <li>The staff table may not have ever taught a class.</li> <li>All students must be enrolled in at least one class.</li> <li>The class must have students enrolled in it.</li> <li>The class must have a valid pool.</li> <li>The class may not have an instructor assigned.</li> <li>The class must always be associated with an existing level.</li> </ul> </li> <li>Which tables are weak and which tables are strong (covered in an earlier chapter)?</li> <li>Which of the tables are non-identifying and which are identifying?</li> </ol> </div> <h2>Image Attributions</h2> <p>Figures 9.3, 9.4, 9.6, 9.8, 9.10, 9.12, 9.14 and 9.15 by A. Watt.</p> </div></div>
<div class="chapter standard" id="chapter-10-er-modelling"><div class="chapter-title-wrap"><h3 class="chapter-number">10</h3><h2 class="chapter-title">Chapter 10 ER Modelling</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>One important theory developed for the <span>entity</span> relational <span>(ER)</span> model involves the notion of functional dependency (FD).  The aim of studying this is to improve your understanding of relationships among data and to gain enough formalism to assist with practical database design.</p> <p>Like constraints, FDs are drawn from the semantics of the application domain. Essentially,  <em>functional dependencies</em> describe how individual attributes are related. FDs are a kind of constraint among attributes within a relation and <span>contribute to a good relational schema design. In this chapter, we will look at:</span></p> <ul><li>The basic theory and definition of functional dependency</li> <li>The methodology for improving schema <span>designs, also called normalization</span></li> </ul> <h2>Relational Design and Redundancy</h2> <p>Generally, a good relational database design must capture all of the necessary attributes <span>and</span> associations. The design should do this with a minimal amount of stored information <span>and</span> no redundant data.</p> <p>In database design, redundancy is generally undesirable because it causes problems maintaining consistency after updates. However, <span>redundancy</span> can sometimes lead to performance improvemen<span>ts; for example, when redundancy can be used in place of a <em>join</em> to connect data. A <em>join</em> is used when you need to obtain information based on two related tables.</span></p> <p>Consider Figure 10.1:  customer 1313131 is displayed twice, once for account no. A-101 and again for account A-102. <span><span>In this case, the customer number is not redundant, although there are deletion anomalies with the table. Having a separate customer table would solve this problem. However, if a branch address were to change, it would have to be updated in multiple places. If the customer number was left in the table as is, then you wouldn&#8217;t need a branch table and no join would be required, and performance is improved . <span style="color: #ff0000"></span></span></span></p> <div id="attachment_72" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Bank-Accounts-1-300x197.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Bank-Accounts-1-300x197.jpg" alt="Bank-Accounts-1-300x197" width="300" height="197" class="wp-image-72 size-full" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Bank-Accounts-1-300x197.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Bank-Accounts-1-300x197-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Bank-Accounts-1-300x197-225x147.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.1. An example of redundancy used with bank accounts and branches.</p> </div> <h2>Insertion Anomaly</h2> <p><span>An <em>insertion anomaly</em> occurs when you are inserting inconsistent information into a table. </span>When we insert a new record, <span>such as account no. A-306 in Figure 10.2</span>, we need to check that the branch data is consistent with existing rows.</p> <div id="attachment_73" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Insertion-Anomaly-Banking-Accounts-300x222.jpg"><img class="wp-image-73 size-full" alt="Insertion-Anomaly-Banking-Accounts-300x222" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Insertion-Anomaly-Banking-Accounts-300x222.jpg" height="222" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Insertion-Anomaly-Banking-Accounts-300x222.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Insertion-Anomaly-Banking-Accounts-300x222-65x48.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Insertion-Anomaly-Banking-Accounts-300x222-225x166.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.2. Example of an insertion anomaly.</p> </div> <h2>Update Anomaly</h2> <p>If a branch changes address, such as the Round Hill branch in Figure 10.3, we need to update all rows referring to that branch. Changing existing informat<span>ion incorrectly is called an <em>update anomaly</em>.</span></p> <div id="attachment_74" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Update-Anomaly-Bank-Accounts-300x198.jpg"><img class="wp-image-74 size-full" alt="Update-Anomaly-Bank-Accounts-300x198" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Update-Anomaly-Bank-Accounts-300x198.jpg" height="198" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Update-Anomaly-Bank-Accounts-300x198.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Update-Anomaly-Bank-Accounts-300x198-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Update-Anomaly-Bank-Accounts-300x198-225x148.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.3. Example of an update anomaly.</p> </div> <h2>Deletion Anomaly</h2> <p><span style="color: #333333">A <em>deletion anomaly</em> occurs when you delete a record that may contain attributes that shouldn&#8217;t be deleted. </span>For instance, if we remove information about the last account at a branch, such as account A-101 at the Downtown branch in Figure 10.4, all of the branch information disappears.</p> <div id="attachment_75" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Deletion-anomaly-Bank-Account-300x195.jpg"><img class="wp-image-75 size-full" alt="Deletion-anomaly-Bank-Account-300x195" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Deletion-anomaly-Bank-Account-300x195.jpg" height="195" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Deletion-anomaly-Bank-Account-300x195.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Deletion-anomaly-Bank-Account-300x195-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Deletion-anomaly-Bank-Account-300x195-225x146.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.4. Example of a deletion anomaly.</p> </div> <p>The problem with deleting the A-101 row is we don’t know where the Downtown branch is located and we lose all information regarding customer 1313131. To avoid these kinds of update or deletion problems, we need to decompose the original table into several smaller tables where each table has minimal overlap with other tables.</p> <p>Each bank account table must contain information about one entity only, such as the  Branch or Customer, as displayed in Figure 10.5.</p> <div id="attachment_76" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Branch-to-Customer-ERD-300x117.jpg"><img class="wp-image-76 size-full" alt="Ch-10-Branch-to-Customer-ERD-300x117" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Branch-to-Customer-ERD-300x117.jpg" height="117" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Branch-to-Customer-ERD-300x117.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Branch-to-Customer-ERD-300x117-65x25.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Branch-to-Customer-ERD-300x117-225x87.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.5. Examples of bank account tables that contain one entity each, by A. Watt.</p> </div> <p>Following this practice will ensure that when branch information is added or updated it will only affect one record. So, when customer information is added or deleted, the branch information will not be accidentally modified or incorrectly recorded.</p> <h3>Example: employee project table and anomalies</h3> <p>Figure 10.6 shows an example of an employee project table. <span>From th<span style="color: #000000">is table, we can assume that</span></span><span style="color: #000000">:</span></p> <ol><li><span>EmpID and ProjectID are a composite PK.</span></li> <li><span>Project ID determines Budget (i.e., Project P1 has a budget of 32 hours).</span></li> </ol> <div id="attachment_77" style="width: 301px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-ProjectEmp-table.jpg"><img class="wp-image-77 size-full" alt="Ch-10-ProjectEmp-table" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-ProjectEmp-table.jpg" height="152" width="291" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-ProjectEmp-table.jpg 291w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-ProjectEmp-table-65x33.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-ProjectEmp-table-225x117.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.6. Example of an employee project table, by A. Watt.</p> </div> <p><span style="color: #000000">Next, let’s look at some possi</span>ble anomalies <span>that might occur with this table during the following steps</span>.</p> <ol><li><span>Action:</span> Add row {S85,35,P1,9}</li> <li>Problem: There are two tuples with conflicting budgets</li> <li><span>Action:</span> Delete tuple {S79, 27, P3, 1}</li> <li><span>Problem</span>: <span>Step #3</span> deletes the budget for project P3</li> <li><span>Action</span>: Update tuple {S75, 32, P1, 7} to {S75, 35, P1, 7}</li> <li>Problem: <span>Step #5 creates</span> two tuples with different values for project P1’s budget</li> <li><span>Solution: Create a separate table, each, for Projects and Employees, as shown in Figure 10.7.</span></li> </ol> <div id="attachment_78" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-to-Emp-ERD-300x114.jpg"><img class="wp-image-78 size-full" alt="Ch-10-Project-to-Emp-ERD-300x114" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-to-Emp-ERD-300x114.jpg" height="114" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-to-Emp-ERD-300x114.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-to-Emp-ERD-300x114-65x24.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-to-Emp-ERD-300x114-225x85.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.7. Solution: separate tables for Project and Employee, by A. Watt.</p> </div> <h2><span style="color: #000000">How to Avoid Anomalies</span></h2> <p>The best approach to creating tables without anomalies is to ensure that the tables are normalized, and that’s accomplished by understanding functional dependencies. FD ensures that all attributes in a table belong to that table. In other words, it will eliminate redundancies and anomalies.</p> <h3>Example: separate Project and Employee tables</h3> <div id="attachment_79" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-and-Emp-tables-300x89.jpg"><img class="wp-image-79" alt="Ch-10-Project-and-Emp-tables-300x89" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-and-Emp-tables-300x89.jpg" height="119" width="400" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-and-Emp-tables-300x89.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-and-Emp-tables-300x89-65x19.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-10-Project-and-Emp-tables-300x89-225x66.jpg 225w" /></a> <p class="wp-caption-text">Figure 10.8. Separate Project and Employee tables with data, by A. Watt.</p> </div> <p><span>By keeping data separate using individual Project and Employee tables:</span></p> <ol><li>No anomalies will be created if a budget is changed.</li> <li>No dummy values are needed for projects that have no employees assigned.</li> <li>If an employee’s contribution is deleted, no important data is lost.</li> <li>No anomalies are created if an employee’s contribution is added.</li> </ol> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>deletion anomaly</strong>: occurs when you delete a record that may contain attributes that shouldn&#8217;t be deleted</p> <p><strong>functional dependency (FD)</strong>: describes how individual attributes are related</p> <p><strong>insertion anomaly</strong>: occurs when you are inserting inconsistent information into a table</p> <p><span><strong>join</strong>: <span style="color: #000000">used when you need to obtain information based on two related tables</span></span></p> <p><strong>update anomaly</strong>: changing existing information incorrectly</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Normalize Figure 10.9. <div id="attachment_256" style="width: 610px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977.jpg"><img class="wp-image-256" alt="Ch10-Exercises -Fig10-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977.jpg" height="141" width="600" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977.jpg 1222w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977-300x70.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977-1024x240.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977-65x15.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977-225x52.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch10-Exercises-Fig10-1-e1409190793977-350x82.jpg 350w" /></a> <p class="wp-caption-text">Figure 10.9. Table for question 1, by A. Watt.</p> </div> </li> <li>Create a logical ERD for an online movie rental service (no many to many relationships). Use the following description of operations on which your business rules must be based:The <span>online movie rental service</span> classifies movie titles according to their type: comedy, western, classical, science fiction, cartoon, action, musical, and new release. Each type contains many possible titles, and most titles within a type are available in multiple copies. For example, note the following summary:TYPE TITLE<br /> Musical My Fair Lady (Copy 1)<br /> <span>My Fair Lady (Copy 2)<br /> </span><span>Oklahoma (Copy 1)<br /> </span><span>Oklahoma (Copy 2)<br /> </span><span>Oklahoma (Copy 3)<br /> </span><span>etc. </span></li> <li>What three data anomalies are likely to be the result of data redundancy? How can such anomalies be eliminated?</li> </ol> <p style="color: #1f1f1d"><strong>Also see</strong>  <em>Appendix B: Sample ERD Exercises</em></p> </div> <h2>Attribution</h2> <p><span style="color: #1f1f1d">This chapter of </span><em style="color: #1f1f1d">Database Design</em> <span style="color: #1f1f1d">(including images, except as otherwise noted) is a derivative copy of <a href="http://cnx.org/contents/e5ac0441-0e54-4895-9112-fb3a4ee9bce1@1" target="_blank">Relational Design Theory</a></span><span style="color: #1f1f1d"> by</span><span style="color: #1f1f1d"> Nguyen Kim Anh</span><span style="color: #1f1f1d"> licensed under </span><a style="color: #870d0d" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License 3.0 license</a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Example: employee project table and anomalies</li> <li>How to Avoid Anomalies</li> <li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-11-functional-dependencies"><div class="chapter-title-wrap"><h3 class="chapter-number">11</h3><h2 class="chapter-title">Chapter 11 Functional Dependencies</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>A <em>functional dependency</em> (FD) is a relationship between two attributes, typically between the PK and other non-key attributes within a table. For any relation R, attribute Y is functionally dependent on attribute X (usually the PK), if for every valid instance of X, that value of X uniquely determines the value of <span style="color: #000000">Y. This relationship is indicated by the representation below :</span></p> <p style="padding-left: 90px"><strong>X ———–&gt; Y</strong></p> <p><span style="color: #000000">The left side of the above FD diagram i</span>s called the <em>determinant</em>, and the right side is the <em>dependent</em>. Here are a few examples.</p> <p>In the first example, below, SIN determines Name, Address and Birthdate. Given SIN, we can determine any of the other attributes within the table.</p> <div class="textbox" style="text-align: center"><strong>SIN   ———-&gt; Name, Address, Birthdate</strong></div> <p>For the second example, SIN and Course determine the date completed (DateCompleted). This must also work for a composite PK.</p> <div class="textbox" style="text-align: center"><strong>SIN, Course  ———&gt;     DateCompleted</strong></div> <p>The third example indicates that ISBN determines Title.</p> <div class="textbox" style="text-align: center"><strong>ISBN  ———–&gt;  Title</strong></div> <h2>Rules of Functional Dependencies</h2> <p>Consider the following table of data r(R) of the relation schema R(ABCDE) shown in Table 11.1.</p> <div id="attachment_81" style="width: 151px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-R-Functional-Dependency-example.jpg"><img class="wp-image-81 size-full" alt="Table-R-Functional-Dependency-example" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-R-Functional-Dependency-example.jpg" height="216" width="141" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-R-Functional-Dependency-example.jpg 141w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Table-R-Functional-Dependency-example-65x99.jpg 65w" /></a> <p class="wp-caption-text">Table 11.1. Functional dependency example, by A. Watt.</p> </div> <p>As you look at this table, ask yourself: <em>What kind of dependencies can we observe among the attributes in Table R? </em><span style="color: #000000">Since the values of A are unique (a1, a2, a3, etc.), it foll</span>ows from the FD definition that:</p> <p>A → B,    A → C,    A → D,    A → E</p> <ul><li>It also follows that  A →BC  (or any other subset of ABCDE).</li> <li>This can be summarized as   A →BCDE.</li> <li>From our understanding of primary keys, A is a primary key.</li> </ul> <p>Since the values of E are always <span style="color: #000000">the same (all e1), it follo</span>ws that:</p> <p>A → E,   B → E,   C → E,   D → E</p> <p>However, we cannot generally summarize the above with  ABCD → E  <span style="color: #000000">because, </span>in general,   A → E,   B → E,   AB → E.</p> <p>Other observations:</p> <ol><li>Combinations of BC are unique, therefore  BC → ADE.</li> <li>Combinations of BD are unique, therefore  BD → ACE.</li> <li>If C values match, so do D values. <ol><li>Therefore,  C → D</li> <li>However, D values don’t determine C values</li> <li>So C does not determine D, and D does not determine C.</li> </ol> </li> </ol> <p><span>Looking at actual data can help clarify which attributes are dependent and which are determinants. </span></p> <h2>Inference Rules</h2> <p><em>Armstrong’s axioms</em> are a set of inference rules used to infer all the functional dependencies on a relational database. They were developed by William W. Armstrong. The following describes what will be used, in terms of notation, to explain these axioms.</p> <p>Let R(U) be a relation scheme over the set of attributes U. We will use the letters <span style="color: #000000">X, Y, Z </span>to represent any subset of and, for short, the union of two sets of attributes, instead of the usual  <span style="color: #000000">X U Y.</span></p> <h3>Axiom of reflexivity</h3> <p>This axiom says, if Y is a subset of X, then X determines Y (see Figure 11.1).</p> <div id="attachment_82" style="width: 299px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axion-Reflexivity.jpg"><img class="wp-image-82 size-full" alt="Ch-11-Axion-Reflexivity" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axion-Reflexivity.jpg" height="59" width="289" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axion-Reflexivity.jpg 289w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axion-Reflexivity-65x13.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axion-Reflexivity-225x45.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.1. Equation for axiom of reflexivity.</p> </div> <p>For example, <strong>PartNo —&gt; NT123</strong>  where X (PartNo) is composed of more than one piece of information; i.e., Y (NT) and partID (123).</p> <h3>Axiom of augmentation</h3> <p>The axiom of augmentation, also known as a partial dependency, s<span>ays if X determines Y, then XZ determines YZ for any Z (see Figure 11.2 ).</span></p> <div id="attachment_83" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-Augmentation-300x34.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-Augmentation-300x34.jpg" alt="Ch-11-Axiom-of-Augmentation-300x34" class="wp-image-83 size-full" height="34" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-Augmentation-300x34.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-Augmentation-300x34-65x7.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-Augmentation-300x34-225x25.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.2. Equation for axiom of augmentation.</p> </div> <p><span>The axiom of augmentation says that every non-key attribute must be fully dependent on the PK. In the example shown below, StudentName, Address, City, Prov, and PC (postal code) are only dependent on the StudentNo, not on the StudentNo and Grade.</span></p> <p><span style="color: #000000">StudentNo, C</span>ourse —&gt; StudentName, Address, City, Prov, PC, Grade, DateCompleted</p> <p>This situation is not desirable because <span style="color: #000000">every non-key attribute has to be </span>fully dependent on the PK. In this situatio<span style="color: #000000">n, student information is o</span>nly partially dependent on the PK (StudentNo).</p> <p>To fix this problem, we need to break <span style="color: #000000">the original table do</span>wn into two as follows:</p> <ul><li>Table 1: StudentNo, Course,  Grade, DateCompleted</li> <li>Table 2: StudentNo, StudentName, Address, City, Prov, PC</li> </ul> <h3>Axiom of transitivity</h3> <p>The axiom of transitivity says if X determines Y, and Y determines Z, then X must also determine Z (see Figure 11.3).</p> <div id="attachment_84" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-transitivity-300x30.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-transitivity-300x30.jpg" alt="Ch-11-Axiom-of-transitivity-300x30" class="wp-image-84 size-full" height="30" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-transitivity-300x30.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-transitivity-300x30-65x6.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-of-transitivity-300x30-225x22.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.3. Equation for axiom of transitivity.</p> </div> <p>The table below has information not directly related to the student; for instance, ProgramID and ProgramName should have a table of its own. ProgramName is not dependent on StudentNo; it&#8217;s dependent on ProgramID.</p> <p>StudentNo <span> —&gt; </span>StudentName, Address, City, Prov, PC, ProgramID, ProgramName</p> <p>This situation is not desirable because a non-key attribute (ProgramName) depends on another non-key attribute (ProgramID).</p> <p><span style="color: #000000">To fix this problem</span>, we need to break this table into two: one to hold information about the student and the other to hold information about the program.</p> <ul><li>Table 1: StudentNo —&gt; StudentName, Address, City, Prov, PC, ProgramID</li> <li>Table 2: ProgramID —&gt; ProgramName<strong><br /> </strong></li> </ul> <p>However we still need to leave an FK in the student table so that we can identify which program the student is enrolled in.</p> <h3>Union</h3> <p>This rule suggests that if two tables are separate, and the PK is the same, you may want to consider putting them together. It states that if X determines Y and X determines Z then X must also determine Y and Z (see Figure 11.4).</p> <div id="attachment_85" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Union-300x23.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Union-300x23.jpg" alt="Ch-11-Axiom-Union-300x23" class="wp-image-85 size-full" height="23" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Union-300x23.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Union-300x23-65x4.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Union-300x23-225x17.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.4. Equation for the Union rule.</p> </div> <p>For example, if:</p> <ul><li>SIN —&gt; EmpName</li> <li>SIN —&gt; SpouseName</li> </ul> <p>You may want to join these two tables into one as follows:</p> <p>SIN –&gt; EmpName, SpouseName</p> <p>Some database administrators (<em>DBA</em>) might choose to keep these tables separated for a couple of reasons. One, each table describes a different entity so the entities should be kept apart. Two, if SpouseName is to be left NULL most of the time, there is no need to include it in the same table as EmpName.</p> <h3>Decomposition</h3> <p>Decomposition is the reverse of the Union rule. If you have a table that appears to contain two entities that are determined by the same PK, consider breaking them up into two tables. This rule states that if X determines Y and Z, then X determines Y and X determines Z separately (see Figure 11.5).</p> <div id="attachment_86" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Decomposition-300x28.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Decomposition-300x28.jpg" alt="Ch-11-Axiom-Decomposition-300x28" class="wp-image-86 size-full" height="28" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Decomposition-300x28.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Decomposition-300x28-65x6.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Axiom-Decomposition-300x28-225x21.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.5. Equation for decompensation rule.</p> </div> <h2>Dependency Diagram</h2> <p>A dependency diagram, shown in Figure 11.6, illustrates the various dependencies that might exist in a <em>non-normalized table</em>. A non-normalized table is one that has data redundancy in it.</p> <div id="attachment_87" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-300x67.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-300x67.jpg" alt="Ch-11-Dependency-Diagram-300x67" class="wp-image-87 size-full" height="67" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-300x67.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-300x67-65x14.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-300x67-225x50.jpg 225w" /></a> <p class="wp-caption-text">Figure 11.6. Dependency diagram.</p> </div> <p>The following dependencies are identified in this table:</p> <ul><li>ProjectNo and EmpNo, combined, are the PK.</li> <li>Partial Dependencies: <ul><li>ProjectNo —&gt; ProjName</li> <li>EmpNo —&gt; EmpName, DeptNo, <span style="color: #ff0000"><br /> </span></li> <li>ProjectNo, EmpNo —&gt; HrsWork</li> </ul> </li> <li>Transitive Dependency: <ul><li>DeptNo —&gt; DeptName</li> </ul> </li> </ul> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>Armstrong’s axioms</strong>:<strong> </strong>a set of inference rules used to infer all the functional dependencies on a relational database</p> <p><strong>DBA</strong>: database administrator</p> <p><strong>decomposition</strong>: a rule that suggests if you have a table that appears to contain two entities that are determined by the same PK, consider breaking them up into two tables</p> <p><strong>dependent</strong>: the right side of the functional dependency diagram</p> <p><strong>determinant</strong>: the left side of the functional dependency diagram</p> <p><strong>functional dependency (FD):</strong> a relationship between two attributes, typically between the PK and other non-key attributes within a table</p> <p><strong>non-normalized table</strong>: a table that has data redundancy in it</p> <p><strong>Union</strong>: a rule that suggests that if two tables are separate, and the PK is the same, consider putting them together</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <p>See Chapter 12.</p> </div> <h2>Attributions</h2> <p><span style="color: #1f1f1d">This chapter of </span><em style="color: #1f1f1d">Database Design</em> <span style="color: #1f1f1d">(including images, except as otherwise noted) is a derivative copy of <a href="http://en.wikipedia.org/wiki/Armstrong%27s_axioms">Armstrong&#8217;s axioms</a> </span>by Wikipedia the Free Encyclopedia licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported </a></p> <p>The following material was written by Adrienne Watt:</p> <ol><li>some of Rules of Functional Dependencies</li> <li>Key Terms</li> </ol> </div></div>
<div class="chapter standard" id="chapter-12-normalization"><div class="chapter-title-wrap"><h3 class="chapter-number">12</h3><h2 class="chapter-title">Chapter 12 Normalization</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>Normalization should be part of the database design process. However, it is difficult to separate the normalization process from the ER modelling process so the two techniques should be used concurrently.</p> <p>Use an entity relation diagram (ERD) to provide the big picture, or macro view, of an organization’s data requirements and operations. This is created through an iterative process that involves identifying relevant entities, their attributes and their relationships.</p> <p>Normalization procedure focuses on characteristics of specific entities and represents the micro view of entities within the ERD.</p> <h2>What Is Normalization?</h2> <p><em>Normalization</em> is the branch of relational theory that provides design insights. It is the process of determining how much redundancy exists in a table. The goals of normalization are to:</p> <ul><li>Be able to characterize the level of redundancy in a relational schema</li> <li>Provide mechanisms for transforming schemas in order to remove redundancy</li> </ul> <p>Normalization theory draws heavily on the theory of functional dependencies. Normalization theory defines six normal forms (NF). Each normal form involves a set of dependency properties that a schema must satisfy and each normal form gives guarantees about the presence and/or absence of update anomalies. This means that higher normal forms have less redundancy, and as a result, fewer update problems.</p> <h2>Normal Forms</h2> <p>All the tables in any database can be in one of the normal forms we will discuss next.  Ideally we only want minimal redundancy for PK to FK. Everything else should be derived from other tables.  There are six normal forms, but we will only look at the first four, which are:</p> <ul><li>First normal form (1NF)</li> <li>Second normal form (2NF)</li> <li>Third normal form (3NF)</li> <li>Boyce-Codd normal form (BCNF)</li> </ul> <p>BCNF is rarely used.</p> <h2>First Normal Form (1NF)</h2> <p>In the <em>first normal form</em>, only single values are permitted at the intersection of each row and column; hence, there are no repeating groups.</p> <p>To normalize a relation that contains a repeating group, remove the repeating group and form two new relations.</p> <p>The PK of the new relation is a combination of the PK of the original relation plus an attribute from the newly created relation for unique identification.</p> <h3>Process for 1NF</h3> <p>We will use the <strong>Student_Grade_Repor<span><span>t</span> </span></strong><span>table below</span>, from a School database, as our example to explain the process for 1NF.</p> <div class="textbox"><strong>Student_Grade_Report </strong>(StudentNo, StudentName, Major, CourseNo, CourseName, InstructorNo, InstructorName, InstructorLocation, Grade)</div> <ul><li>In the Student Grade Report table, the repeating group is the course information. A student can take many courses.</li> <li>Remove the repeating group. In this case, it’s the course information for each student.</li> <li>Identify the PK for your new table.</li> <li>The PK must uniquely identify the attribute value (StudentNo and CourseNo).</li> <li>After removing all the attributes related to the course and student, you are left with the student course table (<strong>StudentCourse</strong>).</li> <li>The Student table (<strong>Student</strong>) is <span>now</span> in first normal form with the repeating group removed.</li> <li>The two new tables are shown below.</li> </ul> <div class="textbox"><strong>Student</strong> (<span>StudentNo</span>, StudentName, Major)</div> <div class="textbox"><strong>StudentCourse</strong> (<span style="text-decoration: underline">StudentNo, CourseNo</span>, CourseName, InstructorNo, InstructorName, InstructorLocation, Grade)</div> <h3>How to update 1NF anomalies</h3> <p><strong>StudentCourse</strong> (<span style="text-decoration: underline">StudentNo, CourseNo</span>, CourseName, InstructorNo, InstructorName, InstructorLocation, Grade)</p> <ul><li>To add a new course, we need a student.</li> <li>When course information needs to be updated, we may have inconsistencies.</li> <li>To delete a <em>student,</em> we might also delete critical information about a course.</li> </ul> <h2>Second Normal Form (2NF)</h2> <p>For the <em>second normal form</em>, the relation must first be in 1NF. The relation is automatically in 2NF if, and only if, the PK comprises a single attribute.</p> <p>If the relation has a composite PK, then each non-key attribute must be fully dependent on the entire PK and not on a subset of the PK (i.e., there must be no partial dependency <span>or</span> augmentation).</p> <h3>Process for 2NF</h3> <p>To move to 2NF, a table must first be in 1NF.</p> <ul><li>The Student table is already in 2NF because it has a single-column PK.</li> <li>When examining the Student Course table, we see that not all the attributes are fully dependent on the PK; specifically, all course information. The only attribute that is fully dependent is grade.</li> <li>Identify the new table that contains the course information.</li> <li>Identify the PK for the new table.</li> <li>The three new tables are shown below.</li> </ul> <div class="textbox"><strong>Student</strong> (<span>StudentNo</span>, StudentName, Major)</div> <div class="textbox"><strong>CourseGrade</strong> (<span style="text-decoration: underline">StudentNo, CourseNo</span>, Grade)</div> <div class="textbox"><strong>CourseInstructor </strong>(<span>CourseNo</span>, CourseName, InstructorNo, InstructorName, InstructorLocation)</div> <h3>How to update 2NF anomalies</h3> <ul><li>When adding a new instructor, we need a course.</li> <li>Updating course information could lead to inconsistencies for instructor information.</li> <li>Deleting a course may also delete instructor information.</li> </ul> <h2>Third Normal Form (3NF)</h2> <p>To be in <em>third normal form</em>, the relation must be in second normal form. Also all transitive dependencies must be removed; a non-key attribute may not be functionally dependent on another non-key attribute.</p> <h3>Process for 3NF</h3> <ul><li>Eliminate all dependent attributes in transitive relationship(s) from each of the tables that have a transitive relationship.</li> <li>Create new table(s) with removed dependency.</li> <li>Check new table(s) as well as table(s) modified to make sure that each table has a determinant and that no table contains inappropriate dependencies.</li> <li>See the four new tables below.</li> </ul> <div class="textbox"><strong>Student</strong> (StudentNo, StudentName, Major)</div> <div class="textbox"><strong>CourseGrade</strong> (<span style="text-decoration: underline">StudentNo, CourseNo</span>, Grade)</div> <div class="textbox"><strong>Course</strong> (<span style="text-decoration: underline">CourseNo</span>, CourseName, InstructorNo)</div> <div class="textbox"><strong>Instructor</strong> (InstructorNo, InstructorName, InstructorLocation)</div> <p>At this stage, there should be no anomalies in third normal <span style="color: #333333">form. Let&#8217;s look at the dependency diagram (Figure 12.1) for this example. The first step is to remove repeating groups, as discussed above.</span></p> <p><strong>Student</strong> (StudentNo, StudentName, Major)</p> <p><strong>StudentCourse</strong> (StudentNo, CourseNo, CourseName, InstructorNo, InstructorName, InstructorLocation, Grade)</p> <p>To recap the normalization process for the School database, review the dependencies shown in Figure 12.1.</p> <div id="attachment_89" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-School-300x89.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-School-300x89.jpg" alt="Ch-11-Dependency-Diagram-School-300x89" class="wp-image-89 size-full" height="89" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-School-300x89.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-School-300x89-65x19.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-11-Dependency-Diagram-School-300x89-225x66.jpg 225w" /></a> <p class="wp-caption-text">Figure 12.1 Dependency diagram, by A. Watt.</p> </div> <p>The abbreviations used in Figure 12.1 are as follows:</p> <ul><li>PD: partial dependency</li> <li>TD:  transitive dependency</li> <li><span style="color: #ff0000"><span style="color: #333333">FD:  full dependency (Note: FD typically stands for <strong>functional</strong> dependency. Using FD as an abbreviation for full dependency is only used in Figure 12.1.)</span><br /> </span></li> </ul> <h2>Boyce-Codd Normal Form (BCNF)</h2> <p>When a table has more than one candidate key, anomalies may result even though the relation is in 3NF. <em>Boyce-Codd normal form</em> is a special case of 3NF. A relation is in BCNF if, and only if, every determinant is a candidate key.</p> <h3>BCNF Example 1</h3> <p>Consider the following table (<strong>St_Maj_Adv</strong>).</p> <table style="height: 126px; width: 202px; border-spacing: 0px;" border="1" cellpadding="0"><tbody><tr><td valign="top"><strong>Student_id</strong></td> <td valign="top"><strong>Major</strong></td> <td valign="top"><strong>Advisor</strong></td> </tr> <tr><td valign="top">111</td> <td valign="top">Physics</td> <td valign="top">Smith</td> </tr> <tr><td valign="top">111</td> <td style="text-align: left" valign="top">Music</td> <td valign="top">Chan</td> </tr> <tr><td valign="top">320</td> <td valign="top">Math</td> <td valign="top">Dobbs</td> </tr> <tr><td valign="top">671</td> <td valign="top">Physics</td> <td valign="top">White</td> </tr> <tr><td valign="top">803</td> <td valign="top">Physics</td> <td valign="top">Smith</td> </tr> </tbody> </table> <p>T<span style="color: #333333">he <em>semantic rules</em> (busines</span>s rules applied to the database) for this table are:</p> <ol><li>Each Student may major in several subjects.</li> <li>For each Major, a given Student has only one Advisor.</li> <li>Each Major has several Advisors.</li> <li>Each Advisor <span style="color: #000000">advises</span> only one Major.</li> <li>Each Advisor <span style="color: #000000">advises </span>several Students in one Major.</li> </ol> <p>The functional dependencies for this table are listed below. The first one is a candidate key; the second is not.</p> <ol><li>Student_id, Major ——&gt;  Advisor</li> <li>Advisor  ——&gt;  Major</li> </ol> <p>Anomalies for this table include:</p> <ol><li>Delete – student deletes advisor info</li> <li>Insert – a new advisor needs a student</li> <li>Update – inconsistencies</li> </ol> <p><strong>Note</strong>: No single attribute is a candidate key.</p> <p>PK can be <span style="text-decoration: underline">Student_id, Major</span> or <span style="text-decoration: underline">Student_id, Advisor</span><strong>.</strong></p> <p>To reduce the <strong>St_Maj_Adv</strong> relation to BCNF, you create two new tables:</p> <ol><li><strong>St_Adv</strong> (<span style="text-decoration: underline">Student_id, Advisor</span>)</li> <li><strong>Adv_Maj</strong> (<span style="text-decoration: underline">Advisor</span>, Major)</li> </ol> <p><strong>St_Adv </strong>table     <strong>                                                               </strong></p> <table border="1" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top"><strong>Student_id</strong></td> <td valign="top"><strong>Advisor</strong></td> </tr> <tr><td valign="top">111</td> <td valign="top">Smith</td> </tr> <tr><td valign="top">111</td> <td valign="top">Chan</td> </tr> <tr><td valign="top">320</td> <td valign="top">Dobbs</td> </tr> <tr><td valign="top">671</td> <td valign="top">White</td> </tr> <tr><td valign="top">803</td> <td valign="top">Smith</td> </tr> </tbody> </table> <p><strong>Adv_Maj </strong>table<strong><br /> </strong></p> <table border="1" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top"><strong>Advisor</strong></td> <td valign="top"><strong>Major</strong></td> </tr> <tr><td valign="top">Smith</td> <td valign="top">Physics</td> </tr> <tr><td valign="top">Chan</td> <td valign="top">Music</td> </tr> <tr><td valign="top">Dobbs</td> <td valign="top">Math</td> </tr> <tr><td valign="top">White</td> <td valign="top">Physics</td> </tr> </tbody> </table> <h3>BCNF Example 2</h3> <p>Consider the following table (<strong>Client_Interview)</strong>.</p> <table border="1" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top"><strong>ClientNo</strong></td> <td valign="top"><strong>InterviewDate</strong></td> <td valign="top"><strong>InterviewTime</strong></td> <td valign="top"><strong>StaffNo</strong></td> <td valign="top"><strong>RoomNo</strong></td> </tr> <tr><td valign="top">CR76</td> <td valign="top">13-May-02</td> <td valign="top">10.30</td> <td valign="top">SG5</td> <td valign="top">G101</td> </tr> <tr><td valign="top">CR56</td> <td valign="top">13-May-02</td> <td valign="top">12.00</td> <td valign="top">SG5</td> <td valign="top">G101</td> </tr> <tr><td valign="top">CR74</td> <td valign="top">13-May-02</td> <td valign="top">12.00</td> <td valign="top">SG37</td> <td valign="top">G102</td> </tr> <tr><td valign="top">CR56</td> <td valign="top">1-July-02</td> <td valign="top">10.30</td> <td valign="top">SG5</td> <td valign="top">G102</td> </tr> </tbody> </table> <p><span>FD1</span> – ClientNo, InterviewDate –&gt; InterviewTime, StaffNo, RoomNo  (PK)</p> <p>FD2 – staffNo, interviewDate, interviewTime –&gt; clientNO      (candidate key: CK)</p> <p>FD3 – roomNo, interviewDate, interviewTime –&gt; staffNo, clientNo    (CK)</p> <p>FD4 – staffNo, interviewDate –&gt; roomNo</p> <p>A relation is in BCNF if, and only if, every determinant is a candidate key. We need to create a table that incorporates the first three FDs (<strong>Client_Interview2 </strong>table) and another table (<strong>StaffRoom</strong> table) for the fourth FD.</p> <p><strong>Client_Interview2 </strong>table</p> <table border="1" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top"><strong>ClientNo</strong></td> <td valign="top"><strong>InterviewDate</strong></td> <td valign="top"><strong>InterViewTime</strong></td> <td valign="top"><strong>StaffNo</strong></td> </tr> <tr><td valign="top">CR76</td> <td valign="top">13-May-02</td> <td valign="top">10.30</td> <td valign="top">SG5</td> </tr> <tr><td valign="top">CR56</td> <td valign="top">13-May-02</td> <td valign="top">12.00</td> <td valign="top">SG5</td> </tr> <tr><td valign="top">CR74</td> <td valign="top">13-May-02</td> <td valign="top">12.00</td> <td valign="top">SG37</td> </tr> <tr><td valign="top">CR56</td> <td valign="top">1-July-02</td> <td valign="top">10.30</td> <td valign="top">SG5</td> </tr> </tbody> </table> <p><strong>StaffRoom</strong> table</p> <table border="1" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top"><strong>StaffNo</strong></td> <td valign="top"><strong>InterviewDate</strong></td> <td valign="top"><strong>RoomNo</strong></td> </tr> <tr><td valign="top">SG5</td> <td valign="top">13-May-02</td> <td valign="top">G101</td> </tr> <tr><td valign="top">SG37</td> <td valign="top">13-May-02</td> <td valign="top">G102</td> </tr> <tr><td valign="top">SG5</td> <td valign="top">1-July-02</td> <td valign="top">G102</td> </tr> </tbody> </table> <h2>Normalization and Database Design</h2> <p><span style="color: #444444">During the normalization process of database design, make sure that proposed entities meet required normal form before table structures are created. Many real-world databases have been improperly designed or burdened with anomalies if improperly modified during the course of time. You may be asked to redesign and modify existing databases. This can be a large undertaking if the tables are not properly normalized.</span></p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms and Abbreviations</h3> <p><strong>Boyce-Codd normal form (BCNF)</strong>:  a special case of 3rd NF</p> <p><strong>first normal form (1NF): </strong>only single values are permitted at the intersection of each row and column so there are no repeating groups</p> <p><strong>normalization</strong>: the process of determining how much redundancy exists in a table</p> <p><strong>second normal form (2NF)</strong>: the relation must be in 1NF and the PK comprises a single attribute</p> <p><strong>semantic rules</strong>: business rules applied to the database</p> <p><strong>third normal form (3NF)</strong>: the relation must be in 2NF and all transitive dependencies must be removed; a non-key attribute may not be functionally dependent on another non-key attribute</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <p><strong><span style="color: #000000">Complete chapters 11 and 12 before doing these exercises.</span></strong></p> <ol><li>What is normalization?</li> <li>When is a table in 1NF?</li> <li>When is a table in 2NF?</li> <li>When is a table in 3NF?</li> <li> Identify and discuss each of the indicated dependencies in the dependency diagram shown in Figure 12.2. <div id="attachment_257" style="width: 410px" class="wp-caption aligncenter"><a style="color: #870d0d" href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943.jpg"><img class="wp-image-257" alt="Ch11-Exercises -Fig11-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943.jpg" height="121" width="400" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943.jpg 857w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943-300x90.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943-65x19.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943-225x67.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-1-e1409835870943-350x105.jpg 350w" /></a> <p class="wp-caption-text">Figure 12.2 For question 5, by A. Watt.</p> </div> </li> <li>To keep track of students and courses, a new college uses the table structure in Figure 12.3.<br /> Draw the dependency diagram for this table. <div id="attachment_258" style="width: 510px" class="wp-caption aligncenter"><a style="color: #870d0d" href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289.jpg"><img class="wp-image-258" alt="Ch11-Exercises -Fig11-2" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289.jpg" height="116" width="500" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289.jpg 1229w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289-300x69.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289-1024x238.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289-65x15.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289-225x52.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch11-Exercises-Fig11-2-e1409836100289-350x81.jpg 350w" /></a> <p class="wp-caption-text">Figure 12.3 For question 6, by A. Watt.</p> </div> </li> <li>Using the dependency diagram you just drew, show the tables (in their third normal form) you would create to fix the problems you encountered. Draw the dependency diagram for the fixed table.</li> <li>An agency called Instant Cover supplies part-time/temporary staff to hotels in Scotland. Figure 12.4 lists the time spent by agency staff working at various hotels. The national insurance number (NIN) is unique for every member of staff. Use Figure 12.4 to answer questions (a) and (b). <div id="attachment_259" style="width: 410px" class="wp-caption aligncenter"><a style="color: #870d0d" href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456.jpg"><img class="wp-image-259" alt="Ch12-Exercises -Fig12-1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456.jpg" height="94" width="400" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456.jpg 927w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456-300x70.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456-65x15.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456-225x52.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch12-Exercises-Fig12-1-e1409836269456-350x81.jpg 350w" /></a> <p class="wp-caption-text">Figure 12.4 For question 8, by A. Watt.</p> </div> <ol><li>This table is susceptible to update anomalies. Provide examples of insertion, deletion and update anomalies.</li> <li>Normalize this table to third normal form. State any assumptions.</li> </ol> </li> <li>Fill in the blanks: <ol><li>____________________ produces a lower normal form.</li> <li>Any attribute whose value determines other values within a row is called a(n) ____________________.</li> <li>An attribute that cannot be further divided is said to display ____________________.</li> <li>____________________ refers to the level of detail represented by the values stored in a table’s row.</li> <li>A relational table must not contain ____________________ groups.</li> </ol> </li> </ol> <p><strong>Also see</strong> <em>Appendix B: Sample ERD Exercises</em></p> </div> <h2>Bibliography</h2> <p><span><span class="name">Nguyen Kim Anh</span>, </span> <span><em>Relational Design Theory</em>. OpenStax CNX. </span> <span>8 Jul 2009 Retrieved July 2014 from <a class="external-link" href="http://cnx.org/contents/606cc532-0b1d-419d-a0ec-ac4e2e2d533b@1@1" rel="nofollow">http://cnx.org/contents/606cc532-0b1d-419d-a0ec-ac4e2e2d533b@1@1</a></span></p> <p>Russell, Gordon. Chapter 4 &#8211; Normalisation. <em>Database eLearning</em>. N.d. Retrived July 2014 from <a href="db.grussell.org/ch4.html">db.grussell.org/ch4.html</a></p> </div></div>
<div class="chapter standard" id="chapter-13-database-development-process"><div class="chapter-title-wrap"><h3 class="chapter-number">13</h3><h2 class="chapter-title">Chapter 13 Database Development Process</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><p>A core aspect of software engineering is the subdivision of the development process into a series of phases, or steps, each of which focuses on one aspect of the development. The collection of these steps is sometimes referred to as the <em>software development life cycle (SDLC)</em>. The software product moves through this life cycle (sometimes repeatedly as it is refined or redeveloped) until it is finally retired from use. Ideally, each phase in the life cycle can be checked for correctness before moving on to the next phase.</p> <h2>Software Development Life Cycle – Waterfall</h2> <p>Let us start with an overview of the <em>waterfall model</em> such as you will find in most software engineering textbooks. This waterfall figure, seen in Figure 13.1, illustrates a general waterfall model that could apply to any computer system development. It shows the process as a strict sequence of steps where the output of one step is the input to the next and all of one step has to be completed before moving onto the next.</p> <div id="attachment_91" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-300x296.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-300x296.jpg" alt="SDLC-300x296" class="wp-image-91 size-full" height="296" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-300x296.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-300x296-65x64.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-300x296-225x222.jpg 225w" /></a> <p class="wp-caption-text">Figure 13.1. Waterfall model.</p> </div> <p>We can use the <em>waterfall process</em> as a means of identifying the tasks that are required, together with the input and output for each activity. What is important is the scope of the activities, which can be summarized as follows:</p> <ul><li><em>Establishing requirements</em> involves consultation with, and agreement among, stakeholders about what they want from a system, expressed as a statement of requirements.</li> <li><em>Analysis</em> starts by considering the statement of requirements and finishes by producing a system specification. The specification is a formal representation of what a system should do, expressed in terms that are independent of how it may be realized.</li> <li><em>Design</em> begins with a system specification, produces design documents and provides a detailed description of how a system should be constructed.</li> <li><em>Implementation</em> is the construction of a computer system according to a given design document and taking into account the environment in which the system will be operating (e.g., specific hardware or software available for the development). Implementation may be staged, usually with an initial system that can be validated and tested before a final system is released for use.</li> <li><em>Testing</em> compares the implemented system against the design documents and requirements specification and produces an acceptance report or, more usually, a list of errors and bugs that require a review of the analysis, design and implementation processes to correct (testing is usually the task that leads to the waterfall model iterating through the life cycle).</li> <li><em>Maintenance</em> involves dealing with changes in the requirements or the implementation environment, bug fixing or porting of the system to new environments (e.g., migrating a system from a standalone PC to a UNIX workstation or a networked environment). Since maintenance involves the analysis of the changes required, design of a solution, implementation and testing of that solution over the lifetime of a maintained software system, the waterfall life cycle will be repeatedly revisited.</li> </ul> <h2>Database Life Cycle</h2> <p>We can use the waterfall cycle as the basis for a model of database development that incorporates three assumptions:</p> <ol><li>We can separate the development of a database – that is, specification and creation of a schema to define data in a database – from the user processes that make use of the database.</li> <li>We can use the three-schema architecture as a basis for distinguishing the activities associated with a schema.</li> <li>We can represent the constraints to enforce the semantics of the data once within a database, rather than within every user process that uses the data.</li> </ol> <div id="attachment_92" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-Database-300x295.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-Database-300x295.jpg" alt="SDLC-Database-300x295" class="wp-image-92 size-full" height="295" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-Database-300x295.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-Database-300x295-65x63.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/SDLC-Database-300x295-225x221.jpg 225w" /></a> <p class="wp-caption-text">Figure 13.2. A waterfall model of the activities and their outputs for database development.</p> </div> <p>Using these assumptions and Figure 13.2, we can see that this diagram represents a model of the activities and their outputs for database development. It is applicable to any class of DBMS, not just a relational approach.</p> <p>Database application development is the process of obtaining real-world requirements, analyzing requirements, designing the data and functions of the system, and then implementing the operations in the system.</p> <h2>Requirements Gathering</h2> <p>The first step is <em>requirements gathering</em>. During this step, the database designers have to interview the customers (database users) to understand the proposed system and obtain and document the data and functional requirements. The result of this step is a document that includes the detailed requirements provided by the users.</p> <p>Establishing requirements involves consultation with, and agreement among, all the users as to what persistent data they want to store along with an agreement as to the meaning and interpretation of the data elements. The data administrator plays a key role in this process as they overview the business, legal and ethical issues within the organization that impact on the data requirements.</p> <p>The <em>data requirements document</em> is used to confirm the understanding of requirements with users. To make sure that it is easily understood, it should not be overly formal or highly encoded. The document should give a concise summary of all users’ requirements – not just a collection of individuals’ requirements – as the intention is to develop a single shared database.</p> <p>The requirements should not describe how the data is to be processed, but rather what the data items are, what attributes they have, what constraints apply and the relationships that hold between the data items.</p> <h2>Analysis</h2> <p>Data analysis begins with the statement of data requirements and then produces a conceptual data model. The aim of analysis is to obtain a detailed description of the data that will suit user requirements so that both high and low level properties of data and their use are dealt with. These include properties such as the possible range of values that can be permitted for attributes (e.g., in the school database example, the student course code, course title and credit points).</p> <p>The conceptual data model provides a shared, formal representation of what is being communicated between clients and developers during database development – it is focused on the data in a database, irrespective of the eventual use of that data in user processes or implementation of the data in specific computer environments. Therefore, a conceptual data model is concerned with the meaning and structure of data, but not with the details affecting how they are implemented.</p> <p>The conceptual data model then is a formal representation of what data a database should contain and the constraints the data must satisfy. This should be expressed in terms that are independent of how the model may be implemented. As a result, analysis focuses on the questions, &#8220;What is required?&#8221; not &#8220;How is it achieved?&#8221;</p> <h2>Logical Design</h2> <p>Database design starts with a conceptual data model and produces a specification of a logical schema; this will determine the specific type of database system (network, relational, object-oriented) that is required. The relational representation is still independent of any specific DBMS; it is another conceptual data model.</p> <p>We can use a relational representation of the conceptual data model as input to the logical design process. The output of this stage is a detailed relational specification, the logical schema, of all the tables and constraints needed to satisfy the description of the data in the conceptual data model. It is during this design activity that choices are made as to which tables are most appropriate for representing the data in a database. These choices must take into account various design criteria including, for example, flexibility for change, control of duplication and how best to represent the constraints. It is the tables defined by the logical schema that determine what data are stored and how they may be manipulated in the database.</p> <p>Database designers familiar with relational databases and SQL might be tempted to go directly to implementation after they have produced a conceptual data model. However, such a direct transformation of the relational representation to SQL tables does not necessarily result in a database that has all the desirable properties: completeness, integrity, flexibility, efficiency and usability. A good conceptual data model is an essential first step towards a database with these properties, but that does not mean that the direct transformation to SQL tables automatically produces a good database. This first step will accurately represent the tables and constraints needed to satisfy the conceptual data model description, and so will satisfy the completeness and integrity requirements, but it may be inflexible or offer poor usability. The first design is then flexed to improve the quality of the database design. <em>Flexing</em> is a term that is intended to capture the simultaneous ideas of bending something for a different purpose and weakening aspects of it as it is bent.</p> <p>Figure 13.3 summarizes the iterative (repeated) steps involved in database design, based on the overview given. Its main purpose is to distinguish the general issue of what tables should be used from the detailed definition of the constituent parts of each table – these tables are considered one at a time, although they are not independent of each other. Each iteration that involves a revision of the tables would lead to a new design; collectively they are usually referred to as <em>second-cut designs</em>, even if the process iterates for more than a single loop.</p> <div id="attachment_93" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Logical-Design-Steps-300x217.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Logical-Design-Steps-300x217.jpg" alt="Logical-Design-Steps-300x217" class="wp-image-93 size-full" height="217" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Logical-Design-Steps-300x217.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Logical-Design-Steps-300x217-65x47.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Logical-Design-Steps-300x217-225x162.jpg 225w" /></a> <p class="wp-caption-text">Figure 13.3. A summary of the iterative steps involved in database design.</p> </div> <p>First, for a given conceptual data model, it is not necessary that all the user requirements it represents be satisfied by a single database. There can be various reasons for the development of more than one database, such as the need for independent operation in different locations or departmental control over &#8220;their&#8221; data. However, if the collection of databases contains duplicated data and users need to access data in more than one database, then there are possible reasons that one database can satisfy multiple requirements, or issues related to data replication and distribution need to be examined.</p> <p>Second, one of the assumptions about database development is that we can separate the development of a database from the development of user processes that make use of it. This is based on the expectation that, once a database has been implemented, all data required by currently identified user processes have been defined and can be accessed; but we also require flexibility to allow us to meet future requirements changes. In developing a database for some applications, it may be possible to predict the common requests that will be presented to the database and so we can optimize our design for the most common requests.</p> <p>Third, at a detailed level, many aspects of database design and implementation depend on the particular DBMS being used. If the choice of DBMS is fixed or made prior to the design task, that choice can be used to determine design criteria rather than waiting until implementation. That is, it is possible to incorporate design decisions for a specific DBMS rather than produce a generic design and then tailor it to the DBMS during implementation.</p> <p>It is not uncommon to find that a single design cannot simultaneously satisfy all the properties of a good database. So it is important that the designer has prioritized these properties (usually using information from the requirements specification); for example, to decide if integrity is more important than efficiency and whether usability is more important than flexibility in a given development.</p> <p>At the end of our design stage, the logical schema will be specified by SQL data definition language (DDL) statements, which describe the database that needs to be implemented to meet the user requirements.</p> <h2>Implementation</h2> <p>Implementation involves the construction of a database according to the specification of a logical schema. This will include the specification of an appropriate storage schema, security enforcement, external schema and so on. Implementation is heavily influenced by the choice of available DBMSs, database tools and operating environment. There are additional tasks beyond simply creating a database schema and implementing the constraints – data must be entered into the tables, issues relating to the users and user processes need to be addressed, and the management activities associated with wider aspects of corporate data management need to be supported. In keeping with the DBMS approach, we want as many of these concerns as possible to be addressed within the DBMS. We look at some of these concerns briefly now.</p> <p>In practice, implementation of the logical schema in a given DBMS requires a very detailed knowledge of the specific features and facilities that the DBMS has to offer. In an ideal world, and in keeping with good software engineering practice, the first stage of implementation would involve matching the design requirements with the best available implementing tools and then using those tools for the implementation. In database terms, this might involve choosing vendor products with DBMS and SQL variants most suited to the database we need to implement. However, we don’t live in an ideal world and more often than not, hardware choice and decisions regarding the DBMS will have been made well in advance of consideration of the database design. Consequently, implementation can involve additional flexing of the design to overcome any software or hardware limitations.</p> <h2>Realizing the Design</h2> <p>After the logical design has been created, we need our database to be created according to the definitions we have produced. For an implementation with a relational DBMS, this will probably involve the use of SQL to create tables and constraints that satisfy the logical schema description and the choice of appropriate storage schema (if the DBMS permits that level of control).</p> <p>One way to achieve this is to write the appropriate SQL DDL statements into a file that can be executed by a DBMS so that there is an independent record, a text file, of the SQL statements defining the database. Another method is to work interactively using a database tool like SQL Server Management Studio or Microsoft Access. Whatever mechanism is used to implement the logical schema, the result is that a database, with tables and constraints, is defined but will contain no data for the user processes.</p> <h2>Populating the Database</h2> <p>After a database has been created, there are two ways of populating the tables – either from existing data or through the use of the user applications developed for the database.</p> <p>For some tables, there may be existing data from another database or data files. For example, in establishing a database for a hospital, you would expect that there are already some records of all the staff that have to be included in the database. Data might also be brought in from an outside agency (address lists are frequently brought in from external companies) or produced during a large data entry task (converting hard-copy manual records into computer files can be done by a data entry agency). In such situations, the simplest approach to populate the database is to use the import and export facilities found in the DBMS.</p> <p>Facilities to import and export data in various standard formats are usually available (these functions are also known in some systems as loading and unloading data). Importing enables a file of data to be copied directly into a table. When data are held in a file format that is not appropriate for using the import function, then it is necessary to prepare an application program that reads in the old data, transforms them as necessary and then inserts them into the database using SQL code specifically produced for that purpose. The transfer of large quantities of existing data into a database is referred to as a <em>bulk load</em>. Bulk loading of data may involve very large quantities of data being loaded, one table at a time so you may find that there are DBMS facilities to postpone constraint checking until the end of the bulk loading.</p> <h2>Guidelines for Developing an ER Diagram</h2> <p><strong>Note:</strong>  These are general guidelines that will assist in developing a strong basis for the actual database design (the logical model).</p> <ol><li>Document all entities discovered during the information-gathering stage.</li> <li>Document all attributes that belong to each entity. Select candidate and primary keys. Ensure that all non-key attributes for each entity are full-functionally dependent on the primary key.</li> <li>Develop an initial ER diagram and review it with appropriate personnel. (Remember that this is an iterative process.)</li> <li>Create new entities (tables) for multivalued attributes and repeating groups. Incorporate these new entities (tables) in the ER diagram. Review with appropriate personnel.</li> <li>Verify ER modeling by normalizing tables.</li> </ol> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>analysis</strong>: starts by considering the statement of requirements and finishes by producing a system specification</p> <p><strong>bulk load</strong>: the transfer of large quantities of existing data into a database</p> <p><strong>data requirements document</strong>:<strong> </strong>used to confirm the understanding of requirements with the user</p> <p><strong>design</strong>: begins with a system specification, produces design documents and provides a detailed description of how a system should be constructed</p> <p><strong>establishing requirements</strong>: involves consultation with, and agreement among, stakeholders as to what they want from a system; expressed as a statement of requirements</p> <p><strong>flexing</strong>: a term that captures the simultaneous ideas of bending something for a different purpose and weakening aspects of it as it is bent</p> <p><strong>implementation</strong>: the construction of a computer system according to a given design document</p> <p><strong>maintenance</strong>: involves dealing with changes in the requirements or the implementation environment, bug fixing or porting of the system to new environments</p> <p><strong>requirements gathering</strong>: a process during which the database designer interviews the database user to understand the proposed system and obtain and document the data and functional requirements</p> <p><strong>second-cut designs</strong>:<strong> </strong>the collection of iterations that each involves a revision of the tables that lead to a new design</p> <p><strong>software development life cycle (SDLC)</strong>: the series of steps involved in the database development process</p> <p><strong>testing</strong>: compares the implemented system against the design documents and requirements specification and produces an acceptance report</p> <p><strong>waterfall model</strong>: shows the database development process as a strict sequence of steps where the output of one step is the input to the next</p> <p><strong>waterfall process</strong>:<strong> </strong>a means of identifying the tasks required for database development, together with the input and output for each activity (see <em>waterfall model)</em></p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Describe the waterfall model. List the steps.</li> <li>What does the acronym SDLC mean, and what does an SDLC portray?</li> <li>What needs to be modified in the waterfall model to accommodate database design?</li> <li>Provide the iterative steps involved in database design.</li> </ol> </div> <h2>Attribution</h2> <p><span style="color: #1f1f1d">This chapter of </span><em style="color: #1f1f1d">Database Design </em>(including all images, except as otherwise noted) <span style="color: #1f1f1d">is a derivative copy of <a href="http://www.oercommons.org/courses/the-database-development-life-cycle/view">The Database Development Life Cycle</a> </span> by the Open University licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License</a>.</p> <p>The following material was written by Adrienne Watt:</p> <ol><li>Key Terms</li> <li>Exercises</li> </ol> </div></div>
<div class="chapter standard" id="chapter-14-database-users"><div class="chapter-title-wrap"><h3 class="chapter-number">14</h3><h2 class="chapter-title">Chapter 14 Database Users</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt</h2><h2>End Users</h2> <p>End users are the people <span>whose jobs</span> require access to a database for querying, updating and generating reports.</p> <h3>Application user</h3> <p>The application user is someone who accesses an existing application program to perform daily tasks.</p> <h3>Sophisticated user</h3> <p>Sophisticated users are those who have their own way of accessing the database. This means they do not use the application program provided in the system. Instead, they might define their own application or describe their need directly by using query languages. These s<span>pecialized users</span> maintain their personal databases by using ready-made program packages that provide easy-to-use menu driven commands, such as MS Access.</p> <h3>Application Programmers</h3> <p>These users implement specific application programs to access the stored data. They must be familiar with the DBMSs to accomplish their task.</p> <h3>Database Administrators (DBA)</h3> <p>This may be one person or a group of people in an organization responsible for authorizing access to the database, monitoring its use and managing all of the resources to support the use of the entire database system.</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>application programmer</strong>: user who implements specific application programs to access the stored data</p> <p><strong>application user</strong>: accesses an existing application program to perform daily tasks.</p> <p><strong>database administrator (DBA)</strong>: responsible for authorizing access to the database, monitoring its use and managing all the resources to support the use of the entire database system</p> <p><strong>end user</strong>: people whose jobs require access to a database for querying, updating and generating reports</p> <p><strong>sophisticated user</strong>: those who use other methods, other than the application program, to access the database</p> </div> <p>There are no exercises provided for this chapter.</p> </div></div>
<div class="chapter standard" id="sql-structured-query-language"><div class="chapter-title-wrap"><h3 class="chapter-number">15</h3><h2 class="chapter-title">Chapter 15 SQL Structured Query Language</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt &#038; Nelson Eng</h2><p><em>Structured Query Language</em> (SQL) is a database language designed for managing data held in a relational database management system. SQL was initially developed by IBM in the early 1970s (Date 1986). The initial version, called <em>SEQUEL</em> (Structured English Query Language), was designed to manipulate and retrieve data stored in IBM’s quasi-relational database management system, System R. Then in the late 1970s, Relational Software Inc., which is now Oracle Corporation, introduced the first commercially available implementation of SQL, Oracle V2 for VAX computers.</p> <p>Many of the currently available relational DBMSs, such as Oracle Database, Microsoft SQL Server (shown in Figure 15.1), MySQL, IBM DB2, IBM Informix and Microsoft Access, use SQL.</p> <div id="attachment_349" style="width: 410px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer.jpg"><img class="wp-image-349" alt="SQLServer" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer.jpg" height="303" width="400" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer.jpg 588w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer-300x227.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer-65x49.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer-225x170.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/SQLServer-350x264.jpg 350w" /></a> <p class="wp-caption-text">Figure 15.1. Example of Microsoft SQL Server, by A. Watt.</p> </div> <p>In a DBMS, the SQL database language is used to:</p> <ul><li>Create the database and table structures</li> <li>Perform basic data management chores (add, delete and modify)</li> <li>Perform complex queries to transform raw data into useful information</li> </ul> <p>In this chapter, we will focus on using SQL to create the database and table structures, mainly using SQL as a data definition language (<em>DDL</em>). In Chapter 16, we will use SQL as a data manipulation language (<em>DML</em>) to insert, delete, select and update data within the database tables.</p> <h2>Create Database</h2> <p>The major SQL DDL statements are CREATE DATABASE and CREATE/DROP/ALTER TABLE. The SQL statement CREATE is used to create the database and table structures.</p> <p><strong>Example: CREATE DATABASE SW</strong></p> <p>A new database named <strong>SW</strong> is created by the SQL statement CREATE  DATABASE SW. Once the database is created, the next step is to create the database tables.</p> <p>The general format for the CREATE TABLE command is:</p> <div class="textbox shaded">CREATE TABLE &lt;tablename&gt;<br /> (<br /> ColumnName, Datatype, Optional Column Constraint,<br /> ColumnName, Datatype, Optional Column Constraint,<br /> Optional table Constraints<br /> );</div> <p>Tablename is the name of the database table such as <strong>Employee</strong>. Each field in the CREATE TABLE has three parts (see above):</p> <ol><li>ColumnName</li> <li>Data type</li> <li>Optional Column Constraint</li> </ol> <h3>ColumnName</h3> <p>The ColumnName must be unique within the table. Some examples of ColumnNames are FirstName and LastName.</p> <h2>Data Type</h2> <p>The data type, as described below, must be a system data type or a user-defined data type. Many of the data types have a size such as CHAR(35) or Numeric(8,2).</p> <p><b>Bit</b> <b>–</b>Integer data with either a 1 or 0 value</p> <p><b>Int –</b>Integer (whole number) data from -2^31 (-2,147,483,648) through 2^31 &#8211; 1  (2,147,483,647)</p> <p><b>Smallint –</b>Integer data from 2^15 (-32,768) through 2^15 &#8211; 1 (32,767)</p> <p><b>Tinyint</b> <b>–</b>Integer data from 0 through 255</p> <p><b>Decimal –</b>Fixed precision and scale numeric data from -10^38 -1 through 10^38</p> <p><b>Numeric –</b>A synonym for <b>decimal</b></p> <p><b>Timestamp –</b>A database-wide unique number</p> <p><b>Uniqueidentifier –</b>A globally unique identifier (GUID)</p> <p><b>Money </b>&#8211; Monetary data values from -2^63 (-922,337,203,685,477.5808) through 2^63 &#8211; 1 (+922,337,203,685,477.5807), with accuracy to one-ten-thousandth of a monetary unit</p> <p><b>Smallmoney –</b>Monetary data values from -214,748.3648 through +214,748.3647, with accuracy to one-ten-thousandth of a monetary unit</p> <p><b>Float –</b>Floating precision number data from -1.79E + 308 through 1.79E + 308</p> <p><b>Real –</b>Floating precision number data from -3.40E + 38 through 3.40E + 38</p> <p><b>Datetime –</b>Date and time data from January 1, 1753, to December 31, 9999, with an accuracy of one-three-hundredths of a second, or 3.33 milliseconds</p> <p><b>Smalldatetime –</b>Date and time data from January 1, 1900, through June 6, 2079, with an accuracy of one minute</p> <p><b>Char –</b>Fixed-length non-Unicode character data with a maximum length of 8,000 characters</p> <p><b>Varchar –</b>Variable-length non-Unicode data with a maximum of 8,000 characters</p> <p><b>Text –</b>Variable-length non-Unicode data with a maximum length of 2^31 &#8211; 1 (2,147,483,647) characters</p> <p><b>Binary –</b>Fixed-length binary data with a maximum length of 8,000 bytes</p> <p><b>Varbinary –</b>Variable-length binary data with a maximum length of 8,000 bytes</p> <p><b>Image </b><b>–</b> <b></b>Variable-length binary data with a maximum length of 2^31 &#8211; 1 (2,147,483,647) bytes</p> <h2>Optional Column Constraints</h2> <p>The Optional ColumnConstraints are NULL, NOT NULL, UNIQUE, PRIMARY KEY and DEFAULT, used to initialize a value for a new record. The column constraint NULL indicates that null values are allowed, which means that a row can be created without a value for this column. The column constraint NOT NULL indicates that a value must be supplied when a new row is created.</p> <p>To illustrate, we will use the SQL statement CREATE TABLE EMPLOYEES to create the employees table with 16 attributes or fields.</p> <div class="textbox shaded">USE SW<br /> CREATE TABLE EMPLOYEES<br /> (<br /> EmployeeNo                      CHAR(10)             NOT NULL           UNIQUE,<br /> DepartmentName            CHAR(30)             NOT NULL           DEFAULT “Human Resources”,<br /> FirstName                           CHAR(25)             NOT NULL,<br /> LastName                            CHAR(25)             NOT NULL,<br /> Category                              CHAR(20)             NOT NULL,<br /> HourlyRate                         CURRENCY          NOT NULL,<br /> TimeCard                             LOGICAL              NOT NULL,<br /> HourlySalaried                   CHAR(1)               NOT NULL,<br /> EmpType                             CHAR(1)               NOT NULL,<br /> Terminated                         LOGICAL              NOT NULL,<br /> ExemptCode                       CHAR(2)               NOT NULL,<br /> Supervisor                           LOGICAL              NOT NULL,<br /> SupervisorName                CHAR(50)             NOT NULL,<br /> BirthDate                             DATE                     NOT NULL,<br /> CollegeDegree                     CHAR(5)               NOT NULL,<br /> CONSTRAINT                     Employee_PK    PRIMARY KEY(EmployeeNo<br /> );</div> <p>The first field is EmployeeNo with a field type of CHAR. For this field, the field length is 10 characters, and the user cannot leave this field empty (NOT NULL).</p> <p>Similarly, the second field is DepartmentName with a field type CHAR of length 30. After all the table columns are defined, a table constraint, identified by the word CONSTRAINT, is used to create the primary key:</p> <div class="textbox">CONSTRAINT     EmployeePK      PRIMARY KEY(EmployeeNo)</div> <p>We will discuss the constraint property further later in this chapter.</p> <p>Likewise, we can create a Department  table,  a Project table and an Assignment table using the CREATE TABLE SQL DDL command as shown in the below example.</p> <div class="textbox shaded">USE SW<br /> CREATE TABLE DEPARTMENT<br /> (<br /> DepartmentName Char(35)  NOT NULL,<br /> BudgetCode     Char(30)  NOT NULL,<br /> OfficeNumber   Char(15)  NOT NULL,<br /> Phone          Char(15)  NOT NULL,<br /> CONSTRAINT DEPARTMENT_PK PRIMARY KEY(DepartmentName)<br /> );</div> <p>In this example, a project table is created with seven fields: ProjectID, ProjectName, Department, MaxHours, StartDate, and EndDate.</p> <div class="textbox shaded">USE SW<br /> CREATE TABLE PROJECT<br /> (<br /> ProjectID       Int  NOT NULL IDENTITY (1000,100),<br /> ProjectName     Char(50) NOT NULL,<br /> Department      Char(35) NOT NULL,<br /> MaxHours        Numeric(8,2)  NOT NULL DEFAULT 100,<br /> StartDate       DateTime NULL,<br /> EndDate         DateTime NULL,<br /> CONSTRAINT      ASSIGNMENT_PK  PRIMARY KEY(ProjectID)<br /> );</div> <p>In this last example, <span>an assignment table is created with three fields: ProjectID, EmployeeNumber, and HoursWorked. The assignment table is used to record who (EmployeeNumber) and how much time(HoursWorked) an employee worked on the particular project(ProjectID).<br /> </span></p> <div class="textbox shaded">USE SW<br /> CREATE TABLE ASSIGNMENT<br /> (<br /> ProjectID       Int  NOT NULL,<br /> EmployeeNumber  Int  NOT NULL,<br /> HoursWorked     Numeric(6,2)  NULL,<br /> );</div> <h2>Table Constraints</h2> <p>Table constraints are identified by the CONSTRAINT keyword and can be used to implement various constraints described below.</p> <h3>IDENTITY constraint</h3> <p>We can use the optional column constraint IDENTITY to provide a unique, incremental value for that column. Identity columns are often used with the PRIMARY KEY constraints to serve as the unique row identifier for the table. The IDENTITY property can be assigned to a column with a tinyint, smallint, int, decimal or numeric data type. This constraint:</p> <ul><li>Generates sequential numbers</li> <li>Does not enforce entity integrity</li> <li>Only one column can have the IDENTITY property</li> <li>Must be defined as an integer, numeric or decimal data type</li> <li>Cannot update a column with the IDENTITY property</li> <li>Cannot contain NULL values</li> <li>Cannot bind defaults and default constraints to the column</li> </ul> <p>For IDENTITY[(seed, increment)]</p> <ul><li>Seed – the initial value of the identity column</li> <li>Increment – the value to add to the last increment column</li> </ul> <p>We will use another database example to further illustrate the SQL DDL statements by creating the table tblHotel in this HOTEL database.</p> <div class="textbox shaded">CREATE TABLE  tblHotel<br /> (<br /> HotelNo                 Int                    IDENTITY (1,1),<br /> Name                    Char(50)          NOT NULL,<br /> Address                 Char(50)          NULL,<br /> City                       Char(25)          NULL,<br /> )</div> <p>UNIQUE constraint</p> <p>The UNIQUE constraint prevents duplicate values from being entered into a column.</p> <ul><li>Both PK and UNIQUE constraints are used to enforce entity integrity.</li> <li>Multiple UNIQUE constraints can be defined for a table.</li> <li>When a UNIQUE constraint is added to an existing table, the existing data is always validated.</li> <li>A UNIQUE constraint can be placed on columns that accept nulls. <em>O</em><i>nly one row can be NULL.</i></li> <li>A UNIQUE constraint automatically creates a unique index on the selected column.</li> </ul> <p>This is the general syntax for the UNIQUE constraint:</p> <div class="textbox">[CONSTRAINT constraint_name]<br /> UNIQUE [CLUSTERED | NONCLUSTERED]<br /> (col_name [, col_name2 […, col_name16]])<br /> [ON segment_name]</div> <p><span>This is an examle using the UNIQUE constraint.<br /> </span></p> <div class="textbox shaded">CREATE TABLE EMPLOYEES<br /> (<br /> EmployeeNo                      CHAR(10)             NOT NULL           UNIQUE,<br /> )</div> <h3>FOREIGN KEY constraint</h3> <p>The FOREIGN KEY (FK) constraint defines a column, or combination of columns, whose values match the PRIMARY KEY  (PK) of another table.</p> <ul><li>Values in an FK are automatically updated when the PK values in the associated table are updated/changed.</li> <li>FK constraints must reference PK or the UNIQUE constraint of another table.</li> <li>The number of columns for FK must be same as PK or UNIQUE constraint.</li> <li>If the WITH NOCHECK option is used, the FK constraint will not validate existing data in a table.</li> <li>No index is created on the columns that participate in an FK constraint.</li> </ul> <p>This is the general syntax for the FOREIGN KEY constraint:</p> <div class="textbox">[CONSTRAINT constraint_name]<br /> [FOREIGN KEY (col_name [, col_name2 […, col_name16]])]<br /> REFERENCES [owner.]ref_table [(ref_col [, ref_col2 […, ref_col16]])]</div> <p>In this example, the field HotelNo in the tblRoom table is a FK to the field HotelNo in the tblHotel table shown previously.</p> <div class="textbox shaded">USE HOTEL<br /> GO<br /> CREATE TABLE  tblRoom<br /> (<br /> HotelNo           Int                    NOT NULL ,<br /> RoomNo  Int                    NOT NULL,<br /> Type                    Char(50)          NULL,<br /> Price                   Money             NULL,<br /> PRIMARY KEY (HotelNo, RoomNo),<br /> FOREIGN KEY (HotelNo) REFERENCES tblHotel<br /> )</div> <h3>CHECK constraint</h3> <p>The CHECK constraint restricts values that can be entered into a table.</p> <ul><li>It can contain search conditions similar to a WHERE clause.</li> <li>It can reference columns in the same table.</li> <li>The data validation rule for a CHECK constraint must evaluate to a boolean expression.</li> <li>It can be defined for a column that has a rule bound to it.</li> </ul> <p>This is the general syntax for the CHECK constraint:</p> <div class="textbox">[CONSTRAINT constraint_name]<br /> CHECK [NOT FOR REPLICATION] (expression)</div> <p>In this example, the Type field is restricted to have only the types &#8216;Single&#8217;, &#8216;Double&#8217;, &#8216;Suite&#8217; or &#8216;Executive&#8217;.</p> <div class="textbox shaded">USE HOTEL<br /> GO<br /> CREATE TABLE  tblRoom<br /> (<br /> HotelNo           Int                    NOT NULL,<br /> RoomNo  Int                    NOT NULL,<br /> Type                    Char(50)          NULL,<br /> Price       Money                         NULL,<br /> PRIMARY KEY (HotelNo, RoomNo),<br /> FOREIGN KEY (HotelNo) REFERENCES tblHotel<br /> CONSTRAINT Valid_Type<br /> CHECK (Type IN (‘Single’, ‘Double’, ‘Suite’, ‘Executive’))<br /> )</div> <p>In this second example, the employee hire date should be before January 1, 2004, or have a salary limit of $300,000.</p> <div class="textbox shaded">GO<br /> CREATE TABLE SALESREPS<br /> (<br /> Empl_num     Int Not Null<br /> CHECK (Empl_num BETWEEN 101 and 199),<br /> Name              Char (15),<br /> Age      Int        CHECK (Age &gt;= 21),<br /> Quota                         Money                         CHECK (Quota &gt;= 0.0),<br /> HireDate       DateTime,<br /> CONSTRAINT  QuotaCap CHECK ((HireDate &lt; “01-01-2004”) OR (Quota &lt;=300000))<br /> )</div> <h3>DEFAULT constraint</h3> <p>The DEFAULT constraint is used to supply a value that is automatically added for a column if the user does not supply one.</p> <ul><li>A column can have only one DEFAULT.</li> <li>The DEFAULT constraint cannot be used on columns with a timestamp data type or identity property.</li> <li>DEFAULT constraints are automatically bound to a column when they are created.</li> </ul> <p>The general syntax for the DEFAULT constraint is:</p> <div class="textbox">[CONSTRAINT constraint_name]<br /> DEFAULT {constant_expression | niladic-function | NULL}<br /> [FOR col_name]</div> <p>This example sets the default for the city field to &#8216;Vancouver&#8217;.</p> <div class="textbox shaded">USE HOTEL<br /> ALTER TABLE tblHotel<br /> Add CONSTRAINT df_city DEFAULT ‘Vancouver’ FOR City</div> <h2>User Defined Types</h2> <p>User defined types are always based on system-supplied data type. They can enforce data integrity and they allow nulls.</p> <p>To create a user-defined data type in SQL Server, choose types under &#8220;Programmability&#8221; in your database. Next, right click and choose ‘New’ &#8211;&gt;‘User-defined data type’ or execute the sp_addtype system stored procedure. After this, type:</p> <div class="textbox">sp_addtype ssn, &#8216;varchar(11)&#8217;, &#8216;NOT NULL&#8217;</div> <p>This will add a new user-defined data type called SIN with nine characters.</p> <p>In this example, the field EmployeeSIN uses the user-defined data type SIN.</p> <div class="textbox shaded">CREATE TABLE SINTable<br /> (<br /> EmployeeID        INT Primary Key,<br /> EmployeeSIN    SIN,<br /> CONSTRAINT CheckSIN<br /> CHECK (EmployeeSIN LIKE<br /> ‘ [0-9][0-9][0-9] &#8211; [0-9][0-9] [0-9] &#8211; [0-9][0-9][0-9] ‘)<br /> )</div> <h3>ALTER TABLE<b><br /> </b></h3> <p>You can use ALTER TABLE statements to add and drop constraints.</p> <ul><li>ALTER TABLE allows columns to be removed.</li> <li>When a constraint is added, all existing data are verified for violations.</li> </ul> <p>In this example, we use the ALTER TABLE statement to the IDENTITY property to a ColumnName field.</p> <div class="textbox shaded">USE HOTEL<br /> GO<br /> ALTER TABLE  tblHotel<br /> ADD CONSTRAINT unqName UNIQUE (Name)</div> <p>Use the ALTER TABLE statement to add a column with the IDENTITY property such as ALTER TABLE TableName.</p> <div class="textbox shaded">ADD<br /> ColumnName         int    IDENTITY(seed, increment)</div> <h3>DROP TABLE</h3> <p>The DROP TABLE will remove a table from the database. Make sure you have the correct database selected.</p> <div class="textbox">DROP TABLE tblHotel</div> <p>Executing the above SQL DROP TABLE statement will remove the table tblHotel from the database.</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>DDL</strong>: abbreviation for <em>data definition language</em></p> <p><strong>DML</strong>: abbreviation for <em>data manipulation language</em></p> <p><strong>SEQUEL</strong>: acronym for <em>Structured English Query Language; </em>designed to manipulate and retrieve data stored in IBM’s quasi-relational database management system, System R</p> <p><strong>Structured Query Language (SQL)</strong>: a database language designed for managing data held in a relational database management system</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <ol><li>Using the information for the Chapter 9 exercise, implement the schema using Transact SQL (show SQL statements for each table). Implement the constraints as well.</li> <li>Create the table shown here in SQL Server and show the statements you used.<br /> Table: Employee <table style="color: #1f1f1d; border-spacing: 0px;" border="1" cellpadding="0"><tbody><tr><td valign="top" style="width: 285px;"><strong>ATTRIBUTE (FIELD) NAME</strong></td> <td valign="top" style="width: 240px;"><strong>DATA DECLARATION</strong></td> </tr> <tr><td valign="top" style="width: 285px;">EMP_NUM</td> <td valign="top" style="width: 240px;">CHAR(3)</td> </tr> <tr><td valign="top" style="width: 285px;">EMP_LNAME</td> <td valign="top" style="width: 240px;">VARCHAR(15)</td> </tr> <tr><td valign="top" style="width: 285px;">EMP_FNAME</td> <td valign="top" style="width: 240px;">VARCHAR(15)</td> </tr> <tr><td valign="top" style="width: 285px;">EMP_INITIAL</td> <td valign="top" style="width: 240px;">CHAR(1)</td> </tr> <tr><td valign="top" style="width: 285px;">EMP_HIREDATE</td> <td valign="top" style="width: 240px;">DATE</td> </tr> <tr><td valign="top" style="width: 285px;">JOB_CODE</td> <td valign="top" style="width: 240px;">CHAR(3)</td> </tr> </tbody> </table> </li> <li>Having created the table structure in question 2, write the SQL code to enter the rows for the table shown in Figure 15.1. <div id="attachment_324" style="width: 510px" class="wp-caption alignnone"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1.jpg"><img class="wp-image-324" alt="Ch15 Exercise Fig15.1" src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1.jpg" height="174" width="500" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1.jpg 465w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1-300x104.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1-65x22.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1-225x78.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/03/Ch15-Exercise-Fig15.1-350x121.jpg 350w" /></a> <p class="wp-caption-text">Figure 15.2. Employee table with data for questions 4-10, by A. Watt.</p> </div> <p>Use Figure 15.2 to answer questions 4 to 10.</p></li> <li>Write the SQL code to change the job code to 501 for the person whose personnel number is 107. After you have completed the task, examine the results, and then reset the job code to its original value.</li> <li>Assuming that the data shown in the Employee table have been entered, write the SQL code that lists all attributes for a job code of 502.</li> <li>Write the SQL code to delete the row for the person named William Smithfield, who was hired on June 22, 2004, and whose job code classification is 500. (<i>Hint</i>: Use logical operators to include all the information given in this problem.)</li> <li>Add the attributes EMP_PCT and PROJ_NUM to the Employee table. The EMP_PCT is the bonus percentage to be paid to each employee.</li> <li>Using a single command, write the SQL code that will enter the project number (PROJ_NUM) = 18 for all employees whose job classification (JOB_CODE) is 500.</li> <li>Using a single command, write the SQL code that will enter the project number (PROJ_NUM) = 25 for all employees whose job classification (JOB_CODE) is 502 or higher.</li> <li>Write the SQL code that will change the PROJ_NUM to 14 for those employees who were hired before January 1, 1994, and whose job code is at least 501. (You may assume that the table will be restored to its original condition preceding this question.)</li> </ol> <p><strong>Also see</strong>  <em>Appendix C: SQL Lab with Solution</em></p> </div> <h2>References</h2> <p>Date, C.J. <em>Relational Database Selected Writings.</em> Reading: Mass: Addison-Wesley Publishing Company Inc.,  1986, p. 269-311.</p> </div></div>
<div class="chapter standard" id="chapter-sql-dml"><div class="chapter-title-wrap"><h3 class="chapter-number">16</h3><h2 class="chapter-title">Chapter 16 SQL Data Manipulation Language</h2></div><div class="ugc chapter-ugc"><h2 class="chapter-author">Adrienne Watt &#038; Nelson Eng</h2><p style="text-align: left; text-align: center;">The SQL data manipulation language (DML) is used to query and modify database data. In this chapter, we will describe how to use the SELECT, INSERT, UPDATE, and DELETE SQL DML command statements, defined below.</p> <ul><li><em>SELECT</em>  &#8211; to query data in the database</li> <li><em>INSERT</em>  &#8211; to insert data into a table</li> <li><em>UPDATE</em> &#8211; to update data in a table</li> <li><em>DELETE</em> &#8211; to delete data from a table</li> </ul> <p>In the SQL DML statement:</p> <ul><li>Each clause in a statement should begin on a new line.</li> <li>The beginning of each clause should line up with the beginning of other clauses.</li> <li>If a clause has several parts, they should appear on separate lines and be indented under the start of the clause to show the relationship.</li> <li>Upper case letters are used to represent reserved words.</li> <li>Lower case letters are used to represent user-defined words.</li> </ul> <h1>SELECT Statement</h1> <p>The SELECT statement, or command, allows the user to extract data from tables, based on specific criteria. It <span>is processed according to the following sequence:</span></p> <p>SELECT DISTINCT item(s)<br /> FROM  table(s)<br /> WHERE  predicate<br /> GROUP BY  field(s)<br /> ORDER BY fields</p> <p>We can use the SELECT statement to generate an employee phone list from the Employees table as follows:</p> <div class="textbox shaded">SELECT  FirstName, LastName, phone<br /> FROM Employees<br /> ORDER BY LastName</div> <p><span style="color: #333333">This action will</span> display employee&#8217;s last name, first name, and phone number from the Employees table, seen in Table 16.1.</p> <table><tbody><tr><td><strong>Last Name</strong></td> <td><strong>First Name</strong></td> <td><strong>Phone Number</strong></td> </tr> <tr><td>Hagans</td> <td>Jim</td> <td><span>604-232-3232</span></td> </tr> <tr><td>Wong</td> <td>Bruce</td> <td><span>604-244-2322</span></td> </tr> </tbody> </table> <p><em>Table 16.1. Employees table.</em></p> <p>In this next example, we will use a Publishers table (Table 16.2). (You will notice that Canada is mispelled in the <em>Publisher Country</em> field for Example Publishing and ABC Publishing. <span>To correct mispelling, use the UPDATE statement to standardize the country field to Canada &#8211; see UPDATE statement later in this chapter.)</span></p> <table><tbody><tr><td><strong>Publisher Name</strong></td> <td><strong>Publisher City</strong></td> <td><strong>Publisher Province</strong></td> <td><strong>Publisher Country</strong></td> </tr> <tr><td>Acme Publishing</td> <td>Vancouver</td> <td>BC</td> <td>Canada</td> </tr> <tr><td>Example Publishing</td> <td>Edmonton</td> <td>AB</td> <td>Cnada</td> </tr> <tr><td>ABC Publishing</td> <td>Toronto</td> <td>ON</td> <td>Canda</td> </tr> </tbody> </table> <p><em>Table 16.2. Publishers table.</em></p> <p>If you add the publisher&#8217;s name and city, you would use the SELECT statement followed by the fields name separated by a comma:</p> <div class="textbox shaded">SELECT PubName, city<br /> FROM Publishers</div> <p>This action will display the publisher&#8217;s name and city from the Publishers table.</p> <p><span style="color: #333333">If you just want the publisher&#8217;s name under the display name city, you would use the SELECT statement with <em>no comma</em> separating pub_name and city:</span></p> <div class="textbox shaded">SELECT <span>PubName city</span><br /> FROM Publishers</div> <p><span>Performing this action will dis</span>play only the pub_name from the Publishers table with a &#8220;city&#8221; heading.  If you do not include the comma, SQL Server assumes you want a new column name for pub_name.<strong> </strong></p> <h2>SELECT statement with WHERE criteria</h2> <p><span>Sometimes you might want to focus on a portion of the Publishers table, such as only publishers that are in Vancouver. In this situation, you would use the SELECT statement with the WHERE criterion, i.e., WHERE city = &#8216;Vancouver&#8217;.</span></p> <p>These first two examples illustrate how to limit record<span> selection with the WHERE criterion using BETWEEN. Each of these examples give the same results for store items with between 20 and 50 items in stock.</span></p> <p>Example #1 uses the quantity, <em>qty BETWEEN 20 and 50</em>.</p> <div class="textbox shaded">SELECT StorID, qty, TitleID<br /> FROM Sales<br /> WHERE qty BETWEEN 20 and 50  <i>(includes the 20 and 50)</i></div> <p>Example #2, on the other hand, uses <em>qty &gt;=20 and qty &lt;=50</em> .</p> <div class="textbox shaded">SELECT <span>StorID, qty, TitleID</span><br /> FROM Sales<br /> WHERE qty &gt;= 20 and qty  &lt;= 50</div> <p><span style="color: #333333">Example #3 illustrates how to limit record selection with the WHERE criterion using NOT BETWEEN.</span></p> <div class="textbox shaded">SELECT <span>StorID, qty, TitleID</span><br /> FROM Sales<br /> WHERE qty NOT BETWEEN 20 and 50</div> <p>The next two examples show two different ways to limit record selection with the WHERE criterion using IN, with each yielding the same results.</p> <p>Example #4 shows how to select records using<em> province= </em>as part of the WHERE statement.</p> <div class="textbox shaded">SELECT *<br /> FROM Publishers<br /> WHERE province = &#8216;BC&#8217; OR province = &#8216;AB&#8217; OR province = &#8216;ON&#8217;</div> <p>Example #5 select records using <em>province IN</em> as part of the WHERE statement.</p> <div class="textbox shaded">SELECT *<br /> FROM Publishers<br /> WHERE province IN (&#8216;BC&#8217;, &#8216;AB&#8217;, &#8216;ON&#8217;)</div> <p>The final two examples illustrate how NULL and NOT NULL can be used to select records. For these examples, a Books table (not shown) would be used that contains fields called Title, Quantity, and Price (of book). Each publisher has a Book<span>s</span><span> table that lists all of its books.</span></p> <p><span style="color: #333333">Example #6 uses NULL.</span></p> <div class="textbox shaded">SELECT price, title<br /> FROM Books<br /> WHERE price IS NULL</div> <p>Example #7 uses NOT NULL.</p> <div class="textbox shaded">SELECT price, title<br /> FROM Books<br /> WHERE price IS NOT NULL</div> <h2><span style="color: #333333">Using wildcards in the LIKE clause</span></h2> <p>The LIKE keyword selects rows containing fields that match specified portions of character strings. LIKE is used with char, varchar, text, datetime and smalldatetime data. A <em>wildcard </em>allows the user to match fields that contain certain letters. For example, the wildcard province = &#8216;N%&#8217; would give all provinces that start with the letter &#8216;N&#8217;. Table 16.3 shows four ways to specify wildcards in the SELECT statement in regular express format.</p> <table style="width: 622px; border-spacing: 0px;" border="0" cellpadding="0"><tbody><tr><td valign="top" style="width: 105px;"><p style="text-align: center;">%</p> </td> <td style="text-align: left; width: 517px;" valign="top">Any string of zero or more characters</td> </tr> <tr><td valign="top" style="width: 105px;"><p style="text-align: center;">_</p> </td> <td valign="top" style="width: 517px;">Any single character</td> </tr> <tr><td valign="top" style="width: 105px;"><p style="text-align: center;">[ ]</p> </td> <td valign="top" style="width: 517px;">Any single character within the specified range (e.g., [a-f]) or set (e.g., [abcdef])</td> </tr> <tr><td valign="top" style="width: 105px;"><p style="text-align: center;">[^]</p> </td> <td valign="top" style="width: 517px;">Any single character not within the specified range (e.g., [^a &#8211; f]) or set (e.g., [^abcdef])</td> </tr> </tbody> </table> <p><em>Table 16.3. How to specify wildcards in the SELECT statement.</em></p> <p>In example #1, LIKE &#8216;Mc%&#8217; searches for all last names that begin with the letters &#8220;Mc&#8221; (e.g., McBadden).</p> <div class="textbox shaded">SELECT LastName<br /> FROM Employees<br /> WHERE <span>LastName</span> LIKE &#8216;Mc%&#8217;</div> <p>For example #2: LIKE &#8216;%inger&#8217; searches for all last names that end with the letters &#8220;inger&#8221; (e.g., Ringer, Stringer).</p> <div class="textbox shaded">SELECT <span>LastName</span><br /> FROM Employees<br /> WHERE <span>LastName</span> LIKE &#8216;%inger&#8217;</div> <p>In, example #3: LIKE &#8216;%en%&#8217; searches for all last names that have the letters &#8220;en&#8221; (e.g., Bennett, Green, McBadden).</p> <div class="textbox shaded">SELECT <span>LastName</span><br /> FROM Employees<br /> WHERE <span>LastName</span> LIKE &#8216;%en%&#8217;</div> <h2>SELECT statement with ORDER BY clause</h2> <p>You use the ORDER BY clause to sort the records in the resulting list. Use <em>ASC </em>to sort the results in ascending order and <em>DESC </em>to sort the results in descending order.</p> <p>For example, with ASC:</p> <div class="textbox shaded">SELECT *<br /> FROM Employees<br /> ORDER BY HireDate ASC</div> <p>And with DESC:</p> <div class="textbox shaded">SELECT *<br /> FROM Books<br /> ORDER B<span style="color: #000000">Y type, pric</span>e DESC</div> <h2>SELECT statement with GROUP BY clause</h2> <p>The <em>GROUP BY </em>clause is used to create one output row per each group and produces summary values for the selected columns, as shown below.</p> <div class="textbox">SELECT type<br /> FROM Books<br /> GROUP BY type</div> <p>Here is an example using the above statement.</p> <div class="textbox shaded">SELECT type AS &#8216;Type&#8217;, MIN(price) AS &#8216;Minimum Price&#8217;<br /> FROM Books<br /> WHERE royalty &gt; 10<br /> GROUP BY type</div> <p>If the SELECT statement includes a WHERE criterion where <em>price is not null</em>,</p> <div class="textbox">SELECT type, price<br /> FROM Books<br /> WHERE price is not null</div> <p>then a statement with the GROUP BY clause would look like this:</p> <div class="textbox shaded">SELECT type AS &#8216;Type&#8217;, MIN(price) AS &#8216;Minimum Price&#8217;<br /> FROM Books<br /> WHERE price is not null<br /> GROUP BY type</div> <h3>Using COUNT with GROUP BY</h3> <p>We can use COUNT to tally how many items are in a container. However, if we want to count different items into separate groups, such as marbles of varying colours, then we would use the COUNT function with the GROUP BY command.</p> <p>The below SELECT statement illustrates how to count groups of data using the COUNT function with the GROUP BY clause.</p> <div class="textbox">SELECT COUNT(*)<br /> FROM Books<br /> GROUP BY type</div> <h3>Using AVG and SUM with GROUP BY</h3> <p>We can use the AVG function to give us the average of any group, and SUM to give the total.</p> <p>Example #1 uses the AVG FUNCTION with the GROUP BY type.</p> <div class="textbox shaded">SELECT AVG(qty)<br /> FROM Books<br /> GROUP BY type</div> <p>Example #2 uses the SUM function with the GROUP BY type.</p> <div class="textbox shaded">SELECT SUM(qty)<br /> FROM Books<br /> GROUP BY type</div> <p>Example #3 uses both the AVG and SUM functions with the GROUP BY type in the SELECT statement.</p> <div class="textbox shaded">SELECT &#8216;Total Sales&#8217; = SUM(qty), &#8216;Average Sales&#8217; = AVG(qty), stor_id<br /> FROM Sales<br /> GROUP BY StorID ORDER BY  &#8216;Total Sales&#8217;</div> <h2>Restricting rows with HAVING</h2> <p>The HAVING clause can be used to restrict rows. It is similar to the WHERE condition except HAVING can include the aggregate function; the WHERE cannot do this.</p> <p>The HAVING clause behaves like the WHERE clause, but is applicable to groups. In this example, we use the HAVING clause to exclude the groups with the province &#8216;BC&#8217;.</p> <div class="textbox shaded">SELECT au_fname AS &#8216;Author&#8221;s First Name&#8217;, province as &#8216;Province&#8217;<br /> FROM Authors<br /> GROUP BY au_fname, province<br /> HAVING province &lt;&gt; &#8216;BC&#8217;</div> <h2>INSERT statement</h2> <p>The <em>INSERT statement</em> adds rows to a table. In addition,</p> <ul><li>INSERT specifies the table or view that data will be inserted into.</li> <li>Column_list lists columns that will be affected by the INSERT.</li> <li>If a column is omitted, each value must be provided.</li> <li>If you are including columns, they can be listed in any order.</li> <li>VALUES specifies the data that you want to insert into the table. VALUES is required.</li> <li>Columns with the IDENTITY property should not be explicitly listed in the column_list or values_clause.</li> </ul> <p>The syntax for the INSERT statement is:</p> <div class="textbox">INSERT [INTO] Table_name | view name [column_list]<br /> DEFAULT VALUES | values_list | select statement</div> <p>When inserting rows with the INSERT statement, these rules apply:</p> <ul><li>Inserting an empty string (&#8216; &#8216;) into a varchar or text column inserts a single space.</li> <li>All char columns are right-padded to the defined length.</li> <li>All trailing spaces are removed from data inserted into varchar columns, except in strings that contain only spaces. These strings are truncated to a single space.</li> <li>If an INSERT statement violates a constraint, default or rule, or if it is the wrong data type, the statement fails and SQL Server displays an error message.</li> </ul> <p>When you specify values for only some of the columns in the column_list, one of three things can happen to the columns that have no values:</p> <ol><li>A default value is entered if the column has a DEFAULT constraint, if a default is bound to the column, or if a default is bound to the underlying user-defined data type.</li> <li>NULL is entered if the column allows NULLs and no default value exists for the column.</li> <li>An error message is displayed and the row is rejected if the column is defined as NOT NULL and no default exists.</li> </ol> <p>This example uses INSERT to add a record to the publisher&#8217;s Authors table.</p> <div class="textbox shaded">INSERT INTO Authors<br /> VALUES(‘555-093-467’, ‘Martin’, ‘April’, ‘281 555-5673’, ‘816 Market St.,’ , ‘Vancouver’, ‘BC’, ‘V7G3P4’, 0)</div> <p>This following example illustrates how to insert a partial row into the Publishers table with a column list. The country column had a default value of Canada so it does not require that you include it in your values.</p> <div class="textbox shaded">INSERT INTO Publishers (PubID, PubName, city, province)<br /> VALUES (‘9900’, ‘Acme Publishing’, ‘Vancouver’, ‘BC’)</div> <p>To insert rows into a table with an IDENTITY column, follow the below example. Do not supply the value for the IDENTITY nor the name of the column in the column list.</p> <div class="textbox shaded">INSERT INTO jobs<br /> VALUES (‘DBA’, 100, 175)</div> <h3>Inserting specific values into an IDENTITY column</h3> <p>By default, data cannot be inserted directly into an IDENTITY column; however, if a row is accidentally deleted, or there are gaps in the IDENTITY column values, you can insert a row and specify the IDENTITY column value.</p> <div class="textbox">IDENTITY_INSERT option</div> <p>To allow an insert with a specific identity value, the IDENTITY_INSERT option can be used as follows.</p> <div class="textbox shaded">SET IDENTITY_INSERT jobs ON<br /> INSERT INTO jobs  (job_id, job_desc, min_lvl, max_lvl)<br /> VALUES (19, ’DBA2’, 100, 175)<br /> SET IDENTITY_INSERT jobs OFF</div> <h3> Inserting rows with a SELECT statement</h3> <p>We can sometimes create a small temporary table from a large table. For this, we can insert rows with a SELECT statement. When using this command, there is no validation for uniqueness. Consequently, there may be many rows with the same pub_id in the example below.</p> <p>This example creates a smaller temporary Publishers table using the CREATE TABLE statement. Then the INSERT with a SELECT statement is used to add records to this temporary Publishers table from the publis table.</p> <div class="textbox shaded">CREATE TABLE dbo.tmpPublishers (<br /> PubID char (4) NOT NULL ,<br /> PubName varchar (40) NULL ,<br /> city varchar (20) NULL ,<br /> province char (2) NULL ,<br /> country varchar (30) NULL  DEFAULT (‘Canada’)<br /> )<br /> INSERT  tmpPublishers<br /> SELECT * FROM Publishers</div> <p>In this example, we&#8217;re copying a subset of data.</p> <div class="textbox shaded">INSERT tmpPublishers (pub_id, pub_name)<br /> SELECT PubID, PubName<br /> FROM Publishers</div> <p>In this example, the publishers’ data are copied to the tmpPublishers table and the country column is set to Canada.</p> <div class="textbox shaded">INSERT tmpPublishers (<span>PubID, PubName</span>, city, province, country)<br /> SELECT <span>PubID, PubName</span>, city, province, ‘Canada’<br /> FROM Publishers</div> <h2>UPDATE statement</h2> <p>The <em>UPDATE statement</em> changes data in existing rows either by adding new data or modifying existing data.</p> <p>This example uses the UPDATE statement to standardize the country field to be Canada for all records in the Publishers table.</p> <div class="textbox">UPDATE Publishers<br /> SET country = ‘Canada’</div> <p>This example increases the royalty amount by 10% for those royalty amounts between 10 and 20.</p> <div class="textbox shaded">UPDATE roysched<br /> SET royalty = royalty + (royalty * .10)<br /> WHERE royalty BETWEEN 10 and 20</div> <h3>Including subqueries in an UPDATE statement</h3> <p>The employees from the Employees table who were hired by the publisher in 2010 are given a promotion to the highest job level for their job type. This is what the UPDATE statement would look like.</p> <div class="textbox shaded">UPDATE Employees<br /> SET job_lvl =<br /> (SELECT max_lvl FROM jobs<br /> WHERE employee.job_id = jobs.job_id)<br /> WHERE DATEPART(year, employee.hire_date) = 2010</div> <h2>DELETE statement</h2> <p>The <em>DELETE statement</em> removes rows from a record set. DELETE names the table or view that holds the rows that will be deleted and only one table or row may be listed at a time. WHERE is  a standard WHERE clause that limits the deletion to select records.</p> <p>The DELETE syntax looks like this.</p> <div class="textbox">DELETE [FROM] {table_name | view_name }<br /> [WHERE clause]</div> <p>The rules for the DELETE statement are:</p> <ol><li>If you omit a WHERE clause, all rows in the table are removed (except for indexes, the table, constraints)<i>.</i></li> <li>DELETE cannot be used with a view that has a FROM clause naming more than one table. (Delete can affect only one base table at a time.)</li> </ol> <p>What follows are three different DELETE statements that can be used.</p> <p>1. Deleting all rows from a table.</p> <div class="textbox">DELETE<br /> FROM Discounts</div> <p>2. Deleting selected rows:</p> <div class="textbox">DELETE<br /> FROM Sales<br /> WHERE stor_id = ‘6380’</div> <p>3. Deleting rows based on a value in a subquery:</p> <div class="textbox">DELETE FROM Sales<br /> WHERE title_id IN<br /> (SELECT title_id FROM Books WHERE type = ‘mod_cook’)</div> <h1>Built-in Functions</h1> <p>There are many built-in functions in SQL Server such as:</p> <ol><li><em>Aggregate:</em> returns summary values</li> <li><em>Conversion:</em> transforms one data type to another</li> <li><em>Date:</em> displays information about dates and times</li> <li><em>Mathematical:</em> performs operations on numeric data</li> <li><em>String:</em> performs operations on character strings, binary data or expressions</li> <li><em>System:</em> returns a special piece of information from the database</li> <li><em>Text and image:</em> performs operations on text and image data</li> </ol> <p>Below you will find detailed descriptions and examples for the first four functions.</p> <h2>Aggregate functions</h2> <p>Aggregate functions perform a calculation on a set of values and return a single, or summary, value. Table 16.4 lists these functions.</p> <table border="0" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top" style="width: 16%;"><strong>FUNCTION</strong></td> <td valign="top" style="width: 83%;"><strong>DESCRIPTION</strong></td> </tr> <tr><td valign="top" style="width: 16%;">AVG</td> <td valign="top" style="width: 83%;">Returns the average of all the values, or only the DISTINCT values, in the expression.</td> </tr> <tr><td valign="top" style="width: 16%;">COUNT</td> <td valign="top" style="width: 83%;">Returns the number of non-null values in the expression. When DISTINCT is specified, COUNT finds the number of unique non-null values.</td> </tr> <tr><td valign="top" style="width: 16%;">COUNT(*)</td> <td valign="top" style="width: 83%;">Returns the number of rows. COUNT(*) takes no parameters and cannot be used with DISTINCT.</td> </tr> <tr><td valign="top" style="width: 16%;">MAX</td> <td valign="top" style="width: 83%;">Returns the maximum value in the expression. MAX can be used with numeric, character and datetime columns, but not with bit columns. With character columns, MAX finds the highest value in the collating sequence. MAX ignores any null values.</td> </tr> <tr><td valign="top" style="width: 16%;">MIN</td> <td valign="top" style="width: 83%;">Returns the minimum value in the expression. MIN can be used with numeric, character and datetime columns, but not with bit columns. With character columns, MIN finds the value that is lowest in the sort sequence. MIN ignores any null values.</td> </tr> <tr><td valign="top" style="width: 16%;">SUM</td> <td valign="top" style="width: 83%;">Returns the sum of all the values, or only the DISTINCT values, in the expression. SUM can be used with numeric columns only.</td> </tr> </tbody> </table> <p><em>Table 16.4 A list of aggregate functions and descriptions.</em></p> <p>Below are examples of each of the aggregate functions listed in Table 16.4.</p> <p><strong>Example #1:  AVG</strong></p> <div class="textbox shaded">SELECT AVG (price) AS &#8216;Average Title Price&#8217;<br /> FROM Books</div> <p><strong>Example #2: COUNT</strong></p> <div class="textbox shaded">SELECT COUNT(PubID) AS &#8216;Number of Publishers&#8217;<br /> FROM Publishers</div> <p><strong>Example #3: COUNT</strong></p> <div class="textbox shaded">SELECT COUNT(province) AS &#8216;Number of Publishers&#8217;<br /> FROM Publishers</div> <p><strong>Example #3: COUNT (*)</strong></p> <div class="textbox shaded">SELECT COUNT(*)<br /> FROM Employees<br /> WHERE job_lvl = 35</div> <p><strong>Example #4: MAX</strong></p> <div class="textbox shaded">SELECT MAX (HireDate)<br /> FROM Employees</div> <p><strong>Example #5: MIN</strong></p> <div class="textbox shaded">SELECT MIN (price)<br /> FROM Books</div> <p><strong>Example #6: SUM</strong></p> <div class="textbox shaded">SELECT SUM(discount) AS &#8216;Total Discounts&#8217;<br /> FROM Discounts</div> <h2>Conversion function</h2> <p>The conversion function transforms one data type to another.</p> <p>In the example below, a price that contains two 9s is converted into five characters. The syntax for this statement is SELECT &#8216;The date is &#8216; + CONVERT(varchar(12), getdate()).</p> <div class="textbox shaded">SELECT CONVERT(int, 10.6496)<br /> SELECT title_id, price<br /> FROM Books<br /> WHERE CONVERT(char(5), price) LIKE &#8216;%99%&#8217;</div> <p>In this second example, the conversion function changes data to a data type with a different size.</p> <div class="textbox shaded">SELECT title_id, CONVERT(char(4), ytd_sales) as &#8216;Sales&#8217;<br /> FROM Books<br /> WHERE type LIKE &#8216;%cook&#8217;</div> <h2>Date function</h2> <p>The date function produces a date by adding an interval to a specified date. The result is a datetime value equal to the date plus the number of date parts. If the date parameter is a smalldatetime value, the result is also a smalldatetime value.</p> <p>The DATEADD function is used to add and increment date values. The syntax for this function is DATEADD(datepart, number, date).</p> <div class="textbox shaded">SELECT DATEADD(day, 3, hire_date)<br /> FROM Employees</div> <p>In this example, the function DATEDIFF(datepart, date1, date2)  is used.</p> <p>This command returns the number of datepart &#8220;boundaries&#8221; crossed between two specified dates. The method of counting crossed boundaries makes the result given by DATEDIFF consistent across all data types such as minutes, seconds, and milliseconds.</p> <div class="textbox shaded">SELECT DATEDIFF(day, HireDate, &#8216;Nov 30 1995&#8217;)<br /> FROM Employees</div> <p>For any particular date, we can examine any part of that date from the year to the millisecond.</p> <p>The date parts (DATEPART) and abbreviations recognized by SQL Server, and the acceptable values are listed in Table 16.5.</p> <table border="0" cellpadding="0" style="border-spacing: 0px;"><tbody><tr><td valign="top" style="width: 147px;"><strong>DATE PART</strong></td> <td valign="top" style="width: 183px;"><strong>ABBREVIATION</strong></td> <td valign="top" style="width: 213px;"><strong>VALUES</strong></td> </tr> <tr><td valign="top" style="width: 147px;">Year</td> <td valign="top" style="width: 183px;">yy</td> <td valign="top" style="width: 213px;">1753-9999</td> </tr> <tr><td valign="top" style="width: 147px;">Quarter</td> <td valign="top" style="width: 183px;">qq</td> <td valign="top" style="width: 213px;">1-4</td> </tr> <tr><td valign="top" style="width: 147px;">Month</td> <td valign="top" style="width: 183px;">mm</td> <td valign="top" style="width: 213px;">1-12</td> </tr> <tr><td valign="top" style="width: 147px;">Day of year</td> <td valign="top" style="width: 183px;">dy</td> <td valign="top" style="width: 213px;">1-366</td> </tr> <tr><td valign="top" style="width: 147px;">Day</td> <td valign="top" style="width: 183px;">dd</td> <td valign="top" style="width: 213px;">1-31</td> </tr> <tr><td valign="top" style="width: 147px;">Week</td> <td valign="top" style="width: 183px;">wk</td> <td valign="top" style="width: 213px;">1-53</td> </tr> <tr><td valign="top" style="width: 147px;">Weekday</td> <td valign="top" style="width: 183px;">dw</td> <td valign="top" style="width: 213px;">1-7 (Sun.-Sat.)</td> </tr> <tr><td valign="top" style="width: 147px;">Hour</td> <td valign="top" style="width: 183px;">hh</td> <td valign="top" style="width: 213px;">0-23</td> </tr> <tr><td valign="top" style="width: 147px;">Minute</td> <td valign="top" style="width: 183px;">mi</td> <td valign="top" style="width: 213px;">0-59</td> </tr> <tr><td valign="top" style="width: 147px;">Second</td> <td valign="top" style="width: 183px;">ss</td> <td valign="top" style="width: 213px;">0-59</td> </tr> <tr><td valign="top" style="width: 147px;">Millisecond</td> <td valign="top" style="width: 183px;">ms</td> <td valign="top" style="width: 213px;">0-999</td> </tr> </tbody> </table> <p><em>Table 16.5. Date part abbreviations and values.</em></p> <h2>Mathematical functions<b> </b></h2> <p>Mathematical functions perform operations on numeric data. The following example lists the current price for each book sold by the publisher and what they would be if all prices increased by 10%.</p> <div class="textbox shaded">SELECT Price, (price * 1.1) AS &#8216;New Price&#8217;, title<br /> FROM Books<br /> SELECT &#8216;Square Root&#8217; = SQRT(81)<br /> SELECT &#8216;Rounded‘ = ROUND(4567.9876,2)<br /> SELECT FLOOR (123.45)</div> <h1>Joining Tables</h1> <p>Joining two or more tables is the process of comparing the data in specified columns and using the comparison results to form a new table from the rows that qualify. A join statement:</p> <ul><li>Specifies a column from each table</li> <li>Compares the values in those columns row by row</li> <li>Combines rows with qualifying values into a new row</li> </ul> <p><span style="color: #333333">Although the comparison is usually for equality – values that match exactly – other types of joins can also be specified. All the different joins such as inner, left (outer), right (outer), and cross join will be described below.</span></p> <h2>Inner join</h2> <p>An <em>inner join</em> connects two tables on a column with the same data type. Only the rows where the column values match are returned; unmatched rows are discarded.</p> <p><strong>Example #1</strong></p> <div class="textbox shaded">SELECT jobs.job_id, job_desc<br /> FROM jobs<br /> INNER JOIN Employees ON employee.job_id = jobs.job_id<br /> WHERE jobs.job_id &lt; 7</div> <p><b>Example #2<br /> </b></p> <div class="textbox shaded">SELECT authors.au_fname, authors.au_lname, books.royalty, title<br /> FROM authorsINNER JOIN titleauthor ON authors.au_id=titleauthor.au_id<br /> INNER JOIN books ON titleauthor.title_id=books.title_id<br /> GROUP BY authors.au_lname, authors.au_fname, title, title.royalty<br /> ORDER BY authors.au_lname</div> <h2>Left outer join</h2> <p>A <em>left outer join</em> specifies that all left outer rows be returned. All rows from the left table that did not meet the condition specified are included in the results set, and output columns from the other table are set to NULL.</p> <p>This first example uses the new syntax for a left outer join.</p> <div class="textbox shaded">SELECT publishers.pub_name, books.title<br /> FROM Publishers<br /> LEFT OUTER JOIN Books On publishers.pub_id = books.pub_id</div> <p>This is an example of a left outer join using the old syntax.</p> <div class="textbox shaded">SELECT publishers.pub_name, books.title<br /> FROM Publishers, Books<br /> WHERE publishers.pub_id *= books.pub_id</div> <h2>Right outer join</h2> <p>A <em>right outer join</em> includes, in its result set, all rows from the right table that did not meet the condition specified. Output columns that correspond to the other table are set to NULL.</p> <p>Below is an example using the new syntax for a right outer join.</p> <div class="textbox shaded">SELECT titleauthor.title_id, authors.au_lname, authors.au_fname<br /> FROM titleauthor<br /> RIGHT OUTER JOIN authors ON titleauthor.au_id = authors.au_id<br /> ORDERY BY au_lname</div> <p>This second example show the old syntax used for a right outer join.</p> <div class="textbox shaded">SELECT titleauthor.title_id, authors.au_lname, authors.au_fname<br /> FROM titleauthor, authors<br /> WHERE titleauthor.au_id =* authors.au_id<br /> ORDERY BY au_lname</div> <h2>Full outer join</h2> <p>A <em>full outer join</em> specifies that if a row from either table does not match the selection criteria, the row is included in the result set, and its output columns that correspond to the other table are set to NULL.</p> <p>Here is an example of a full outer join.</p> <div class="textbox shaded">SELECT books.title, publishers.pub_name, publishers.province<br /> FROM Publishers<br /> FULL OUTER JOIN Books ON books.pub_id = publishers.pub_id<br /> WHERE (publishers.province &lt;&gt; “BC” and publishers.province &lt;&gt; “ON”)<br /> ORDER BY books.title_id</div> <h2><b> </b>Cross join</h2> <p>A <em>cross join</em> is a product combining two tables. This join returns the same rows as if no WHERE clause were specified. For example:</p> <div class="textbox shaded">SELECT au_lname, pub_name,<br /> FROM Authors CROSS JOIN Publishers</div> <p>&nbsp;</p> <div class="bcc-box bcc-success"><h3 itemprop="educationalUse">Key Terms</h3> <p><strong>aggregate function</strong>:<strong><em> </em></strong> returns summary values</p> <p><strong>ASC</strong>: ascending order</p> <p><strong>conversion function</strong>: transforms one data type to another</p> <p><strong>cross join</strong>: a product combining two tables</p> <p><strong>date function</strong>: displays information about dates and times</p> <p><strong>DELETE statement</strong>: removes rows from a record set</p> <p><strong>DESC</strong>: descending order</p> <p><strong>full outer join</strong>: specifies that if a row from either table does not match the selection criteria</p> <p><strong>GROUP BY</strong>: used to create one output row per each group and produces summary values for the selected columns</p> <p><strong>inner join</strong>: connects two tables on a column with the same data type</p> <p><strong>INSERT statement</strong>: adds rows to a table</p> <p><strong>left outer join</strong>: specifies that all left outer rows be returned</p> <p><strong>mathematical function</strong>: performs operations on numeric data</p> <p><strong>right outer join</strong>: includes all rows from the right table that did not meet the condition specified</p> <p><strong>SELECT statemen</strong>t: used to query data in the database</p> <p><strong>string function</strong>: performs operations on character strings, binary data or expressions</p> <p><strong>system function</strong>: returns a special piece of information from the database</p> <p><strong>text and image functions</strong>: performs operations on text and image data</p> <p><strong>UPDATE statement:</strong> changes data in existing rows either by adding new data or modifying existing data</p> <p><strong>wildcard</strong>:  allows the user to match fields that contain certain letters.</p> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Exercises</h3> <p style="color: #1f1f1d">For questions 1 to 18 use the PUBS sample database created by Microsoft. To download the script to generate this database please go to the following site: <a style="color: #870d0d" href="http://www.microsoft.com/en-ca/download/details.aspx?id=23654">http://www.microsoft.com/en-ca/download/details.aspx?id=23654</a>.</p> <ol><li>Display a list of publication dates and titles (books) that were published in 2011.</li> <li>Display a list of titles that have been categorized as either traditional or modern cooking. Use the Books table.</li> <li>Display all authors whose first names are five letters long.</li> <li>Display from the Books table: type, price, pub_id, title about the books put out by each publisher. Rename the column type with ”Book Category.” Sort by type (descending) and then price (ascending).</li> <li>Display title_id, pubdate and pubdate plus three days, using the Books table.</li> <li>Using the datediff and getdate function determine how much time has elapsed in months since the books in the Books table were published.</li> <li>List the title IDs and quantity of all books that sold more than 30 copies.</li> <li>Display a list of all last names of the authors who live in Ontario (ON) and the cities where they live.</li> <li>Display all rows that contain a 60 in the payterms field. Use the Sales table.</li> <li>Display all authors whose first names are five letters long , end in O or A, and start with M or P.</li> <li>Display all titles that cost more than $30 and either begin with T or have a publisher ID of  0877.</li> <li>Display from the Employees table the first name (fname), last name (lname), employe ID(emp_id) and job level (job_lvl) columns for those employees with a job level greater than 200; and rename the column headings to:  “First Name,” “Last Name,” “IDENTIFICATION#” and “Job Level.”</li> <li>Display the royalty, royalty plus 50% as “royalty plus 50” and title_id. Use the Roysched table.</li> <li>Using the STUFF function create a string “12xxxx567” from the string “1234567.”</li> <li>Display the first 40 characters of each title, along with the average monthly sales for that title to date (ytd_sales/12). Use the Title table.</li> <li>Show how many books have assigned prices.</li> <li>Display a list of cookbooks with the average cost for all of the books of each type. Use the GROUP BY.</li> </ol> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Advanced Questions (Union, Intersect, and Minus)</h3> <ol><li>The relational set operators UNION, INTERSECT and MINUS work properly only if the relations are union-compatible. What does union-compatible mean, and how would you check for this condition?</li> <li>What is the difference between UNION and UNION ALL? Write the syntax for each.</li> <li>Suppose that you have two tables, Employees and Employees_1. The Employees table contains the records for three employees: Alice Cordoza, John Cretchakov, and Anne McDonald. The Employees_1 table contains the records for employees: John Cretchakov and Mary Chen. Given that information, what is the query output for the UNION query? List the query output.</li> <li>Given the employee information in question 3, what is the query output for the UNION ALL query? List the query output.</li> <li>Given the employee information in question 3, what is the query output for the INTERSECT query? List the query output.</li> <li>Given the employee information in question 3, what is the query output for the EXCEPT query? List the query output.</li> <li>What is a cross join? Give an example of its syntax.</li> <li>Explain these three join types: <ol><li>left outer join</li> <li>right outer join</li> <li>full outer join</li> </ol> </li> <li>What is a subquery, and what are its basic characteristics?</li> <li>What is a correlated subquery? Give an example.</li> <li>Suppose that a Product table contains two attributes, PROD_CODE and VEND_CODE. The values for the PROD_CODE are: ABC, DEF, GHI and JKL. These are matched by the following values for the VEND_CODE:  125, 124, 124 and 123, respectively (e.g., PROD_CODE value ABC corresponds to VEND_CODE value 125). The Vendor table contains a single attribute, VEND_CODE, with values 123, 124, 125 and 126. (The VEND_CODE attribute in the Product table is a foreign key to the VEND_CODE in the Vendor table.)</li> <li>Given the information in question 11, what would be the query output for the following? Show values. <ol><li>A UNION query based on these two tables</li> <li>A UNION ALL query based on these two tables</li> <li>An INTERSECT query based on these two tables</li> <li>A MINUS query based on these two tables</li> </ol> </li> </ol> </div> <div class="bcc-box bcc-info"><h3 itemprop="educationalUse">Advanced Questions (Using Joins)</h3> <ol><li>Display a list of all titles and sales numbers in the Books and Sales tables, including titles that have no sales. Use a join.</li> <li>Display a list of authors’ last names and all associated titles that each author has published sorted by the author’s last name. Use a join.  Save it as a view named: Published Authors.</li> <li>Using a subquery, display all the authors (show last and first name, postal code) who receive a royalty of 100% and live in Alberta. Save it as a view titled: AuthorsView. When creating the view, rename the author’s last name and first name as ‘Last Name’ and ‘First Name’.</li> <li>Display the stores that did not sell the title <em>Is Anger the Enemy?</em></li> <li>Display a list of store names for sales after 2013 (Order Date is greater than 2013).  Display store name and order date.</li> <li>Display a list of titles for books sold in store name “News &amp; Brews.”  Display store name, titles and order dates.</li> <li>List total sales (qty) by title. Display total quantity and title columns.</li> <li>List total sales (qty) by type. Display total quantity and type columns.</li> <li>List total sales (qty*price) by type. Display total dollar value and type columns.</li> <li>Calculate the total number of types of books by publisher. Show publisher name and total count of types of books for each publisher.</li> <li>Show publisher names that do not have any type of book.  Display publisher name only.</li> </ol> </div> </div></div>
<div class="back-matter appendix" id="appendix-a-university-registration-data-model-example"><div class="back-matter-title-wrap"><h3 class="back-matter-number">1</h3><h1 class="back-matter-title">Appendix A University Registration Data Model Example</h1></div><div class="ugc back-matter-ugc"><p>Here is a statement of the data requirements for a product to support the registration of and provide help to students of a fictitious e-learning university.</p> <p>An e-learning university needs to keep details of its students and staff, the courses that it offers and the performance of the students who study its courses. The university is administered in four geographical regions (England, Scotland, Wales and Northern Ireland).</p> <p>Information about each student should be initially recorded at registration. This includes the student’s identification number issued at the time, name, year of registration and the region in which the student is located. A student is not required to enroll in any courses at registration; enrollment in a course can happen at a later time.</p> <p>Information recorded for each member of the tutorial and counseling staff must include the staff number, name and region in which he or she is located. Each staff member may act as a counselor to one or more students, and may act as a tutor to one or more students on one or more courses. It may be the case that, at any particular point in time, a member of staff may not be allocated any students to tutor or counsel.</p> <p>Each student has one counselor, allocated at registration, who supports the student throughout his or her university career. A student is allocated a separate tutor for each course in which he or she is enrolled. A staff member may only counsel or tutor a student who is resident in the same region as that staff member.</p> <p>Each course that is available for study must have a course code, a title and a value in terms of credit points. A course is either a 15-point course or a 30-point course. A course may have a quota for the number of students enrolled in it at any one presentation. A course need not have any students enrolled in it (such as a course that has just been written and offered for study).</p> <p>Students are constrained in the number of courses they can be enrolled in at any one time. They may not take courses simultaneously if their combined points total exceeds 180 points.</p> <p>For assessment purposes, a 15-point course may have up to three assignments per presentation and a 30-point course may have up to five assignments per presentation. The grade for an assignment on any course is recorded as a mark out of 100.</p> <p>The university database below is one possible data model that describes the above set of requirements. The model has several parts, beginning with an ERD and followed by a written description of entity types, constraints, and assumptions.</p> <h2>Design Process</h2> <p>See Figure A.1.</p> <ol><li>The first step is to determine the kernels. These are typically nouns: Staff, Course, Student and Assignment.</li> <li>The next step is to document all attributes for each entity. This is where you need to ensure that all tables are properly normalized.</li> <li>Create the initial ERD and review it with the users.</li> <li>Make changes if needed after the ERD review.</li> <li>Verify the ER model with users to finalize the design.</li> </ol> <div id="attachment_96" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-University-Example-ERD-300x189.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-University-Example-ERD-300x189.jpg" alt="Ch-14-University-Example-ERD-300x189" class="wp-image-96 size-full" height="189" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-University-Example-ERD-300x189.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-University-Example-ERD-300x189-65x40.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-University-Example-ERD-300x189-225x141.jpg 225w" /></a> <p class="wp-caption-text">Figure A.1. University ERD. A data model for a student and staff records system by A. Watt.</p> </div> <h3>Entity</h3> <p>Student (<span style="text-decoration: underline">StudentID</span>, Name, Registered, Region, StaffNo)</p> <p>Staff (<span style="text-decoration: underline">StaffNo</span>, Name, Region) &#8211; This table contains instructors and other staff members.</p> <p>Course (<span style="text-decoration: underline">CourseCode</span>, Title, Credit, Quota, StaffNo)</p> <p>Enrollment (<span style="text-decoration: underline">StudentlD, CourseCode</span>, DateEnrolled, FinalGrade)</p> <p>Assignment (<span style="text-decoration: underline">StudentID, CourseCode, AssignmentNo</span>, Grade)<strong><br /> </strong></p> <h3>Constraints</h3> <ul><li>A staff member may only tutor or counsel students who are located in the same region as the staff member.</li> <li>Students may not enroll for more than 180 points worth of courses at any one time.</li> <li>The attribute Credit (of Course) has a value of 15 or 30 points.</li> <li>A 30-point course may have up to five assignments; a 15-point course may have up to three assignments.</li> <li>The attribute Grade (of Assignment) has a value that is a mark out of 100.</li> </ul> <h3>Assumptions</h3> <ul><li>A student has at most one enrollment in a course as only current enrollments are recorded.</li> <li>An assignment may be submitted only once.</li> </ul> <h3>Relationships (includes cardinality)</h3> <p>Using Figure A.2, note that a student (record) is associated with (enrolled) with a minimum of 1 to a maximum of many courses.</p> <p>Each enrollment must have a valid student.</p> <p><strong>Note:</strong>  Since the StudentID is part of the PK, it can’t be null. Therefore, any StudentID entered, must exist in the Student table at least once to a maximum of 1 time. This should be obvious since the PK cannot have duplicates.</p> <div id="attachment_97" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Student-one-to-Many-Enrollment-300x145.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Student-one-to-Many-Enrollment-300x145.jpg" alt="Ch-14-Student-one-to-Many-Enrollment-300x145" class="wp-image-97 size-full" height="145" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Student-one-to-Many-Enrollment-300x145.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Student-one-to-Many-Enrollment-300x145-65x31.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Student-one-to-Many-Enrollment-300x145-225x108.jpg 225w" /></a> <p class="wp-caption-text">Figure A.2 by A. Watt.</p> </div> <p>Refer to Figure A.3. A staff record (a tutor) is associated with a minimum of 0 students to a maximum of many students.</p> <p>A student record may or may not have a tutor.</p> <div id="attachment_98" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Student-300x174.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Student-300x174.jpg" alt="Ch-14-Staff-to-Student-300x174" class="wp-image-98 size-full" height="174" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Student-300x174.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Student-300x174-65x37.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Student-300x174-225x130.jpg 225w" /></a> <p class="wp-caption-text">Figure A.3 by A. Watt.</p> </div> <p><strong>Note:</strong>  The StaffNo field in the <span style="color: #000000">Student</span> table allows null values – represented by the 0 on the left side.  However, if a StaffNo exists in the student table it must exist in the Staff table maximum once – represented by the 1.</p> <p>Refer to Figure A.4. A staff record (instructor) is associated with a minimum of 0 courses to a maximum of many courses.</p> <p>A course may or may not be associated with an instructor.</p> <p><strong>Note:</strong>  The StaffNo in the Course table is the FK, and it can be null. This represents the 0 on the left side of the relationship. If the StaffNo has data, it has to be in the Staff table a maximum of once. That is represented by the 1 on the left side of the relationship.</p> <div id="attachment_99" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Course-300x172.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Course-300x172.jpg" alt="Ch-14-Staff-to-Course-300x172" class="wp-image-99 size-full" height="172" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Course-300x172.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Course-300x172-65x37.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Staff-to-Course-300x172-225x129.jpg 225w" /></a> <p class="wp-caption-text">Figure A.4 by A. Watt.</p> </div> <p>Refer to Figure A.5. A course must be offered (in enrollment) at least once to a maximum of many times.</p> <p>The Enrollment table must contain at least 1 valid course to a maximum of many.</p> <div id="attachment_100" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Course-to-Enrollment-300x138.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Course-to-Enrollment-300x138.jpg" alt="Ch-14-Course-to-Enrollment-300x138" class="wp-image-100 size-full" height="138" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Course-to-Enrollment-300x138.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Course-to-Enrollment-300x138-65x29.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Course-to-Enrollment-300x138-225x103.jpg 225w" /></a> <p class="wp-caption-text">Figure A.5 by A. Watt.</p> </div> <p>Refer to Figure A.6. An enrollment can have a minimum of 0 assignments or a maximum of many.</p> <p>An assignment must be associated with at least 1 with a maximum of 1 enrollment.</p> <p><strong>Note:</strong>  Every record in the Assignment table must contain a valid enrollment record. One enrollment record can be associated with multiple assignments.</p> <div id="attachment_101" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Enrollment-to-Assignment-300x118.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Enrollment-to-Assignment-300x118.jpg" alt="Ch-14-Enrollment-to-Assignment-300x118" class="wp-image-101 size-full" height="118" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Enrollment-to-Assignment-300x118.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Enrollment-to-Assignment-300x118-65x25.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-14-Enrollment-to-Assignment-300x118-225x88.jpg 225w" /></a> <p class="wp-caption-text">Figure A.6 by A. Watt.</p> </div> <h2>Attribution</h2> <p>This is an adaptation, not a derivation as the author wrote half of it. Source: <a href="http://openlearn.open.ac.uk/mod/oucontent/view.php?id=397581&amp;section=8.2">http://openlearn.open.ac.uk/mod/oucontent/view.php?id=397581&amp;section=8.2</a></p> </div></div>
<div class="back-matter appendix" id="appendix-b-erd-exercises"><div class="back-matter-title-wrap"><h3 class="back-matter-number">2</h3><h1 class="back-matter-title">Appendix B Sample ERD Exercises</h1></div><div class="ugc back-matter-ugc"><h2>Exercise 1</h2> <h3>Manufacturer</h3> <p>A manufacturing company produces products. The following product information is stored: product name, product ID and quantity on hand. These products are made up of many components. Each component can be supplied by one or more suppliers. The following component information is kept: component ID, name, description, suppliers who supply them, and products in which they are used. Use Figure B.1 for this exercise.</p> <p>Create an ERD to show how you would track this information.</p> <p>Show entity names, primary keys, attributes for each entity, relationships between the entities and cardinality.</p> <h3>Assumptions</h3> <ul><li>A supplier can exist without providing components.</li> <li>A component does not have to be associated with a supplier.</li> <li>A component does not have to be associated with a product. Not all components are used in products.</li> <li>A product cannot exist without components.</li> </ul> <h3>ERD Answer</h3> <p>Component(<span style="text-decoration: underline">CompID</span>, CompName, Description) PK=CompID</p> <p>Product(<span style="text-decoration: underline">ProdID,</span> ProdName, QtyOnHand) PK=ProdID</p> <p>Supplier(S<span style="text-decoration: underline">uppID</span>, SuppName) PK = SuppID</p> <p>CompSupp(<span style="text-decoration: underline">CompID, SuppID</span>) PK = CompID, SuppID</p> <p>Build(<span style="text-decoration: underline">CompID, ProdID</span>, QtyOfComp) PK= CompID, ProdID</p> <div id="attachment_103" style="width: 310px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-16-Component-Product-ERD-Answer-300x160.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-16-Component-Product-ERD-Answer-300x160.jpg" alt="Ch-16-Component-Product-ERD-Answer-300x160" class="wp-image-103 size-full" height="160" width="300" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-16-Component-Product-ERD-Answer-300x160.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-16-Component-Product-ERD-Answer-300x160-65x34.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2013/12/Ch-16-Component-Product-ERD-Answer-300x160-225x120.jpg 225w" /></a> <p class="wp-caption-text">Figure B.1 by A. Watt.</p> </div> <p>&nbsp;</p> <h2>Exercise 2</h2> <h3>Car Dealership</h3> <p>Create an ERD for a car dealership. The dealership sells both new and used cars, and it operates a service facility (see Figure B.2). Base your design on the following business rules:</p> <ul><li>A salesperson may sell many cars, but each car is sold by only one salesperson.</li> <li>A customer may buy many cars, but each car is bought by only one customer.</li> <li>A salesperson writes a single invoice for each car he or she sells.</li> <li>A customer gets an invoice for each car he or she buys.</li> <li>A customer may come in just to have his or her car serviced; that is, a customer need not buy a car to be classified as a customer.</li> <li>When a customer takes one or more cars in for repair or service, one service ticket is written for each car.</li> <li>The car dealership maintains a service history for each of the cars serviced. The service  records are referenced by the car’s serial number.</li> <li>A car brought in for service can be worked on by many mechanics, and each mechanic may work on many cars.</li> <li>A car that is serviced may or may not need parts (e.g., adjusting a carburetor or cleaning a fuel injector nozzle does not require providing new parts).</li> </ul> <h3>ERD Answer</h3> <p><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership.png"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership.png" alt="carDealership" class="aligncenter wp-image-1092" height="418" width="500" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership.png 997w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership-300x250.png 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership-65x54.png 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership-225x188.png 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/carDealership-350x292.png 350w" /></a></p> </div></div>
<div class="back-matter appendix" id="appendix-d-sql-lab-with-solution"><div class="back-matter-title-wrap"><h3 class="back-matter-number">3</h3><h1 class="back-matter-title">Appendix C SQL Lab with Solution</h1></div><div class="ugc back-matter-ugc"><p>Download the following script:  <a title="Orders and Data" href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/06/ordersanddata.txt">OrdersAndData.sql</a>.</p> <h1>Part 1 – DDL</h1> <div id="attachment_1067" style="width: 674px" class="wp-caption aligncenter"><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData.jpg" alt="Figure C.1. ERD" class="wp-image-1067 size-full" height="430" width="664" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData.jpg 664w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData-300x194.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData-65x42.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData-225x145.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/10/DD-OrdersandData-350x226.jpg 350w" /></a> <p class="wp-caption-text">Figure C.1. ERD for Orders and Data.</p> </div> <ol><li>Use the script OrdersAndData.sql that creates the tables and adds the data for the Orders and Data ERD in Figure C.1.</li> <li>Create a database called Orders. Modify the script to integrate the PK and referential integrity. Show the CREATE TABLE statements with the modifications including the constraints given in step 3.</li> <li>Add the following constraints:</li> </ol> <ul><li>tblCustomers table:  Country &#8211; default to Canada</li> <li>tblOrderDetails:  Quantity &#8211;   &gt; 0</li> <li>tblShippers: CompanyName must be unique.</li> <li>tblOrders: ShippedDate must be greater than order date.</li> </ul> <div class="textbox">CREATE DATABASE Orders<br /> Go<br /> Use Orders<br /> Go</div> <div class="textbox shaded">Use Orders<br /> Go<br /> CREATE TABLE [dbo].[tblCustomers]<br /> [CustomerID]       nvarchar(5) NOT NULL,<br /> [CompanyName]      nvarchar(40) NOT NULL,<br /> [ContactName]      nvarchar(30) NULL,<br /> [ContactTitle]     nvarchar(30) NULL,<br /> [Address]          nvarchar(60) NULL,<br /> [City]             nvarchar(15) NULL,<br /> [Region]           nvarchar(15) NULL,<br /> [PostalCode]       nvarchar(10) NULL,<br /> [Country]          nvarchar(15) NULL<br /> Constraint     df_country DEFAULT &#8216;Canada&#8217;,<br /> [Phone]            nvarchar(24) NULL,<br /> [Fax]              nvarchar(24) NULL,<br /> Primary Key (CustomerID)<br /> );</div> <div class="textbox shaded">CREATE TABLE [dbo].[tblSupplier] (<br /> [SupplierID]     int NOT NULL,<br /> [Name]           nvarchar(50) NULL,<br /> [Address]        nvarchar(50) NULL,<br /> [City]           nvarchar(50) NULL,<br /> [Province]       nvarchar(50) NULL,<br /> Primary Key (SupplierID)<br /> );</div> <div class="textbox shaded">CREATE TABLE [dbo].[tblShippers] (<br /> [ShipperID]       int NOT NULL,<br /> [CompanyName]     nvarchar(40) NOT NULL,<br /> Primary Key (ShipperID),&lt;<br /> CONSTRAINT uc_CompanyName UNIQUE (CompanyName)<br /> );</div> <div class="textbox shaded">CREATE TABLE [dbo].[tblProducts] (<br /> [ProductID]           int NOT NULL,<br /> [SupplierID]          int NULL,<br /> [CategoryID]          int NULL,<br /> [ProductName]         nvarchar(40) NOT NULL,<br /> [EnglishName]         nvarchar(40) NULL,<br /> [QuantityPerUnit]     nvarchar(20) NULL,<br /> [UnitPrice]           money NULL,<br /> [UnitsInStock]        smallint NULL,<br /> [UnitsOnOrder]        smallint NULL,<br /> [ReorderLevel]        smallint NULL,<br /> [Discontinued]        bit NOT NULL,<br /> Primary Key (ProductID),<br /> Foreign Key (SupplierID) References tblSupplier<br /> );</div> <div class="textbox shaded">CREATE TABLE [dbo].[tblOrders] (<br /> [OrderID]            int NOT NULL,<br /> [CustomerID]         nvarchar(5) NOT NULL,<br /> [EmployeeID]         int NULL,<br /> [ShipName]           nvarchar(40) NULL,<br /> [ShipAddress]        nvarchar(60) NULL,<br /> [ShipCity]           nvarchar(15) NULL,<br /> [ShipRegion]         nvarchar(15) NULL,<br /> [ShipPostalCode]     nvarchar(10) NULL,<br /> [ShipCountry]        nvarchar(15) NULL,<br /> [ShipVia]            int NULL,<br /> [OrderDate]          smalldatetime NULL,<br /> [RequiredDate]       smalldatetime NULL,<br /> [ShippedDate]        smalldatetime NULL,<br /> [Freight]            money NULL<br /> Primary Key (OrderID),<br /> Foreign Key (CustomerID) References tblCustomers,<br /> Foreign Key (ShipVia) References tblShippers,<br /> Constraint valid_ShipDate CHECK (ShippedDate &gt; OrderDate)<br /> );</div> <div class="textbox shaded">CREATE TABLE [dbo].[tblOrderDetails] (<br /> [OrderID]       int NOT NULL,<br /> [ProductID]     int NOT NULL,<br /> [UnitPrice]     money NOT NULL,<br /> [Quantity]      smallint NOT NULL,<br /> [Discount]      real NOT NULL,<br /> Primary Key (OrderID, ProductID),<br /> Foreign Key (OrderID) References tblOrders,<br /> Foreign Key (ProductID) References tblProducts,<br /> Constraint Valid_Qty Check (Quantity &gt; 0)<br /> );<br /> Go</div> <h1>Part 2 &#8211; Create the Following SQL Statements</h1> <p>1.    Show a list of customers and the orders they generated during 2014. Display customer ID, order ID, order date and date ordered.</p> <div class="textbox shaded">Use Orders<br /> Go<br /> SELECT CompanyName, OrderID, RequiredDate as &#8216;order date&#8217;, OrderDate as &#8216;date ordered&#8217;<br /> FROM tblcustomers  JOIN tblOrders on tblOrders.CustomerID = tblCustomers.CustomerID<br /> WHERE Year(OrderDate) = 2014</div> <p>2.    Using the ALTER TABLE statement, add a new field (Active) in the tblcustomer.  Default it to True.</p> <div class="textbox shaded">ALTER TABLE tblCustomers<br /> ADD Active bit DEFAULT (&#8216;True&#8217;)</div> <p>3.    Show all orders purchased before September 1, 2012. Display company name, date ordered and total amount of order (include freight).</p> <div class="textbox shaded">SELECT tblOrders.OrderID, OrderDate as &#8216;Date Ordered&#8217;, sum(unitprice*quantity*(1-discount))+ freight as &#8216;Total Cost&#8217;<br /> FROM tblOrderDetails join tblOrders on tblOrders.orderID = tblOrderDetails.OrderID<br /> WHERE OrderDate &lt; &#8216;September 1, 2012&#8217;<br /> GROUP BY tblOrders.OrderID, freight, OrderDate</div> <p>4.    Show all orders that have been shipped via Federal Shipping.  Display OrderID, ShipName, ShipAddress and CustomerID.</p> <div class="textbox shaded">SELECT OrderID, ShipName, ShipAddress, CustomerID<br /> FROM tblOrders join tblShippers on tblOrders.ShipVia = tblShippers.ShipperID<br /> WHERE CompanyName= &#8216;Federal Shipping&#8217;</div> <p>5.    Show all customers who have not made purchases in 2011.</p> <div class="textbox shaded">SELECT CompanyName<br /> FROM tblCustomers<br /> WHERE CustomerID not in<br /> (  SELECT CustomerID<br /> FROM  tblOrders<br /> WHERE Year(OrderDate) = 2011<br /> )</div> <p>6.    Show all products that have never been ordered.</p> <div class="textbox shaded">SELECT ProductID from tblProducts<br /> Except<br /> SELECT ProductID from tblOrderDetails</div> <p>OR</p> <div class="textbox shaded">SELECT Products.ProductID,Products.ProductName<br /> FROM Products LEFT JOIN [Order Details]<br /> ON Products.ProductID = [Order Details].ProductID<br /> WHERE [Order Details].OrderID IS NULL</div> <p>7.    Show OrderIDs for customers who reside in London. Use a subquery. Display CustomerID, CustomerName and OrderID.</p> <div class="textbox shaded">SELECT Customers.CompanyName,Customers.CustomerID,OrderID<br /> FROM Orders<br /> LEFT JOIN Customers ON Orders.CustomerID = Customers.CustomerID<br /> WHERE Customers.CompanyName IN<br /> (SELECT CompanyName<br /> FROM Customers<br /> WHERE City = &#8216;London&#8217;)</div> <p>8.    Show products supplied by Supplier A and Supplier B. Display product name and supplier name.</p> <div class="textbox shaded">SELECT ProductName, Name<br /> FROM tblProducts JOIN tblSupplier on tblProducts.SupplierID = tblSupplier.SupplierID<br /> WHERE Name Like &#8216;Supplier A&#8217; or Name Like &#8216;Supplier B&#8217;</div> <p>9.    Show all products that come in boxes. Display product name and QuantityPerUnit.</p> <div class="textbox shaded">SELECT EnglishName, ProductName,  QuantityPerUnit<br /> FROM tblProducts<br /> WHERE QuantityPerUnit like &#8216;%box%&#8217;<br /> ORDER BY EnglishName</div> <h1><span style="color: #000000">Part 3 &#8211; Insert, Update, Delete, Indexes</span></h1> <p>1.    Create an Employee table. The primary key should be EmployeeID (autonumber). Add the following fields: LastName, FirstName, Address, City, Province, Postalcode, Phone, Salary. Show the CREATE TABLE statement and the INSERT statements for the five employees. Join the employee table to the tblOrders. Show the script for creating the table, setting constraints and adding employees.</p> <div class="textbox shaded">Use Orders<br /> CREATE TABLE [dbo].[tblEmployee](<br /> EmployeeID Int IDENTITY NOT NULL ,<br /> FirstName varchar (20) NOT NULL,<br /> LastName varchar (20) NOT NULL,<br /> Address varchar (50),<br /> City varchar(20), Province varchar (50),<br /> PostalCode char(6),<br /> Phone char (10),<br /> Salary Money NOT NULL,<br /> Primary Key (EmployeeID)</div> <div class="textbox shaded">Go<br /> INSERT into tblEmployees<br /> Values (&#8216;Jim&#8217;, &#8216;Smith&#8217;, &#8216;123 Fake&#8217;, &#8216;Terrace&#8217;, &#8216;BC&#8217;, &#8216;V8G5J6&#8217;, &#8216;2506155989&#8217;, &#8216;20.12&#8217;),<br /> (&#8216;Jimmy&#8217;, &#8216;Smithy&#8217;, &#8216;124 Fake&#8217;, &#8216;Terrace&#8217;, &#8216;BC&#8217;, &#8216;V8G5J7&#8217;, &#8216;2506155984&#8217;, &#8216;21.12&#8217;),<br /> (&#8216;John&#8217;, &#8216;Smore&#8217;, &#8217;13 Fake&#8217;, &#8216;Terrace&#8217;, &#8216;BC&#8217;, &#8216;V4G5J6&#8217;, &#8216;2506115989&#8217;, &#8216;19.12&#8217;),<br /> (&#8216;Jay&#8217;, &#8216;Sith&#8217;, &#8217;12 Fake&#8217;, &#8216;Terrace&#8217;, &#8216;BC&#8217;, &#8216;V8G4J6&#8217;, &#8216;2506155939&#8217;, &#8216;25.12&#8217;),<br /> (&#8216;Jig&#8217;, &#8216;Mith&#8217;, &#8217;23 Fake&#8217;, &#8216;Terrace&#8217;, &#8216;BC&#8217;, &#8216;V8G5J5&#8217;, &#8216;2506455989&#8217;, &#8216;18.12&#8217;);<br /> Go</div> <p>2.    Add a field to tblOrders called TotalSales. Show DDL – ALTER TABLE statement.</p> <div class="textbox shaded">ALTER TABLE tblOrders<br /> ADD Foreign Key (EmployeeID) references tblEmployees (EmployeeID)</div> <p>3.    Using the UPDATE statement, add the total sale for each order based on the order details table.</p> <div class="textbox shaded">UPDATE tblOrders<br /> Set TotalSales = (select sum(unitprice*quantity*(1-discount))<br /> FROM tblOrderDetails<br /> WHERE tblOrderDetails.OrderID= tblOrders.OrderID<br /> GROUP BY OrderID</div> </div></div>
<div class="back-matter about-the-author" id="about-the-author"><div class="back-matter-title-wrap"><h3 class="back-matter-number">4</h3><h1 class="back-matter-title">About the Authors</h1></div><div class="ugc back-matter-ugc"><h2>Primary Author: Adrienne Watt</h2> <p><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1-200x300.jpg" alt="Adrienne Watt_1" width="200" height="300" class="alignnone size-medium wp-image-935" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1-200x300.jpg 200w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1-685x1024.jpg 685w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1-65x97.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/Adrienne-Watt_1-225x336.jpg 225w" /></a></p> <p>Adrienne Watt holds a computer systems diploma (BCIT), a bachelor&#8217;s degree in technology (BCIT) and a master’s degree in business administration (City University).</p> <p>Since 1989, Adrienne has worked as an educator and gained extensive experience developing and delivering business and technology curriculum to post-secondary students. During that time, she ran a successful software development business. In the business, she worked as an IT professional in a variety of senior positions including project manager, database designer, administrator and business analyst. Recently she has been exploring a wide range of technology-related tools and processes to improve delivery methods and enhance learning for her students.</p> <h2>Contributing Author: Nelson Eng</h2> <p><a href="http://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng.jpg"><img src="//opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-300x200.jpg" alt="NelsonEng" width="300" height="200" class="alignnone size-medium wp-image-912" srcset="https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-300x200.jpg 300w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-1024x682.jpg 1024w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-65x43.jpg 65w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-225x150.jpg 225w, https://opentextbc.ca/dbdesign01/wp-content/uploads/sites/11/2014/09/NelsonEng-350x233.jpg 350w" /></a></p> <p><span>Nelson Eng completed his bachelor&#8217;s degree in <span>commerce</span> (accounting and management information systems) from the University of British Columbia and a master&#8217;s degree in computer science from the University of Western Ontario. He </span><span>spent 11</span><span> years as a computer systems coordinator with Science World of B.C. and 14 years as a computer science and information systems instructor </span><span>with Douglas College. </span></p> </div></div>
</body>
</html>